(self.webpackChunkui_tablero_basket=self.webpackChunkui_tablero_basket||[]).push([[520],{3520:(at,R,p)=>{"use strict";p.r(R),p.d(R,{ScoreboradModule:()=>Zi});var g={};p.r(g),p.d(g,{fixNegotiationNeeded:()=>Zn,shimAddTrackRemoveTrack:()=>Gn,shimAddTrackRemoveTrackWithNative:()=>Vn,shimGetDisplayMedia:()=>Kr,shimGetSendersWithDtmf:()=>jn,shimGetStats:()=>Nn,shimGetUserMedia:()=>Bn,shimMediaStream:()=>Un,shimOnTrack:()=>Fn,shimPeerConnection:()=>qt,shimSenderReceiverGetStats:()=>Hn});var A={};p.r(A),p.d(A,{shimAddTransceiver:()=>Xn,shimCreateAnswer:()=>tr,shimCreateOffer:()=>er,shimGetDisplayMedia:()=>qr,shimGetParameters:()=>Qn,shimGetUserMedia:()=>zn,shimOnTrack:()=>Jn,shimPeerConnection:()=>Wt,shimRTCDataChannel:()=>Wn,shimReceiverGetStats:()=>Kn,shimRemoveStream:()=>qn,shimSenderGetStats:()=>Yn});var f={};p.r(f),p.d(f,{shimAudioContext:()=>fr,shimCallbacksAPI:()=>ir,shimConstraints:()=>sr,shimCreateOfferLegacy:()=>lr,shimGetUserMedia:()=>or,shimLocalStreamsAPI:()=>nr,shimRTCIceServerUrls:()=>ar,shimRemoteStreamsAPI:()=>rr,shimTrackEventTransceiver:()=>cr});var b={};p.r(b),p.d(b,{removeExtmapAllowMixed:()=>en,shimAddIceCandidateNullOrEmpty:()=>Ot,shimConnectionState:()=>Qt,shimMaxMessageSize:()=>wt,shimParameterlessSetLocalDescription:()=>It,shimRTCIceCandidate:()=>Mt,shimRTCIceCandidateRelayProtocol:()=>Xt,shimSendThrowTypeError:()=>Rt});var x=p(6814),D=p(6223),U=p(3403),J=p(8755),V=p(3304),a=p(5879),se=p(9862),o=p(5065);let c=(()=>{class t{constructor(r){this.http=r,this.baseUrl=o.T.baseURL,this.headers=new se.WM({Authorization:`Bearer ${localStorage.getItem("access_token")}`})}addScore(r){return this.http.post(`${this.baseUrl}/score/add`,r,{headers:this.headers})}getScores(){return this.http.get(`${this.baseUrl}/score`,{headers:this.headers})}getScoresCreatedBy(r){return this.http.get(`${this.baseUrl}/score/${r}`,{headers:this.headers})}updateScore(r,n){return this.http.patch(`${this.baseUrl}/score/${r}`,n,{headers:this.headers})}deleteScore(r){return this.http.delete(`${this.baseUrl}/score/${r}`,{headers:this.headers})}static#e=this.\u0275fac=function(n){return new(n||t)(a.LFG(se.eN))};static#t=this.\u0275prov=a.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var d=p(2939),y=p(9185),M=p(617);let w=(()=>{class t{constructor(){this.inputValue=0,this.title="",this.showCloseModal=new a.vpe}onChangeInput(r){const{value:n}=r.target;""!==n&&(this.inputValue=parseInt(n))}onClickShowCloseModal(){this.showCloseModal.emit(this.inputValue)}static#e=this.\u0275fac=function(n){return new(n||t)};static#t=this.\u0275cmp=a.Xpm({type:t,selectors:[["scoreboard-score-modal"]],inputs:{inputValue:"inputValue",title:"title"},outputs:{showCloseModal:"showCloseModal"},decls:8,vars:2,consts:[[1,"d-flex","flex-column","content-modal"],[1,"content"],["placeholder","Minutos","type","number",3,"value","input"],[3,"click"]],template:function(n,i){1&n&&(a.TgZ(0,"div",0)(1,"h1"),a._uU(2),a.qZA(),a.TgZ(3,"div",1)(4,"input",2),a.NdJ("input",function(l){return i.onChangeInput(l)}),a.qZA()(),a.TgZ(5,"div",1)(6,"button",3),a.NdJ("click",function(){return i.onClickShowCloseModal()}),a._uU(7,"Aceptar"),a.qZA()()()),2&n&&(a.xp6(2),a.Oqu(i.title),a.xp6(2),a.Q6J("value",i.inputValue))},styles:[".content-modal[_ngcontent-%COMP%]{width:75%;background-color:var(--bs-gray-dark);height:35vh;border-radius:15px;box-shadow:0 4px 8px #0000001a;display:flex;flex-direction:column}.content-modal[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{height:33%;display:flex;text-align:center;color:#fff;font-family:Playfair Display,Courier,monospace;justify-content:center;align-items:center}.content[_ngcontent-%COMP%]{height:33%;display:flex;justify-content:center;align-items:center}.content[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{outline:none;height:50%;font-size:25px;text-align:center;border-radius:10px;border:none;font-family:Playfair Display,Courier,monospace}.content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:80%;height:50%;border-radius:9999px;border:none;font-family:Playfair Display,Courier,monospace;background-color:var(--bs-info-text-emphasis);color:#fff;font-size:20px}"]})}return t})();function S(t,e){if(1&t){const r=a.EpF();a.TgZ(0,"div",1)(1,"mat-icon",2),a.NdJ("click",function(){a.CHM(r);const i=a.oxw();return a.KtG(i.onClickBackArrow())}),a.qZA(),a._UZ(2,"span",3),a.TgZ(3,"mat-icon",4),a.NdJ("click",function(){a.CHM(r);const i=a.oxw();return a.KtG(i.onClickNextArrow())}),a.qZA()()}}let H=(()=>{class t{constructor(){this.value=!1,this.disabledClick=!1,this.clickPause=!1,this.backArrow=new a.vpe,this.nextArrow=new a.vpe}onClickBackArrow(){this.backArrow.emit()}onClickNextArrow(){this.nextArrow.emit()}static#e=this.\u0275fac=function(n){return new(n||t)};static#t=this.\u0275cmp=a.Xpm({type:t,selectors:[["scoreboard-add-substract-arrow"]],inputs:{value:"value",disabledClick:"disabledClick",clickPause:"clickPause"},outputs:{backArrow:"backArrow",nextArrow:"nextArrow"},decls:1,vars:1,consts:[["class","content-arrow play-pause",4,"ngIf"],[1,"content-arrow","play-pause"],["fontIcon","navigate_before",1,"arrow-icon",3,"click"],[1,"spacer"],["fontIcon","navigate_next",1,"arrow-icon",3,"click"]],template:function(n,i){1&n&&a.YNc(0,S,4,0,"div",0),2&n&&a.Q6J("ngIf",i.value&&!i.disabledClick&&!i.clickPause)},dependencies:[x.O5,M.Hw],styles:[".content-arrow[_ngcontent-%COMP%]{width:100%;display:flex;height:100%;justify-content:center}.arrow-icon[_ngcontent-%COMP%]{font-size:40px;width:50px;height:50px}@media screen and (orientation: landscape) and (min-width: 400px){.arrow-icon[_ngcontent-%COMP%]{font-size:40px}}@media screen and (orientation: landscape) and (min-width: 1400px){.arrow-icon[_ngcontent-%COMP%]{font-size:70px;width:70px;height:70px}}"]})}return t})(),ne=(()=>{class t{constructor(){this.title="",this.acceptModal=new a.vpe,this.cancelModal=new a.vpe}onClickAcceptCloseModal(){this.acceptModal.emit("")}onClickCancelCloseModal(){this.cancelModal.emit("")}static#e=this.\u0275fac=function(n){return new(n||t)};static#t=this.\u0275cmp=a.Xpm({type:t,selectors:[["scoreboard-add-score-modal"]],inputs:{title:"title"},outputs:{acceptModal:"acceptModal",cancelModal:"cancelModal"},decls:9,vars:1,consts:[[1,"d-flex","flex-column","content-modal"],[1,"content","btn-danger"],[1,"btn-accept",3,"click"],[1,"content"],[1,"btn-cancel",3,"click"]],template:function(n,i){1&n&&(a.TgZ(0,"div",0)(1,"h1"),a._uU(2),a.qZA(),a.TgZ(3,"div",1)(4,"button",2),a.NdJ("click",function(){return i.onClickAcceptCloseModal()}),a._uU(5," Aceptar "),a.qZA()(),a.TgZ(6,"div",3)(7,"button",4),a.NdJ("click",function(){return i.onClickCancelCloseModal()}),a._uU(8," Cancelar "),a.qZA()()()),2&n&&(a.xp6(2),a.Oqu(i.title))},styles:[".btn-accept[_ngcontent-%COMP%]{background-color:red!important;border:none}.errors-title[_ngcontent-%COMP%]{font-family:Playfair Display,Courier,monospace;padding:0 18px;text-align:center}",".content-modal[_ngcontent-%COMP%]{width:75%;background-color:var(--bs-gray-dark);height:35vh;border-radius:15px;box-shadow:0 4px 8px #0000001a;display:flex;flex-direction:column}.content-modal[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{height:33%;display:flex;text-align:center;color:#fff;font-family:Playfair Display,Courier,monospace;justify-content:center;align-items:center}.content[_ngcontent-%COMP%]{height:33%;display:flex;justify-content:center;align-items:center}.content[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{outline:none;height:50%;font-size:25px;text-align:center;border-radius:10px;border:none;font-family:Playfair Display,Courier,monospace}.content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:80%;height:50%;border-radius:9999px;border:none;font-family:Playfair Display,Courier,monospace;background-color:var(--bs-info-text-emphasis);color:#fff;font-size:20px}"]})}return t})();function de(t,e){1&t&&a._UZ(0,"shared-loader",19)}function Ae(t,e){if(1&t){const r=a.EpF();a.TgZ(0,"scoreboard-score-modal",20),a.NdJ("showCloseModal",function(i){a.CHM(r);const s=a.oxw();return a.KtG(s.onClickShowCloseModal(i))}),a.qZA()}if(2&t){const r=a.oxw();a.Q6J("title","Ingresar minutos")("inputValue",r.minutes)}}function ue(t,e){if(1&t){const r=a.EpF();a.TgZ(0,"scoreboard-add-score-modal",21),a.NdJ("acceptModal",function(){a.CHM(r);const i=a.oxw();return a.KtG(i.onClickAcceptAddScoreModal())})("cancelModal",function(){a.CHM(r);const i=a.oxw();return a.KtG(i.onClickAcceptCancelScoreModal())}),a.qZA()}}function ie(t,e){if(1&t){const r=a.EpF();a.TgZ(0,"h1",7),a.NdJ("click",function(){a.CHM(r);const i=a.oxw();return a.KtG(i.onStop())}),a._uU(1,"DETENER"),a.qZA()}}function Fe(t,e){if(1&t){const r=a.EpF();a.TgZ(0,"h1",7),a.NdJ("click",function(){a.CHM(r);const i=a.oxw();return a.KtG(i.onClickTapToStart(i.minutes))}),a._uU(1," CLIC PARA COMENZAR "),a.qZA()}}function ce(t,e){if(1&t){const r=a.EpF();a.TgZ(0,"mat-icon",25),a.NdJ("click",function(){a.CHM(r);const i=a.oxw(2);return a.KtG(i.onClickPause())}),a.qZA()}}function Y(t,e){if(1&t){const r=a.EpF();a.TgZ(0,"mat-icon",26),a.NdJ("click",function(){a.CHM(r);const i=a.oxw(2);return a.KtG(i.onClickPlay())}),a.qZA()}}function j(t,e){if(1&t&&(a.TgZ(0,"div",22),a.YNc(1,ce,1,0,"mat-icon",23),a.YNc(2,Y,1,0,"mat-icon",24),a.qZA()),2&t){const r=a.oxw();a.xp6(1),a.Q6J("ngIf",!r.clickPause),a.xp6(1),a.Q6J("ngIf",r.clickPause)}}let $=(()=>{class t{constructor(r,n){this.scoreService=r,this.snackbar=n,this.countdown="01:00",this.minutes=1,this.showPlayPause=!1,this.changeTitle=!1,this.alertCountdown="",this.showScoreModal=!1,this.clickPause=!1,this.score={home:0,visit:0,disabledClick:!0},this.fouls={foulsHome:0,foulsVisit:0},this.timeouts={timeoutsHome:0,timeoutsVisit:0},this.period=1,this.addScoreModal=!1,this.errorsModal=[],this.isLoading=!1,this.intervalId=null,this.sound=new J.Howl({src:["../../../../assets/basketball.mp3"]})}onClickNextHome(){this.score.disabledClick||(this.score.home+=1)}onClickBackHome(){this.score.home-=1}onClickNextVisit(){this.score.disabledClick||(this.score.visit+=1)}onClickBackVisit(){this.score.visit-=1}onClickTapToStart(r,n){typeof n>"u"&&(n=0,this.score={home:0,visit:0,disabledClick:!1},this.fouls={foulsHome:0,foulsVisit:0},this.timeouts={timeoutsHome:0,timeoutsVisit:0},this.period=1);const i=(new Date).getTime(),l=new Date(i+1e3*(60*r+n));this.changeTitle=!0,this.intervalId=setInterval(()=>{const u=(new Date).getTime(),m=l.getTime()-u;if(m<=0)this.onStop(),this.countdown="00:00";else{this.showPlayPause=!0;const h=Math.floor(m%36e5/6e4).toString().padStart(2,"0"),v=Math.floor(m%6e4/1e3).toString().padStart(2,"0");this.countdown=`${h}:${v}`}},1e3)}onStop(){this.clearIntervalCountdown(),this.showAddScoreModal(),this.countdown="00:00",this.changeTitle=!1,this.score.disabledClick=!0,this.alertCountdown="",this.showPlayPause=!1}onClickPause(){this.clearIntervalCountdown(),this.clickPause=!0}onClickPlay(){const r=this.countdown.split(":");this.clickPause=!1,this.onClickTapToStart(parseInt(r[0]),parseInt(r[1])+1)}showAddScoreModal(){this.sound.play(),this.addScoreModal=!0}onClickAcceptAddScoreModal(){this.isLoading=!0;const r={scoreHome:this.score.home,scoreVisit:this.score.visit,foulsHome:this.fouls.foulsHome,foulsVisit:this.fouls.foulsVisit,timeoutsHome:this.timeouts.timeoutsHome,timeoutsVisit:this.timeouts.timeoutsVisit,period:this.period,dateCreation:V().format("YYYY-MM-DD").toString(),createdBy:"Ignacio Tapia"};this.scoreService.addScore(r).subscribe(n=>{if((n.errors||[]).length>0)return this.showSnackbar("Error al ingresar marcador, se deben ingresar todos los campos obligatorios."),this.isLoading=!1,void(this.addScoreModal=!1);this.showSnackbar("Marcador agregado correctamente."),this.isLoading=!1,this.addScoreModal=!1})}onClickAcceptCancelScoreModal(){this.addScoreModal=!this.addScoreModal}showModalCountdown(){this.score.disabledClick&&(this.showScoreModal=!this.showScoreModal)}clearIntervalCountdown(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)}onClickNextFoulsHome(){this.score.disabledClick||(this.fouls.foulsHome+=1)}onClickBackFoulsHome(){this.fouls.foulsHome-=1}onClickNextFoulsVisit(){this.score.disabledClick||(this.fouls.foulsVisit+=1)}onClickBackFoulsVisit(){this.fouls.foulsVisit-=1}onClickNextTimeoutHome(){this.score.disabledClick||(this.timeouts.timeoutsHome+=1)}onClickBackTimeoutHome(){this.timeouts.timeoutsHome-=1}onClickNextTimeoutVisit(){this.score.disabledClick||(this.timeouts.timeoutsVisit+=1)}onClickBackTimeoutVisit(){this.timeouts.timeoutsVisit-=1}onClickNextPeriod(){this.score.disabledClick||(this.period+=1)}onClickBackPeriod(){this.period>1&&(this.period-=1)}onClickShowCloseModal(r){if(this.showScoreModal=!1,this.showPlayPause=!1,r)if(this.minutes=r,r<60)this.countdown=`${r}:00`;else{const n=Math.floor(r/60);this.countdown=`${n}:${(r%60).toString().padStart(2,"0")}:00`}}showSnackbar(r){this.snackbar.open(r,"Ok",{duration:2500})}static#e=this.\u0275fac=function(n){return new(n||t)(a.Y36(c),a.Y36(d.ux))};static#t=this.\u0275cmp=a.Xpm({type:t,selectors:[["scoreboard-page-home"]],decls:59,vars:36,consts:[[1,"home-page"],["class","shared-loader",4,"ngIf"],["class","score-modal",3,"title","inputValue","showCloseModal",4,"ngIf"],["title","\xbfDese\xe1s guardar este marcador?","class","score-modal",3,"acceptModal","cancelModal",4,"ngIf"],[1,"d-flex","flex-column","w-100","content-home"],[1,"w-100","text-center","header"],[1,"d-flex","flex-column"],[3,"click"],[3,"value","disabledClick","clickPause","backArrow","nextArrow"],[1,"d-flex","flex-column","tap-to-start"],[3,"click",4,"ngIf"],[1,"initial-counter",3,"click"],["class","content-arrow play-pause",4,"ngIf"],[1,"w-100","text-center","body"],[1,"d-flex","flex-column","fouls"],[1,"counter"],[1,"timeout"],[1,"d-flex","flex-column","period"],[1,"period-title"],[1,"shared-loader"],[1,"score-modal",3,"title","inputValue","showCloseModal"],["title","\xbfDese\xe1s guardar este marcador?",1,"score-modal",3,"acceptModal","cancelModal"],[1,"content-arrow","play-pause"],["class","arrow-icon","fontIcon","pause",3,"click",4,"ngIf"],["class","arrow-icon","fontIcon","play_arrow",3,"click",4,"ngIf"],["fontIcon","pause",1,"arrow-icon",3,"click"],["fontIcon","play_arrow",1,"arrow-icon",3,"click"]],template:function(n,i){1&n&&(a.TgZ(0,"div",0),a.YNc(1,de,1,0,"shared-loader",1),a.YNc(2,Ae,1,2,"scoreboard-score-modal",2),a.YNc(3,ue,1,0,"scoreboard-add-score-modal",3),a.TgZ(4,"div",4)(5,"div",5)(6,"div",6)(7,"h1"),a._uU(8,"HOME"),a.qZA(),a.TgZ(9,"span",7),a.NdJ("click",function(){return!i.clickPause&&i.onClickNextHome()}),a._uU(10),a.qZA(),a.TgZ(11,"scoreboard-add-substract-arrow",8),a.NdJ("backArrow",function(){return i.onClickBackHome()})("nextArrow",function(){return i.onClickNextHome()}),a.qZA()(),a.TgZ(12,"div",9),a.YNc(13,ie,2,0,"h1",10),a.YNc(14,Fe,2,0,"h1",10),a.TgZ(15,"span",11),a.NdJ("click",function(){return i.showModalCountdown()}),a._uU(16),a.qZA(),a.YNc(17,j,3,2,"div",12),a.qZA(),a.TgZ(18,"div",6)(19,"h1"),a._uU(20,"AWAY"),a.qZA(),a.TgZ(21,"span",7),a.NdJ("click",function(){return!i.clickPause&&i.onClickNextVisit()}),a._uU(22),a.qZA(),a.TgZ(23,"scoreboard-add-substract-arrow",8),a.NdJ("backArrow",function(){return i.onClickBackVisit()})("nextArrow",function(){return i.onClickNextVisit()}),a.qZA()()(),a.TgZ(24,"div",13)(25,"div",14)(26,"h1"),a._uU(27,"FOULS"),a.qZA(),a.TgZ(28,"span",7),a.NdJ("click",function(){return!i.clickPause&&i.onClickNextFoulsHome()}),a._uU(29),a.qZA(),a.TgZ(30,"scoreboard-add-substract-arrow",8),a.NdJ("backArrow",function(){return i.onClickBackFoulsHome()})("nextArrow",function(){return i.onClickNextFoulsHome()}),a.qZA()(),a.TgZ(31,"div",6)(32,"span",15),a._uU(33),a.qZA()(),a.TgZ(34,"div",14)(35,"h1"),a._uU(36,"FOULS"),a.qZA(),a.TgZ(37,"span",7),a.NdJ("click",function(){return!i.clickPause&&i.onClickNextFoulsVisit()}),a._uU(38),a.qZA(),a.TgZ(39,"scoreboard-add-substract-arrow",8),a.NdJ("backArrow",function(){return i.onClickBackFoulsVisit()})("nextArrow",function(){return i.onClickNextFoulsVisit()}),a.qZA()()(),a.TgZ(40,"div",13)(41,"div",14)(42,"h1",16),a._uU(43,"TIMEOUTS"),a.qZA(),a.TgZ(44,"span",7),a.NdJ("click",function(){return!i.clickPause&&i.onClickNextTimeoutHome()}),a._uU(45),a.qZA(),a.TgZ(46,"scoreboard-add-substract-arrow",8),a.NdJ("backArrow",function(){return i.onClickBackTimeoutHome()})("nextArrow",function(){return i.onClickNextTimeoutHome()}),a.qZA()(),a.TgZ(47,"div",17)(48,"h1",18),a._uU(49,"PERIOD"),a.qZA(),a.TgZ(50,"span",7),a.NdJ("click",function(){return!i.clickPause&&i.onClickNextPeriod()}),a._uU(51),a.qZA(),a.TgZ(52,"scoreboard-add-substract-arrow",8),a.NdJ("backArrow",function(){return i.onClickBackPeriod()})("nextArrow",function(){return i.onClickNextPeriod()}),a.qZA()(),a.TgZ(53,"div",14)(54,"h1",16),a._uU(55,"TIMEOUTS"),a.qZA(),a.TgZ(56,"span",7),a.NdJ("click",function(){return!i.clickPause&&i.onClickNextTimeoutVisit()}),a._uU(57),a.qZA(),a.TgZ(58,"scoreboard-add-substract-arrow",8),a.NdJ("backArrow",function(){return i.onClickBackTimeoutVisit()})("nextArrow",function(){return i.onClickNextTimeoutVisit()}),a.qZA()()()()()),2&n&&(a.xp6(1),a.Q6J("ngIf",i.isLoading),a.xp6(1),a.Q6J("ngIf",i.showScoreModal&&!i.isLoading),a.xp6(1),a.Q6J("ngIf",i.addScoreModal&&!i.isLoading),a.xp6(7),a.Oqu(i.score.home.toString().padStart(2,"0")),a.xp6(1),a.Q6J("value",i.score.home>0)("disabledClick",i.score.disabledClick)("clickPause",i.clickPause),a.xp6(2),a.Q6J("ngIf",i.changeTitle),a.xp6(1),a.Q6J("ngIf",!i.changeTitle),a.xp6(2),a.Oqu(i.countdown),a.xp6(1),a.Q6J("ngIf",i.showPlayPause),a.xp6(5),a.Oqu(i.score.visit.toString().padStart(2,"0")),a.xp6(1),a.Q6J("value",i.score.visit>0)("disabledClick",i.score.disabledClick)("clickPause",i.clickPause),a.xp6(6),a.Oqu(i.fouls.foulsHome.toString().padStart(2,"0")),a.xp6(1),a.Q6J("value",i.fouls.foulsHome>0)("disabledClick",i.score.disabledClick)("clickPause",i.clickPause),a.xp6(3),a.Oqu(i.alertCountdown),a.xp6(5),a.Oqu(i.fouls.foulsVisit.toString().padStart(2,"0")),a.xp6(1),a.Q6J("value",i.fouls.foulsVisit>0)("disabledClick",i.score.disabledClick)("clickPause",i.clickPause),a.xp6(6),a.Oqu(i.timeouts.timeoutsHome.toString().padStart(2,"0")),a.xp6(1),a.Q6J("value",i.timeouts.timeoutsHome>0)("disabledClick",i.score.disabledClick)("clickPause",i.clickPause),a.xp6(5),a.Oqu(i.period.toString().padStart(2,"0")),a.xp6(1),a.Q6J("value",i.period>1)("disabledClick",i.score.disabledClick)("clickPause",i.clickPause),a.xp6(5),a.Oqu(i.timeouts.timeoutsVisit.toString().padStart(2,"0")),a.xp6(1),a.Q6J("value",i.timeouts.timeoutsVisit>0)("disabledClick",i.score.disabledClick)("clickPause",i.clickPause))},dependencies:[x.O5,y.R,M.Hw,w,H,ne],styles:[".home-page[_ngcontent-%COMP%]{position:relative}.shared-loader[_ngcontent-%COMP%]{position:absolute;width:100%;display:flex;z-index:99999999;height:80vh;justify-content:center;align-items:center}.content-home[_ngcontent-%COMP%]{height:90vh;align-items:center;justify-content:center}.header[_ngcontent-%COMP%], .body[_ngcontent-%COMP%]{display:flex;height:40%;justify-content:space-around}.body[_ngcontent-%COMP%]{height:20%!important;display:flex;margin-top:20px;align-items:center}.header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:40px!important}.content-home[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-family:Playfair Display,serif;font-size:30px;margin-bottom:20px;color:#fff}.tap-to-start[_ngcontent-%COMP%]{justify-content:center;align-items:center;margin-top:35%}.tap-to-start[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{cursor:pointer;font-size:20px;color:#35a86b}.content-home[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:30px;font-family:Digital Numbers,serif;color:#2fa5ff}.initial-counter[_ngcontent-%COMP%]{color:#eeff00de!important}.counter[_ngcontent-%COMP%]{color:#ff4242!important;font-size:90px!important}.fouls[_ngcontent-%COMP%]{width:30%}.fouls[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:20px}.fouls[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .period[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:50px;color:#ffc800d9}.period[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:20px!important;text-align:center}.period[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#2fa5ff!important}.arrow-icon[_ngcontent-%COMP%]{font-size:40px;width:50px;height:50px}.play-pause[_ngcontent-%COMP%]{margin-top:20px}.score-modal[_ngcontent-%COMP%]{position:absolute;top:0;height:100vh;left:50%;transform:translate(-50%);width:100%;display:flex;z-index:9999;justify-content:center;align-items:center}@media screen and (orientation: landscape) and (min-width: 400px){.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:30px}.counter[_ngcontent-%COMP%]{font-size:50px!important}.fouls[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .period[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:40px}.content-home[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:0}.timeout[_ngcontent-%COMP%]{margin-top:30px}.header[_ngcontent-%COMP%], .body[_ngcontent-%COMP%]{height:35%}.period[_ngcontent-%COMP%]{margin-top:20px}.arrow-icon[_ngcontent-%COMP%]{font-size:40px}.initial-counter[_ngcontent-%COMP%], .tap-to-start[_ngcontent-%COMP%]{margin-top:0}}@media screen and (orientation: landscape) and (min-width: 700px){.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:30px}.header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:50px}.tap-to-start[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .fouls[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:30px}.initial-counter[_ngcontent-%COMP%]{margin-top:0}}@media screen and (orientation: landscape) and (min-width: 1000px){.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:30px}.header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:60px!important}.tap-to-start[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:40px}.fouls[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:30px}.fouls[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .period[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:60px}.timeout[_ngcontent-%COMP%]{margin-top:50px}.period[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:30px!important;margin-top:30px}.counter[_ngcontent-%COMP%]{font-size:80px!important}.initial-counter[_ngcontent-%COMP%]{margin-top:0}}@media screen and (orientation: landscape) and (min-width: 1400px){.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:60px}.header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:90px!important}.tap-to-start[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:50px}.fouls[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .fouls[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .period[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:60px}.timeout[_ngcontent-%COMP%]{margin-top:60px}.period[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:60px!important;margin-top:30px}.counter[_ngcontent-%COMP%]{font-size:100px!important}.header[_ngcontent-%COMP%]{height:30%!important}.header[_ngcontent-%COMP%], .body[_ngcontent-%COMP%]{margin-top:50px}.arrow-icon[_ngcontent-%COMP%]{font-size:70px;width:70px;height:70px}}"]})}return t})();var Z=p(9027),L=p(2296),W=p(7472),Q=p(2651),fe=p(1274);function me(t,e){if(1&t){const r=a.EpF();a.TgZ(0,"mat-list-item",13),a.NdJ("click",function(){a.CHM(r),a.oxw();const i=a.MAs(2);return a.KtG(i.toggle())}),a._UZ(1,"mat-icon",14),a._uU(2),a.qZA()}if(2&t){const r=e.$implicit;a.Q6J("routerLink",r.url),a.xp6(1),a.s9C("fontIcon",r.icon),a.xp6(1),a.hij(" ",r.label," ")}}const be=function(){return{width:"250px"}};let xe=(()=>{class t{constructor(r,n){this.authService=r,this.router=n,this.sidebarItems=[{label:"Marcador",icon:"view_module",url:"./home"},{label:"Mis Marcadores",icon:"label",url:"./my-score"},{label:"Compartir Pantalla",icon:"airplay",url:"./shared-window"}]}get user(){return this.authService.currentUser}onLogout(){this.authService.logout(),this.router.navigate(["/auth/login"])}static#e=this.\u0275fac=function(n){return new(n||t)(a.Y36(Z.e),a.Y36(U.F0))};static#t=this.\u0275cmp=a.Xpm({type:t,selectors:[["scoreboard-layout-page"]],decls:23,vars:7,consts:[["fullscreen","",1,"hola"],["mode","push",3,"ngStyle"],["sidenav",""],["color","primary"],["mat-icon-button","",3,"click"],["fontIcon","menu"],[1,"spacer"],[3,"routerLink","click",4,"ngFor","ngForOf"],[3,"click"],["matListItemIcon","","fontIcon","exit_to_app"],[3,"fontIcon"],[2,"text-align","center","width","100%"],[1,"container"],[3,"routerLink","click"],["matListItemIcon","",3,"fontIcon"]],template:function(n,i){if(1&n){const s=a.EpF();a.TgZ(0,"mat-sidenav-container",0)(1,"mat-sidenav",1,2)(3,"mat-toolbar",3)(4,"button",4),a.NdJ("click",function(){a.CHM(s);const u=a.MAs(2);return a.KtG(u.toggle())}),a._UZ(5,"mat-icon",5),a.qZA(),a._UZ(6,"span",6),a.TgZ(7,"span"),a._uU(8,"Men\xfa"),a.qZA()(),a.TgZ(9,"mat-nav-list"),a.YNc(10,me,3,3,"mat-list-item",7),a.TgZ(11,"mat-list-item",8),a.NdJ("click",function(){return i.onLogout()}),a._UZ(12,"mat-icon",9),a._uU(13," Cerrar Sesi\xf3n "),a.qZA()()(),a.TgZ(14,"mat-toolbar",3)(15,"button",4),a.NdJ("click",function(){a.CHM(s);const u=a.MAs(2);return a.KtG(u.toggle())}),a.TgZ(16,"mat-icon",10),a._uU(17,"menu"),a.qZA()(),a.TgZ(18,"span",11),a._uU(19),a.ALo(20,"titlecase"),a.qZA()(),a.TgZ(21,"div",12),a._UZ(22,"router-outlet"),a.qZA()()}2&n&&(a.xp6(1),a.Q6J("ngStyle",a.DdM(6,be)),a.xp6(9),a.Q6J("ngForOf",i.sidebarItems),a.xp6(6),a.Q6J("fontIcon","menu"),a.xp6(3),a.hij("Bienvenido ",a.lcZ(20,4,i.user),""))},dependencies:[U.lC,U.rH,x.sg,x.PC,L.RK,M.Hw,W.Hk,W.Tg,W.Yt,Q.JX,Q.TM,fe.Ye,x.rS],encapsulation:2})}return t})(),Oe=(()=>{class t{constructor(r){this.scoreService=r}ngOnInit(){this.scoreService.getScoresCreatedBy("Alexander Ortiz").subscribe(r=>{console.log(r)})}static#e=this.\u0275fac=function(n){return new(n||t)(a.Y36(c))};static#t=this.\u0275cmp=a.Xpm({type:t,selectors:[["scoreboard-my-score"]],decls:2,vars:0,template:function(n,i){1&n&&(a.TgZ(0,"p"),a._uU(1,"my-score works!"),a.qZA())}})}return t})();function Ve(t,e,r,n,i,s,l){try{var u=t[s](l),m=u.value}catch(h){return void r(h)}u.done?e(m):Promise.resolve(m).then(n,i)}function Pe(t){return function(){var e=this,r=arguments;return new Promise(function(n,i){var s=t.apply(e,r);function l(m){Ve(s,n,i,l,u,"next",m)}function u(m){Ve(s,n,i,l,u,"throw",m)}l(void 0)})}}function Ge(t,e){this.v=t,this.k=e}function De(t){var e,r;function n(s,l){try{var u=t[s](l),m=u.value,h=m instanceof Ge;Promise.resolve(h?m.v:m).then(function(v){if(h){var P="return"===s?"return":"next";if(!m.k||v.done)return n(P,v);v=t[P](v).value}i(u.done?"return":"normal",v)},function(v){n("throw",v)})}catch(v){i("throw",v)}}function i(s,l){switch(s){case"return":e.resolve({value:l,done:!0});break;case"throw":e.reject(l);break;default:e.resolve({value:l,done:!1})}(e=e.next)?n(e.key,e.arg):r=null}this._invoke=function(s,l){return new Promise(function(u,m){var h={key:s,arg:l,resolve:u,reject:m,next:null};r?r=r.next=h:(e=r=h,n(s,l))})},"function"!=typeof t.return&&(this.return=void 0)}De.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},De.prototype.next=function(t){return this._invoke("next",t)},De.prototype.throw=function(t){return this._invoke("throw",t)},De.prototype.return=function(t){return this._invoke("return",t)};class je{constructor(){this.encoder=new TextEncoder,this._pieces=[],this._parts=[]}append_buffer(e){this.flush(),this._parts.push(e)}append(e){this._pieces.push(e)}flush(){if(this._pieces.length>0){const e=new Uint8Array(this._pieces);this._parts.push(e),this._pieces=[]}}toArrayBuffer(){const e=[];for(const r of this._parts)e.push(r);return function We(t){let e=0;for(const i of t)e+=i.byteLength;const r=new Uint8Array(e);let n=0;for(const i of t){const s=new Uint8Array(i.buffer,i.byteOffset,i.byteLength);r.set(s,n),n+=i.byteLength}return r}(e).buffer}}function Xe(t){return new Gr(t).unpack()}function wn(t){const e=new Zr,r=e.pack(t);return r instanceof Promise?r.then(()=>e.getBuffer()):e.getBuffer()}class Gr{constructor(e){this.index=0,this.dataBuffer=e,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}unpack(){const e=this.unpack_uint8();if(e<128)return e;if((224^e)<32)return(224^e)-32;let r;if((r=160^e)<=15)return this.unpack_raw(r);if((r=176^e)<=15)return this.unpack_string(r);if((r=144^e)<=15)return this.unpack_array(r);if((r=128^e)<=15)return this.unpack_map(r);switch(e){case 192:return null;case 193:case 212:case 213:case 214:case 215:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 216:return r=this.unpack_uint16(),this.unpack_string(r);case 217:return r=this.unpack_uint32(),this.unpack_string(r);case 218:return r=this.unpack_uint16(),this.unpack_raw(r);case 219:return r=this.unpack_uint32(),this.unpack_raw(r);case 220:return r=this.unpack_uint16(),this.unpack_array(r);case 221:return r=this.unpack_uint32(),this.unpack_array(r);case 222:return r=this.unpack_uint16(),this.unpack_map(r);case 223:return r=this.unpack_uint32(),this.unpack_map(r)}}unpack_uint8(){const e=255&this.dataView[this.index];return this.index++,e}unpack_uint16(){const e=this.read(2),r=256*(255&e[0])+(255&e[1]);return this.index+=2,r}unpack_uint32(){const e=this.read(4),r=256*(256*(256*e[0]+e[1])+e[2])+e[3];return this.index+=4,r}unpack_uint64(){const e=this.read(8),r=256*(256*(256*(256*(256*(256*(256*e[0]+e[1])+e[2])+e[3])+e[4])+e[5])+e[6])+e[7];return this.index+=8,r}unpack_int8(){const e=this.unpack_uint8();return e<128?e:e-256}unpack_int16(){const e=this.unpack_uint16();return e<32768?e:e-65536}unpack_int32(){const e=this.unpack_uint32();return e<2**31?e:e-2**32}unpack_int64(){const e=this.unpack_uint64();return e<2**63?e:e-2**64}unpack_raw(e){if(this.length<this.index+e)throw new Error(`BinaryPackFailure: index is out of range ${this.index} ${e} ${this.length}`);const r=this.dataBuffer.slice(this.index,this.index+e);return this.index+=e,r}unpack_string(e){const r=this.read(e);let s,l,n=0,i="";for(;n<e;)s=r[n],s<160?(l=s,n++):(192^s)<32?(l=(31&s)<<6|63&r[n+1],n+=2):(224^s)<16?(l=(15&s)<<12|(63&r[n+1])<<6|63&r[n+2],n+=3):(l=(7&s)<<18|(63&r[n+1])<<12|(63&r[n+2])<<6|63&r[n+3],n+=4),i+=String.fromCodePoint(l);return this.index+=e,i}unpack_array(e){const r=new Array(e);for(let n=0;n<e;n++)r[n]=this.unpack();return r}unpack_map(e){const r={};for(let n=0;n<e;n++)r[this.unpack()]=this.unpack();return r}unpack_float(){const e=this.unpack_uint32();return(0==e>>31?1:-1)*(8388607&e|8388608)*2**((e>>23&255)-127-23)}unpack_double(){const e=this.unpack_uint32(),i=(e>>20&2047)-1023;return(0==e>>31?1:-1)*((1048575&e|1048576)*2**(i-20)+this.unpack_uint32()*2**(i-52))}read(e){const r=this.index;if(r+e<=this.length)return this.dataView.subarray(r,r+e);throw new Error("BinaryPackFailure: read index out of range")}}class Zr{getBuffer(){return this._bufferBuilder.toArrayBuffer()}pack(e){if("string"==typeof e)this.pack_string(e);else if("number"==typeof e)Math.floor(e)===e?this.pack_integer(e):this.pack_double(e);else if("boolean"==typeof e)!0===e?this._bufferBuilder.append(195):!1===e&&this._bufferBuilder.append(194);else if(void 0===e)this._bufferBuilder.append(192);else{if("object"!=typeof e)throw new Error(`Type "${typeof e}" not yet supported`);if(null===e)this._bufferBuilder.append(192);else{const r=e.constructor;if(e instanceof Array){const n=this.pack_array(e);if(n instanceof Promise)return n.then(()=>this._bufferBuilder.flush())}else if(e instanceof ArrayBuffer)this.pack_bin(new Uint8Array(e));else if("BYTES_PER_ELEMENT"in e)this.pack_bin(new Uint8Array(e.buffer,e.byteOffset,e.byteLength));else if(e instanceof Date)this.pack_string(e.toString());else{if(e instanceof Blob)return e.arrayBuffer().then(n=>{this.pack_bin(new Uint8Array(n)),this._bufferBuilder.flush()});if(r!=Object&&!r.toString().startsWith("class"))throw new Error(`Type "${r.toString()}" not yet supported`);{const n=this.pack_object(e);if(n instanceof Promise)return n.then(()=>this._bufferBuilder.flush())}}}}this._bufferBuilder.flush()}pack_bin(e){const r=e.length;if(r<=15)this.pack_uint8(160+r);else if(r<=65535)this._bufferBuilder.append(218),this.pack_uint16(r);else{if(!(r<=4294967295))throw new Error("Invalid length");this._bufferBuilder.append(219),this.pack_uint32(r)}this._bufferBuilder.append_buffer(e)}pack_string(e){const r=this._textEncoder.encode(e),n=r.length;if(n<=15)this.pack_uint8(176+n);else if(n<=65535)this._bufferBuilder.append(216),this.pack_uint16(n);else{if(!(n<=4294967295))throw new Error("Invalid length");this._bufferBuilder.append(217),this.pack_uint32(n)}this._bufferBuilder.append_buffer(r)}pack_array(e){const r=e.length;if(r<=15)this.pack_uint8(144+r);else if(r<=65535)this._bufferBuilder.append(220),this.pack_uint16(r);else{if(!(r<=4294967295))throw new Error("Invalid length");this._bufferBuilder.append(221),this.pack_uint32(r)}const n=i=>{if(i<r){const s=this.pack(e[i]);return s instanceof Promise?s.then(()=>n(i+1)):n(i+1)}};return n(0)}pack_integer(e){if(e>=-32&&e<=127)this._bufferBuilder.append(255&e);else if(e>=0&&e<=255)this._bufferBuilder.append(204),this.pack_uint8(e);else if(e>=-128&&e<=127)this._bufferBuilder.append(208),this.pack_int8(e);else if(e>=0&&e<=65535)this._bufferBuilder.append(205),this.pack_uint16(e);else if(e>=-32768&&e<=32767)this._bufferBuilder.append(209),this.pack_int16(e);else if(e>=0&&e<=4294967295)this._bufferBuilder.append(206),this.pack_uint32(e);else if(e>=-2147483648&&e<=2147483647)this._bufferBuilder.append(210),this.pack_int32(e);else if(e>=-0x8000000000000000&&e<=0x8000000000000000)this._bufferBuilder.append(211),this.pack_int64(e);else{if(!(e>=0&&e<=0x10000000000000000))throw new Error("Invalid integer");this._bufferBuilder.append(207),this.pack_uint64(e)}}pack_double(e){let r=0;e<0&&(r=1,e=-e);const n=Math.floor(Math.log(e)/Math.LN2),s=Math.floor((e/2**n-1)*2**52),l=2**32,u=r<<31|n+1023<<20|s/l&1048575,m=s%l;this._bufferBuilder.append(203),this.pack_int32(u),this.pack_int32(m)}pack_object(e){const r=Object.keys(e),n=r.length;if(n<=15)this.pack_uint8(128+n);else if(n<=65535)this._bufferBuilder.append(222),this.pack_uint16(n);else{if(!(n<=4294967295))throw new Error("Invalid length");this._bufferBuilder.append(223),this.pack_uint32(n)}const i=s=>{if(s<r.length){const l=r[s];if(e.hasOwnProperty(l)){this.pack(l);const u=this.pack(e[l]);if(u instanceof Promise)return u.then(()=>i(s+1))}return i(s+1)}};return i(0)}pack_uint8(e){this._bufferBuilder.append(e)}pack_uint16(e){this._bufferBuilder.append(e>>8),this._bufferBuilder.append(255&e)}pack_uint32(e){const r=4294967295&e;this._bufferBuilder.append((4278190080&r)>>>24),this._bufferBuilder.append((16711680&r)>>>16),this._bufferBuilder.append((65280&r)>>>8),this._bufferBuilder.append(255&r)}pack_uint64(e){const r=e/4294967296,n=e%2**32;this._bufferBuilder.append((4278190080&r)>>>24),this._bufferBuilder.append((16711680&r)>>>16),this._bufferBuilder.append((65280&r)>>>8),this._bufferBuilder.append(255&r),this._bufferBuilder.append((4278190080&n)>>>24),this._bufferBuilder.append((16711680&n)>>>16),this._bufferBuilder.append((65280&n)>>>8),this._bufferBuilder.append(255&n)}pack_int8(e){this._bufferBuilder.append(255&e)}pack_int16(e){this._bufferBuilder.append((65280&e)>>8),this._bufferBuilder.append(255&e)}pack_int32(e){this._bufferBuilder.append(e>>>24&255),this._bufferBuilder.append((16711680&e)>>>16),this._bufferBuilder.append((65280&e)>>>8),this._bufferBuilder.append(255&e)}pack_int64(e){const r=Math.floor(e/4294967296),n=e%2**32;this._bufferBuilder.append((4278190080&r)>>>24),this._bufferBuilder.append((16711680&r)>>>16),this._bufferBuilder.append((65280&r)>>>8),this._bufferBuilder.append(255&r),this._bufferBuilder.append((4278190080&n)>>>24),this._bufferBuilder.append((16711680&n)>>>16),this._bufferBuilder.append((65280&n)>>>8),this._bufferBuilder.append(255&n)}constructor(){this._bufferBuilder=new je,this._textEncoder=new TextEncoder}}let Rn=!0,On=!0;function Pt(t,e,r){const n=t.match(e);return n&&n.length>=r&&parseInt(n[r],10)}function Qe(t,e,r){if(!t.RTCPeerConnection)return;const n=t.RTCPeerConnection.prototype,i=n.addEventListener;n.addEventListener=function(l,u){if(l!==e)return i.apply(this,arguments);const m=h=>{const v=r(h);v&&(u.handleEvent?u.handleEvent(v):u(v))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(u,m),i.apply(this,[l,m])};const s=n.removeEventListener;n.removeEventListener=function(l,u){if(l!==e||!this._eventMap||!this._eventMap[e])return s.apply(this,arguments);if(!this._eventMap[e].has(u))return s.apply(this,arguments);const m=this._eventMap[e].get(u);return this._eventMap[e].delete(u),0===this._eventMap[e].size&&delete this._eventMap[e],0===Object.keys(this._eventMap).length&&delete this._eventMap,s.apply(this,[l,m])},Object.defineProperty(n,"on"+e,{get(){return this["_on"+e]},set(l){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),l&&this.addEventListener(e,this["_on"+e]=l)},enumerable:!0,configurable:!0})}function zr(t){return"boolean"!=typeof t?new Error("Argument type: "+typeof t+". Please use a boolean."):(Rn=t,t?"adapter.js logging disabled":"adapter.js logging enabled")}function Jr(t){return"boolean"!=typeof t?new Error("Argument type: "+typeof t+". Please use a boolean."):(On=!t,"adapter.js deprecation warnings "+(t?"disabled":"enabled"))}function In(){if("object"==typeof window){if(Rn)return;typeof console<"u"&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function Yt(t,e){On&&console.warn(t+" is deprecated, please use "+e+" instead.")}function En(t){return"[object Object]"===Object.prototype.toString.call(t)}function Dn(t){return En(t)?Object.keys(t).reduce(function(e,r){const n=En(t[r]),i=n?Dn(t[r]):t[r],s=n&&!Object.keys(i).length;return void 0===i||s?e:Object.assign(e,{[r]:i})},{}):t}function Kt(t,e,r){!e||r.has(e.id)||(r.set(e.id,e),Object.keys(e).forEach(n=>{n.endsWith("Id")?Kt(t,t.get(e[n]),r):n.endsWith("Ids")&&e[n].forEach(i=>{Kt(t,t.get(i),r)})}))}function $n(t,e,r){const n=r?"outbound-rtp":"inbound-rtp",i=new Map;if(null===e)return i;const s=[];return t.forEach(l=>{"track"===l.type&&l.trackIdentifier===e.id&&s.push(l)}),s.forEach(l=>{t.forEach(u=>{u.type===n&&u.trackId===l.id&&Kt(t,u,i)})}),i}const Ln=In;function Bn(t,e){const r=t&&t.navigator;if(!r.mediaDevices)return;const n=function(u){if("object"!=typeof u||u.mandatory||u.optional)return u;const m={};return Object.keys(u).forEach(h=>{if("require"===h||"advanced"===h||"mediaSource"===h)return;const v="object"==typeof u[h]?u[h]:{ideal:u[h]};void 0!==v.exact&&"number"==typeof v.exact&&(v.min=v.max=v.exact);const P=function(B,K){return B?B+K.charAt(0).toUpperCase()+K.slice(1):"deviceId"===K?"sourceId":K};if(void 0!==v.ideal){m.optional=m.optional||[];let B={};"number"==typeof v.ideal?(B[P("min",h)]=v.ideal,m.optional.push(B),B={},B[P("max",h)]=v.ideal,m.optional.push(B)):(B[P("",h)]=v.ideal,m.optional.push(B))}void 0!==v.exact&&"number"!=typeof v.exact?(m.mandatory=m.mandatory||{},m.mandatory[P("",h)]=v.exact):["min","max"].forEach(B=>{void 0!==v[B]&&(m.mandatory=m.mandatory||{},m.mandatory[P(B,h)]=v[B])})}),u.advanced&&(m.optional=(m.optional||[]).concat(u.advanced)),m},i=function(u,m){if(e.version>=61)return m(u);if((u=JSON.parse(JSON.stringify(u)))&&"object"==typeof u.audio){const h=function(v,P,B){P in v&&!(B in v)&&(v[B]=v[P],delete v[P])};h((u=JSON.parse(JSON.stringify(u))).audio,"autoGainControl","googAutoGainControl"),h(u.audio,"noiseSuppression","googNoiseSuppression"),u.audio=n(u.audio)}if(u&&"object"==typeof u.video){let h=u.video.facingMode;h=h&&("object"==typeof h?h:{ideal:h});const v=e.version<66;if(h&&("user"===h.exact||"environment"===h.exact||"user"===h.ideal||"environment"===h.ideal)&&(!r.mediaDevices.getSupportedConstraints||!r.mediaDevices.getSupportedConstraints().facingMode||v)){let P;if(delete u.video.facingMode,"environment"===h.exact||"environment"===h.ideal?P=["back","rear"]:("user"===h.exact||"user"===h.ideal)&&(P=["front"]),P)return r.mediaDevices.enumerateDevices().then(B=>{let K=(B=B.filter(le=>"videoinput"===le.kind)).find(le=>P.some(he=>le.label.toLowerCase().includes(he)));return!K&&B.length&&P.includes("back")&&(K=B[B.length-1]),K&&(u.video.deviceId=h.exact?{exact:K.deviceId}:{ideal:K.deviceId}),u.video=n(u.video),Ln("chrome: "+JSON.stringify(u)),m(u)})}u.video=n(u.video)}return Ln("chrome: "+JSON.stringify(u)),m(u)},s=function(u){return e.version>=64?u:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[u.name]||u.name,message:u.message,constraint:u.constraint||u.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(r.getUserMedia=function(u,m,h){i(u,v=>{r.webkitGetUserMedia(v,m,P=>{h&&h(s(P))})})}.bind(r),r.mediaDevices.getUserMedia){const u=r.mediaDevices.getUserMedia.bind(r.mediaDevices);r.mediaDevices.getUserMedia=function(m){return i(m,h=>u(h).then(v=>{if(h.audio&&!v.getAudioTracks().length||h.video&&!v.getVideoTracks().length)throw v.getTracks().forEach(P=>{P.stop()}),new DOMException("","NotFoundError");return v},v=>Promise.reject(s(v))))}}}function Kr(t,e){if((!t.navigator.mediaDevices||!("getDisplayMedia"in t.navigator.mediaDevices))&&t.navigator.mediaDevices){if("function"!=typeof e)return void console.error("shimGetDisplayMedia: getSourceId argument is not a function");t.navigator.mediaDevices.getDisplayMedia=function(n){return e(n).then(i=>{const s=n.video&&n.video.width,l=n.video&&n.video.height;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:i,maxFrameRate:n.video&&n.video.frameRate||3}},s&&(n.video.mandatory.maxWidth=s),l&&(n.video.mandatory.maxHeight=l),t.navigator.mediaDevices.getUserMedia(n)})}}}function Un(t){t.MediaStream=t.MediaStream||t.webkitMediaStream}function Fn(t){if("object"==typeof t&&t.RTCPeerConnection&&!("ontrack"in t.RTCPeerConnection.prototype)){Object.defineProperty(t.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(r){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=r)},enumerable:!0,configurable:!0});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=n=>{n.stream.addEventListener("addtrack",i=>{let s;s=t.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(u=>u.track&&u.track.id===i.track.id):{track:i.track};const l=new Event("track");l.track=i.track,l.receiver=s,l.transceiver={receiver:s},l.streams=[n.stream],this.dispatchEvent(l)}),n.stream.getTracks().forEach(i=>{let s;s=t.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(u=>u.track&&u.track.id===i.id):{track:i};const l=new Event("track");l.track=i,l.receiver=s,l.transceiver={receiver:s},l.streams=[n.stream],this.dispatchEvent(l)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else Qe(t,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function jn(t){if("object"==typeof t&&t.RTCPeerConnection&&!("getSenders"in t.RTCPeerConnection.prototype)&&"createDTMFSender"in t.RTCPeerConnection.prototype){const e=function(i,s){return{track:s,get dtmf(){return void 0===this._dtmf&&(this._dtmf="audio"===s.kind?i.createDTMFSender(s):null),this._dtmf},_pc:i}};if(!t.RTCPeerConnection.prototype.getSenders){t.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const i=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(u,m){let h=i.apply(this,arguments);return h||(h=e(this,u),this._senders.push(h)),h};const s=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(u){s.apply(this,arguments);const m=this._senders.indexOf(u);-1!==m&&this._senders.splice(m,1)}}const r=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(s){this._senders=this._senders||[],r.apply(this,[s]),s.getTracks().forEach(l=>{this._senders.push(e(this,l))})};const n=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(s){this._senders=this._senders||[],n.apply(this,[s]),s.getTracks().forEach(l=>{const u=this._senders.find(m=>m.track===l);u&&this._senders.splice(this._senders.indexOf(u),1)})}}else if("object"==typeof t&&t.RTCPeerConnection&&"getSenders"in t.RTCPeerConnection.prototype&&"createDTMFSender"in t.RTCPeerConnection.prototype&&t.RTCRtpSender&&!("dtmf"in t.RTCRtpSender.prototype)){const e=t.RTCPeerConnection.prototype.getSenders;t.RTCPeerConnection.prototype.getSenders=function(){const n=e.apply(this,[]);return n.forEach(i=>i._pc=this),n},Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&(this._dtmf="audio"===this.track.kind?this._pc.createDTMFSender(this.track):null),this._dtmf}})}}function Nn(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[n,i,s]=arguments;if(arguments.length>0&&"function"==typeof n)return e.apply(this,arguments);if(0===e.length&&(0===arguments.length||"function"!=typeof n))return e.apply(this,[]);const l=function(m){const h={};return m.result().forEach(P=>{const B={id:P.id,timestamp:P.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[P.type]||P.type};P.names().forEach(K=>{B[K]=P.stat(K)}),h[B.id]=B}),h},u=function(m){return new Map(Object.keys(m).map(h=>[h,m[h]]))};return arguments.length>=2?e.apply(this,[function(h){i(u(l(h)))},n]):new Promise((m,h)=>{e.apply(this,[function(v){m(u(l(v)))},h])}).then(i,s)}}function Hn(t){if(!("object"==typeof t&&t.RTCPeerConnection&&t.RTCRtpSender&&t.RTCRtpReceiver))return;if(!("getStats"in t.RTCRtpSender.prototype)){const r=t.RTCPeerConnection.prototype.getSenders;r&&(t.RTCPeerConnection.prototype.getSenders=function(){const s=r.apply(this,[]);return s.forEach(l=>l._pc=this),s});const n=t.RTCPeerConnection.prototype.addTrack;n&&(t.RTCPeerConnection.prototype.addTrack=function(){const s=n.apply(this,arguments);return s._pc=this,s}),t.RTCRtpSender.prototype.getStats=function(){const s=this;return this._pc.getStats().then(l=>$n(l,s.track,!0))}}if(!("getStats"in t.RTCRtpReceiver.prototype)){const r=t.RTCPeerConnection.prototype.getReceivers;r&&(t.RTCPeerConnection.prototype.getReceivers=function(){const i=r.apply(this,[]);return i.forEach(s=>s._pc=this),i}),Qe(t,"track",n=>(n.receiver._pc=n.srcElement,n)),t.RTCRtpReceiver.prototype.getStats=function(){const i=this;return this._pc.getStats().then(s=>$n(s,i.track,!1))}}if(!("getStats"in t.RTCRtpSender.prototype)||!("getStats"in t.RTCRtpReceiver.prototype))return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof t.MediaStreamTrack){const n=arguments[0];let i,s,l;return this.getSenders().forEach(u=>{u.track===n&&(i?l=!0:i=u)}),this.getReceivers().forEach(u=>(u.track===n&&(s?l=!0:s=u),u.track===n)),l||i&&s?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):i?i.getStats():s?s.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function Vn(t){t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(l=>this._shimmedLocalStreams[l][0])};const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(l,u){if(!u)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const m=e.apply(this,arguments);return this._shimmedLocalStreams[u.id]?-1===this._shimmedLocalStreams[u.id].indexOf(m)&&this._shimmedLocalStreams[u.id].push(m):this._shimmedLocalStreams[u.id]=[u,m],m};const r=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(l){this._shimmedLocalStreams=this._shimmedLocalStreams||{},l.getTracks().forEach(h=>{if(this.getSenders().find(P=>P.track===h))throw new DOMException("Track already exists.","InvalidAccessError")});const u=this.getSenders();r.apply(this,arguments);const m=this.getSenders().filter(h=>-1===u.indexOf(h));this._shimmedLocalStreams[l.id]=[l].concat(m)};const n=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(l){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[l.id],n.apply(this,arguments)};const i=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(l){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},l&&Object.keys(this._shimmedLocalStreams).forEach(u=>{const m=this._shimmedLocalStreams[u].indexOf(l);-1!==m&&this._shimmedLocalStreams[u].splice(m,1),1===this._shimmedLocalStreams[u].length&&delete this._shimmedLocalStreams[u]}),i.apply(this,arguments)}}function Gn(t,e){if(!t.RTCPeerConnection)return;if(t.RTCPeerConnection.prototype.addTrack&&e.version>=65)return Vn(t);const r=t.RTCPeerConnection.prototype.getLocalStreams;t.RTCPeerConnection.prototype.getLocalStreams=function(){const v=r.apply(this);return this._reverseStreams=this._reverseStreams||{},v.map(P=>this._reverseStreams[P.id])};const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(v){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},v.getTracks().forEach(P=>{if(this.getSenders().find(K=>K.track===P))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[v.id]){const P=new t.MediaStream(v.getTracks());this._streams[v.id]=P,this._reverseStreams[P.id]=v,v=P}n.apply(this,[v])};const i=t.RTCPeerConnection.prototype.removeStream;function s(h,v){let P=v.sdp;return Object.keys(h._reverseStreams||[]).forEach(B=>{const K=h._reverseStreams[B];P=P.replace(new RegExp(h._streams[K.id].id,"g"),K.id)}),new RTCSessionDescription({type:v.type,sdp:P})}t.RTCPeerConnection.prototype.removeStream=function(v){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[v.id]||v]),delete this._reverseStreams[this._streams[v.id]?this._streams[v.id].id:v.id],delete this._streams[v.id]},t.RTCPeerConnection.prototype.addTrack=function(v,P){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const B=[].slice.call(arguments,1);if(1!==B.length||!B[0].getTracks().find(he=>he===v))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(he=>he.track===v))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const le=this._streams[P.id];if(le)le.addTrack(v),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const he=new t.MediaStream([v]);this._streams[P.id]=he,this._reverseStreams[he.id]=P,this.addStream(he)}return this.getSenders().find(he=>he.track===v)},["createOffer","createAnswer"].forEach(function(h){const v=t.RTCPeerConnection.prototype[h],P={[h](){const B=arguments;return arguments.length&&"function"==typeof arguments[0]?v.apply(this,[le=>{const he=s(this,le);B[0].apply(null,[he])},le=>{B[1]&&B[1].apply(null,le)},arguments[2]]):v.apply(this,arguments).then(le=>s(this,le))}};t.RTCPeerConnection.prototype[h]=P[h]});const u=t.RTCPeerConnection.prototype.setLocalDescription;t.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=function l(h,v){let P=v.sdp;return Object.keys(h._reverseStreams||[]).forEach(B=>{const K=h._reverseStreams[B],le=h._streams[K.id];P=P.replace(new RegExp(K.id,"g"),le.id)}),new RTCSessionDescription({type:v.type,sdp:P})}(this,arguments[0]),u.apply(this,arguments)):u.apply(this,arguments)};const m=Object.getOwnPropertyDescriptor(t.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(t.RTCPeerConnection.prototype,"localDescription",{get(){const h=m.get.apply(this);return""===h.type?h:s(this,h)}}),t.RTCPeerConnection.prototype.removeTrack=function(v){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!v._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(v._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let B;this._streams=this._streams||{},Object.keys(this._streams).forEach(K=>{this._streams[K].getTracks().find(he=>v.track===he)&&(B=this._streams[K])}),B&&(1===B.getTracks().length?this.removeStream(this._reverseStreams[B.id]):B.removeTrack(v.track),this.dispatchEvent(new Event("negotiationneeded")))}}function qt(t,e){!t.RTCPeerConnection&&t.webkitRTCPeerConnection&&(t.RTCPeerConnection=t.webkitRTCPeerConnection),t.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(r){const n=t.RTCPeerConnection.prototype[r],i={[r](){return arguments[0]=new("addIceCandidate"===r?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};t.RTCPeerConnection.prototype[r]=i[r]})}function Zn(t,e){Qe(t,"negotiationneeded",r=>{const n=r.target;if(!(e.version<72||n.getConfiguration&&"plan-b"===n.getConfiguration().sdpSemantics)||"stable"===n.signalingState)return r})}function zn(t,e){const r=t&&t.navigator,n=t&&t.MediaStreamTrack;if(r.getUserMedia=function(i,s,l){Yt("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),r.mediaDevices.getUserMedia(i).then(s,l)},!(e.version>55&&"autoGainControl"in r.mediaDevices.getSupportedConstraints())){const i=function(l,u,m){u in l&&!(m in l)&&(l[m]=l[u],delete l[u])},s=r.mediaDevices.getUserMedia.bind(r.mediaDevices);if(r.mediaDevices.getUserMedia=function(l){return"object"==typeof l&&"object"==typeof l.audio&&(l=JSON.parse(JSON.stringify(l)),i(l.audio,"autoGainControl","mozAutoGainControl"),i(l.audio,"noiseSuppression","mozNoiseSuppression")),s(l)},n&&n.prototype.getSettings){const l=n.prototype.getSettings;n.prototype.getSettings=function(){const u=l.apply(this,arguments);return i(u,"mozAutoGainControl","autoGainControl"),i(u,"mozNoiseSuppression","noiseSuppression"),u}}if(n&&n.prototype.applyConstraints){const l=n.prototype.applyConstraints;n.prototype.applyConstraints=function(u){return"audio"===this.kind&&"object"==typeof u&&(u=JSON.parse(JSON.stringify(u)),i(u,"autoGainControl","mozAutoGainControl"),i(u,"noiseSuppression","mozNoiseSuppression")),l.apply(this,[u])}}}}function qr(t,e){t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||t.navigator.mediaDevices&&(t.navigator.mediaDevices.getDisplayMedia=function(n){if(!n||!n.video){const i=new DOMException("getDisplayMedia without video constraints is undefined");return i.name="NotFoundError",i.code=8,Promise.reject(i)}return!0===n.video?n.video={mediaSource:e}:n.video.mediaSource=e,t.navigator.mediaDevices.getUserMedia(n)})}function Jn(t){"object"==typeof t&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Wt(t,e){if("object"!=typeof t||!t.RTCPeerConnection&&!t.mozRTCPeerConnection)return;!t.RTCPeerConnection&&t.mozRTCPeerConnection&&(t.RTCPeerConnection=t.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const s=t.RTCPeerConnection.prototype[i],l={[i](){return arguments[0]=new("addIceCandidate"===i?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),s.apply(this,arguments)}};t.RTCPeerConnection.prototype[i]=l[i]});const r={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},n=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[s,l,u]=arguments;return n.apply(this,[s||null]).then(m=>{if(e.version<53&&!l)try{m.forEach(h=>{h.type=r[h.type]||h.type})}catch(h){if("TypeError"!==h.name)throw h;m.forEach((v,P)=>{m.set(P,Object.assign({},v,{type:r[v.type]||v.type}))})}return m}).then(l,u)}}function Yn(t){if("object"!=typeof t||!t.RTCPeerConnection||!t.RTCRtpSender||t.RTCRtpSender&&"getStats"in t.RTCRtpSender.prototype)return;const e=t.RTCPeerConnection.prototype.getSenders;e&&(t.RTCPeerConnection.prototype.getSenders=function(){const i=e.apply(this,[]);return i.forEach(s=>s._pc=this),i});const r=t.RTCPeerConnection.prototype.addTrack;r&&(t.RTCPeerConnection.prototype.addTrack=function(){const i=r.apply(this,arguments);return i._pc=this,i}),t.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function Kn(t){if("object"!=typeof t||!t.RTCPeerConnection||!t.RTCRtpSender||t.RTCRtpSender&&"getStats"in t.RTCRtpReceiver.prototype)return;const e=t.RTCPeerConnection.prototype.getReceivers;e&&(t.RTCPeerConnection.prototype.getReceivers=function(){const n=e.apply(this,[]);return n.forEach(i=>i._pc=this),n}),Qe(t,"track",r=>(r.receiver._pc=r.srcElement,r)),t.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function qn(t){!t.RTCPeerConnection||"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(r){Yt("removeStream","removeTrack"),this.getSenders().forEach(n=>{n.track&&r.getTracks().includes(n.track)&&this.removeTrack(n)})})}function Wn(t){t.DataChannel&&!t.RTCDataChannel&&(t.RTCDataChannel=t.DataChannel)}function Xn(t){if("object"!=typeof t||!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype.addTransceiver;e&&(t.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let n=arguments[1]&&arguments[1].sendEncodings;void 0===n&&(n=[]),n=[...n];const i=n.length>0;i&&n.forEach(l=>{if("rid"in l&&!/^[a-z0-9]{0,16}$/i.test(l.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in l&&!(parseFloat(l.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in l&&!(parseFloat(l.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const s=e.apply(this,arguments);if(i){const{sender:l}=s,u=l.getParameters();(!("encodings"in u)||1===u.encodings.length&&0===Object.keys(u.encodings[0]).length)&&(u.encodings=n,l.sendEncodings=n,this.setParametersPromises.push(l.setParameters(u).then(()=>{delete l.sendEncodings}).catch(()=>{delete l.sendEncodings})))}return s})}function Qn(t){if("object"!=typeof t||!t.RTCRtpSender)return;const e=t.RTCRtpSender.prototype.getParameters;e&&(t.RTCRtpSender.prototype.getParameters=function(){const n=e.apply(this,arguments);return"encodings"in n||(n.encodings=[].concat(this.sendEncodings||[{}])),n})}function er(t){if("object"!=typeof t||!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function tr(t){if("object"!=typeof t||!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype.createAnswer;t.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function nr(t){if("object"==typeof t&&t.RTCPeerConnection){if("getLocalStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in t.RTCPeerConnection.prototype)){const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addStream=function(n){this._localStreams||(this._localStreams=[]),this._localStreams.includes(n)||this._localStreams.push(n),n.getAudioTracks().forEach(i=>e.call(this,i,n)),n.getVideoTracks().forEach(i=>e.call(this,i,n))},t.RTCPeerConnection.prototype.addTrack=function(n,...i){return i&&i.forEach(s=>{this._localStreams?this._localStreams.includes(s)||this._localStreams.push(s):this._localStreams=[s]}),e.apply(this,arguments)}}"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(r){this._localStreams||(this._localStreams=[]);const n=this._localStreams.indexOf(r);if(-1===n)return;this._localStreams.splice(n,1);const i=r.getTracks();this.getSenders().forEach(s=>{i.includes(s.track)&&this.removeTrack(s)})})}}function rr(t){if("object"==typeof t&&t.RTCPeerConnection&&("getRemoteStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in t.RTCPeerConnection.prototype))){Object.defineProperty(t.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(r){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=r),this.addEventListener("track",this._onaddstreampoly=n=>{n.streams.forEach(i=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(i))return;this._remoteStreams.push(i);const s=new Event("addstream");s.stream=i,this.dispatchEvent(s)})})}});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){const n=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(s=>{if(n._remoteStreams||(n._remoteStreams=[]),n._remoteStreams.indexOf(s)>=0)return;n._remoteStreams.push(s);const l=new Event("addstream");l.stream=s,n.dispatchEvent(l)})}),e.apply(n,arguments)}}}function ir(t){if("object"!=typeof t||!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype,r=e.createOffer,n=e.createAnswer,i=e.setLocalDescription,s=e.setRemoteDescription,l=e.addIceCandidate;e.createOffer=function(h,v){const B=r.apply(this,[arguments.length>=2?arguments[2]:arguments[0]]);return v?(B.then(h,v),Promise.resolve()):B},e.createAnswer=function(h,v){const B=n.apply(this,[arguments.length>=2?arguments[2]:arguments[0]]);return v?(B.then(h,v),Promise.resolve()):B};let u=function(m,h,v){const P=i.apply(this,[m]);return v?(P.then(h,v),Promise.resolve()):P};e.setLocalDescription=u,u=function(m,h,v){const P=s.apply(this,[m]);return v?(P.then(h,v),Promise.resolve()):P},e.setRemoteDescription=u,u=function(m,h,v){const P=l.apply(this,[m]);return v?(P.then(h,v),Promise.resolve()):P},e.addIceCandidate=u}function or(t){const e=t&&t.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const r=e.mediaDevices,n=r.getUserMedia.bind(r);e.mediaDevices.getUserMedia=i=>n(sr(i))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=function(n,i,s){e.mediaDevices.getUserMedia(n).then(i,s)}.bind(e))}function sr(t){return t&&void 0!==t.video?Object.assign({},t,{video:Dn(t.video)}):t}function ar(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection;t.RTCPeerConnection=function(n,i){if(n&&n.iceServers){const s=[];for(let l=0;l<n.iceServers.length;l++){let u=n.iceServers[l];void 0===u.urls&&u.url?(Yt("RTCIceServer.url","RTCIceServer.urls"),u=JSON.parse(JSON.stringify(u)),u.urls=u.url,delete u.url,s.push(u)):s.push(n.iceServers[l])}n.iceServers=s}return new e(n,i)},t.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get:()=>e.generateCertificate})}function cr(t){"object"==typeof t&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function lr(t){const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(n){if(n){typeof n.offerToReceiveAudio<"u"&&(n.offerToReceiveAudio=!!n.offerToReceiveAudio);const i=this.getTransceivers().find(l=>"audio"===l.receiver.track.kind);!1===n.offerToReceiveAudio&&i?"sendrecv"===i.direction?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":"recvonly"===i.direction&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):!0===n.offerToReceiveAudio&&!i&&this.addTransceiver("audio",{direction:"recvonly"}),typeof n.offerToReceiveVideo<"u"&&(n.offerToReceiveVideo=!!n.offerToReceiveVideo);const s=this.getTransceivers().find(l=>"video"===l.receiver.track.kind);!1===n.offerToReceiveVideo&&s?"sendrecv"===s.direction?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":"recvonly"===s.direction&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):!0===n.offerToReceiveVideo&&!s&&this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function fr(t){"object"!=typeof t||t.AudioContext||(t.AudioContext=t.webkitAudioContext)}var ur=p(2917),mt=p.n(ur);function Mt(t){if(!t.RTCIceCandidate||t.RTCIceCandidate&&"foundation"in t.RTCIceCandidate.prototype)return;const e=t.RTCIceCandidate;t.RTCIceCandidate=function(n){if("object"==typeof n&&n.candidate&&0===n.candidate.indexOf("a=")&&((n=JSON.parse(JSON.stringify(n))).candidate=n.candidate.substring(2)),n.candidate&&n.candidate.length){const i=new e(n),s=mt().parseCandidate(n.candidate);for(const l in s)l in i||Object.defineProperty(i,l,{value:s[l]});return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new e(n)},t.RTCIceCandidate.prototype=e.prototype,Qe(t,"icecandidate",r=>(r.candidate&&Object.defineProperty(r,"candidate",{value:new t.RTCIceCandidate(r.candidate),writable:"false"}),r))}function Xt(t){!t.RTCIceCandidate||t.RTCIceCandidate&&"relayProtocol"in t.RTCIceCandidate.prototype||Qe(t,"icecandidate",e=>{if(e.candidate){const r=mt().parseCandidate(e.candidate.candidate);"relay"===r.type&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[r.priority>>24])}return e})}function wt(t,e){if(!t.RTCPeerConnection)return;"sctp"in t.RTCPeerConnection.prototype||Object.defineProperty(t.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const l=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===e.browser&&e.version>=76){const{sdpSemantics:m}=this.getConfiguration();"plan-b"===m&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(function(u){if(!u||!u.sdp)return!1;const m=mt().splitSections(u.sdp);return m.shift(),m.some(h=>{const v=mt().parseMLine(h);return v&&"application"===v.kind&&-1!==v.protocol.indexOf("SCTP")})}(arguments[0])){const m=function(u){const m=u.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===m||m.length<2)return-1;const h=parseInt(m[1],10);return h!=h?-1:h}(arguments[0]),h=function(u){let m=65536;return"firefox"===e.browser&&(m=e.version<57?-1===u?16384:2147483637:e.version<60?57===e.version?65535:65536:2147483637),m}(m),v=function(u,m){let h=65536;"firefox"===e.browser&&57===e.version&&(h=65535);const v=mt().matchPrefix(u.sdp,"a=max-message-size:");return v.length>0?h=parseInt(v[0].substring(19),10):"firefox"===e.browser&&-1!==m&&(h=2147483637),h}(arguments[0],m);let P;P=0===h&&0===v?Number.POSITIVE_INFINITY:0===h||0===v?Math.max(h,v):Math.min(h,v);const B={};Object.defineProperty(B,"maxMessageSize",{get:()=>P}),this._sctp=B}return l.apply(this,arguments)}}function Rt(t){if(!t.RTCPeerConnection||!("createDataChannel"in t.RTCPeerConnection.prototype))return;function e(n,i){const s=n.send;n.send=function(){const u=arguments[0];if("open"===n.readyState&&i.sctp&&(u.length||u.size||u.byteLength)>i.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+i.sctp.maxMessageSize+" bytes)");return s.apply(n,arguments)}}const r=t.RTCPeerConnection.prototype.createDataChannel;t.RTCPeerConnection.prototype.createDataChannel=function(){const i=r.apply(this,arguments);return e(i,this),i},Qe(t,"datachannel",n=>(e(n.channel,n.target),n))}function Qt(t){if(!t.RTCPeerConnection||"connectionState"in t.RTCPeerConnection.prototype)return;const e=t.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(r){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),r&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=r)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(r=>{const n=e[r];e[r]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=i=>{const s=i.target;if(s._lastConnectionState!==s.connectionState){s._lastConnectionState=s.connectionState;const l=new Event("connectionstatechange",i);s.dispatchEvent(l)}return i},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}})}function en(t,e){if(!t.RTCPeerConnection||"chrome"===e.browser&&e.version>=71||"safari"===e.browser&&e.version>=605)return;const r=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(i){if(i&&i.sdp&&-1!==i.sdp.indexOf("\na=extmap-allow-mixed")){const s=i.sdp.split("\n").filter(l=>"a=extmap-allow-mixed"!==l.trim()).join("\n");t.RTCSessionDescription&&i instanceof t.RTCSessionDescription?arguments[0]=new t.RTCSessionDescription({type:i.type,sdp:s}):i.sdp=s}return r.apply(this,arguments)}}function Ot(t,e){if(!t.RTCPeerConnection||!t.RTCPeerConnection.prototype)return;const r=t.RTCPeerConnection.prototype.addIceCandidate;!r||0===r.length||(t.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===e.browser&&e.version<78||"firefox"===e.browser&&e.version<68||"safari"===e.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():r.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function It(t,e){if(!t.RTCPeerConnection||!t.RTCPeerConnection.prototype)return;const r=t.RTCPeerConnection.prototype.setLocalDescription;!r||0===r.length||(t.RTCPeerConnection.prototype.setLocalDescription=function(){let i=arguments[0]||{};if("object"!=typeof i||i.type&&i.sdp)return r.apply(this,arguments);if(i={type:i.type,sdp:i.sdp},!i.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":i.type="offer";break;default:i.type="answer"}return i.sdp||"offer"!==i.type&&"answer"!==i.type?r.apply(this,[i]):("offer"===i.type?this.createOffer:this.createAnswer).apply(this).then(l=>r.apply(this,[l]))})}const dr=function Wr({window:t}={},e={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const r=In,n=function Yr(t){const e={browser:null,version:null};if(typeof t>"u"||!t.navigator||!t.navigator.userAgent)return e.browser="Not a browser.",e;const{navigator:r}=t;if(r.mozGetUserMedia)e.browser="firefox",e.version=Pt(r.userAgent,/Firefox\/(\d+)\./,1);else if(r.webkitGetUserMedia||!1===t.isSecureContext&&t.webkitRTCPeerConnection)e.browser="chrome",e.version=Pt(r.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!t.RTCPeerConnection||!r.userAgent.match(/AppleWebKit\/(\d+)\./))return e.browser="Not a supported browser.",e;e.browser="safari",e.version=Pt(r.userAgent,/AppleWebKit\/(\d+)\./,1),e.supportsUnifiedPlan=t.RTCRtpTransceiver&&"currentDirection"in t.RTCRtpTransceiver.prototype}return e}(t),i={browserDetails:n,commonShim:b,extractVersion:Pt,disableLog:zr,disableWarnings:Jr,sdp:ur};switch(n.browser){case"chrome":if(!g||!qt||!e.shimChrome)return r("Chrome shim is not included in this adapter release."),i;if(null===n.version)return r("Chrome shim can not determine version, not shimming."),i;r("adapter.js shimming chrome."),i.browserShim=g,Ot(t,n),It(t),Bn(t,n),Un(t),qt(t,n),Fn(t),Gn(t,n),jn(t),Nn(t),Hn(t),Zn(t,n),Mt(t),Xt(t),Qt(t),wt(t,n),Rt(t),en(t,n);break;case"firefox":if(!A||!Wt||!e.shimFirefox)return r("Firefox shim is not included in this adapter release."),i;r("adapter.js shimming firefox."),i.browserShim=A,Ot(t,n),It(t),zn(t,n),Wt(t,n),Jn(t),qn(t),Yn(t),Kn(t),Wn(t),Xn(t),Qn(t),er(t),tr(t),Mt(t),Qt(t),wt(t,n),Rt(t);break;case"safari":if(!f||!e.shimSafari)return r("Safari shim is not included in this adapter release."),i;r("adapter.js shimming safari."),i.browserShim=f,Ot(t,n),It(t),ar(t),lr(t),ir(t),nr(t),rr(t),cr(t),or(t),fr(t),Mt(t),Xt(t),wt(t,n),Rt(t),en(t,n);break;default:r("Unsupported browser!")}return i}({window:typeof window>"u"?void 0:window});function Et(t){return new Ge(t,0)}function Xr(t){var e={},r=!1;function n(i,s){return r=!0,{done:!1,value:new Ge(s=new Promise(function(l){l(t[i](s))}),1)}}return e[typeof Symbol<"u"&&Symbol.iterator||"@@iterator"]=function(){return this},e.next=function(i){return r?(r=!1,i):n("next",i)},"function"==typeof t.throw&&(e.throw=function(i){if(r)throw r=!1,i;return n("throw",i)}),"function"==typeof t.return&&(e.return=function(i){return r?(r=!1,i):n("return",i)}),e}function pr(t){var e,r,n,i=2;for(typeof Symbol<"u"&&(r=Symbol.asyncIterator,n=Symbol.iterator);i--;){if(r&&null!=(e=t[r]))return e.call(t);if(n&&null!=(e=t[n]))return new Dt(e.call(t));r="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function Dt(t){function e(r){if(Object(r)!==r)return Promise.reject(new TypeError(r+" is not an object."));var n=r.done;return Promise.resolve(r.value).then(function(i){return{value:i,done:n}})}return(Dt=function(n){this.s=n,this.n=n.next}).prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(n){var i=this.s.return;return void 0===i?Promise.resolve({value:n,done:!0}):e(i.apply(this.s,arguments))},throw:function(n){var i=this.s.return;return void 0===i?Promise.reject(n):e(i.apply(this.s,arguments))}},new Dt(t)}let tn;try{tn=new TextDecoder}catch{}let F,Ze,T=0;const nn=[],ei=57342,ti=57343,hr=57337,ct={};let ge,lt,ve,Be,Ie,ke,gt,et=nn,_t=0,oe={},tt=0,ze=0,_e=[],rn=[],_r={useRecords:!1,mapsAsObjects:!0},yt=!1,gr=2;try{new Function("")}catch{gr=1/0}class bt{constructor(e){if(e&&((e.keyMap||e._keyMap)&&!e.useRecords&&(e.useRecords=!1,e.mapsAsObjects=!0),!1===e.useRecords&&void 0===e.mapsAsObjects&&(e.mapsAsObjects=!0),e.getStructures&&(e.getShared=e.getStructures),e.getShared&&!e.structures&&((e.structures=[]).uninitialized=!0),e.keyMap)){this.mapKey=new Map;for(let[r,n]of Object.entries(e.keyMap))this.mapKey.set(n,r)}Object.assign(this,e)}decodeKey(e){return this.keyMap&&this.mapKey.get(e)||e}encodeKey(e){return this.keyMap&&this.keyMap.hasOwnProperty(e)?this.keyMap[e]:e}encodeKeys(e){if(!this._keyMap)return e;let r=new Map;for(let[n,i]of Object.entries(e))r.set(this._keyMap.hasOwnProperty(n)?this._keyMap[n]:n,i);return r}decodeKeys(e){if(!this._keyMap||"Map"!=e.constructor.name)return e;if(!this._mapKey){this._mapKey=new Map;for(let[n,i]of Object.entries(this._keyMap))this._mapKey.set(i,n)}let r={};return e.forEach((n,i)=>r[Le(this._mapKey.has(i)?this._mapKey.get(i):i)]=n),r}mapDecode(e,r){let n=this.decode(e);return this._keyMap&&"Array"===n.constructor.name?n.map(i=>this.decodeKeys(i)):n}decode(e,r){if(F)return kr(()=>(fn(),this?this.decode(e,r):bt.prototype.decode.call(_r,e,r)));Ze=r>-1?r:e.length,T=0,_t=0,ze=0,lt=null,et=nn,ve=null,F=e;try{ke=e.dataView||(e.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength))}catch(n){throw F=null,e instanceof Uint8Array?n:new Error("Source must be a Uint8Array or Buffer but was a "+(e&&"object"==typeof e?e.constructor.name:typeof e))}if(this instanceof bt){if(oe=this,Ie=this.sharedValues&&(this.pack?new Array(this.maxPrivatePackedValues||16).concat(this.sharedValues):this.sharedValues),this.structures)return ge=this.structures,$t();(!ge||ge.length>0)&&(ge=[])}else oe=_r,(!ge||ge.length>0)&&(ge=[]),Ie=null;return $t()}decodeMultiple(e,r){let n,i=0;try{let s=e.length;yt=!0;let l=this?this.decode(e,s):un.decode(e,s);if(!r){for(n=[l];T<s;)i=T,n.push($t());return n}if(!1===r(l))return;for(;T<s;)if(i=T,!1===r($t()))return}catch(s){throw s.lastPosition=i,s.values=n,s}finally{yt=!1,fn()}}}function $t(){try{let t=re();if(ve){if(T>=ve.postBundlePosition){let e=new Error("Unexpected bundle position");throw e.incomplete=!0,e}T=ve.postBundlePosition,ve=null}if(T==Ze)ge=null,F=null,Be&&(Be=null);else{if(T>Ze){let e=new Error("Unexpected end of CBOR data");throw e.incomplete=!0,e}if(!yt)throw new Error("Data read, but end of buffer not reached")}return t}catch(t){throw fn(),(t instanceof RangeError||t.message.startsWith("Unexpected end of buffer"))&&(t.incomplete=!0),t}}function re(){let t=F[T++],e=t>>5;if(t&=31,t>23)switch(t){case 24:t=F[T++];break;case 25:if(7==e)return function ai(){let t=F[T++],e=F[T++],r=(127&t)>>2;if(31===r)return e||3&t?NaN:128&t?-1/0:1/0;if(0===r){let n=((3&t)<<8|e)/16777216;return 128&t?-n:n}return ft[3]=128&t|56+(r>>1),ft[2]=(7&t)<<5|e>>3,ft[1]=e<<5,ft[0]=0,an[0]}();t=ke.getUint16(T),T+=2;break;case 26:if(7==e){let r=ke.getFloat32(T);if(oe.useFloat32>2){let n=Ut[(127&F[T])<<1|F[T+1]>>7];return T+=4,(n*r+(r>0?.5:-.5)>>0)/n}return T+=4,r}t=ke.getUint32(T),T+=4;break;case 27:if(7==e){let r=ke.getFloat64(T);return T+=8,r}if(e>1){if(ke.getUint32(T)>0)throw new Error("JavaScript does not support arrays, maps, or strings with length over 4294967295");t=ke.getUint32(T+4)}else oe.int64AsNumber?(t=4294967296*ke.getUint32(T),t+=ke.getUint32(T+4)):t=ke.getBigUint64(T);T+=8;break;case 31:switch(e){case 2:case 3:throw new Error("Indefinite length not supported for byte or text strings");case 4:let n,r=[],i=0;for(;(n=re())!=ct;)r[i++]=n;return 4==e?r:3==e?r.join(""):Buffer.concat(r);case 5:let s;if(oe.mapsAsObjects){let l={};if(oe.keyMap)for(;(s=re())!=ct;)l[Le(oe.decodeKey(s))]=re();else for(;(s=re())!=ct;)l[Le(s)]=re();return l}{gt&&(oe.mapsAsObjects=!0,gt=!1);let l=new Map;if(oe.keyMap)for(;(s=re())!=ct;)l.set(oe.decodeKey(s),re());else for(;(s=re())!=ct;)l.set(s,re());return l}case 7:return ct;default:throw new Error("Invalid major type for indefinite length "+e)}default:throw new Error("Unknown token "+t)}switch(e){case 0:return t;case 1:return~t;case 2:return function si(t){return oe.copyBuffers?Uint8Array.prototype.slice.call(F,T,T+=t):F.subarray(T,T+=t)}(t);case 3:if(ze>=T)return lt.slice(T-tt,(T+=t)-tt);if(0==ze&&Ze<140&&t<32){let i=t<16?sn(t):function br(t){let e=T,r=new Array(t);for(let n=0;n<t;n++){const i=F[T++];if((128&i)>0)return void(T=e);r[n]=i}return Se.apply(String,r)}(t);if(null!=i)return i}return Lt(t);case 4:let r=new Array(t);for(let i=0;i<t;i++)r[i]=re();return r;case 5:if(oe.mapsAsObjects){let i={};if(oe.keyMap)for(let s=0;s<t;s++)i[Le(oe.decodeKey(re()))]=re();else for(let s=0;s<t;s++)i[Le(re())]=re();return i}{gt&&(oe.mapsAsObjects=!0,gt=!1);let i=new Map;if(oe.keyMap)for(let s=0;s<t;s++)i.set(oe.decodeKey(re()),re());else for(let s=0;s<t;s++)i.set(re(),re());return i}case 6:if(t>=hr){let i=ge[8191&t];if(i)return i.read||(i.read=on(i)),i.read();if(t<65536){if(t==ti){let s=dt(),l=re(),u=re();cn(l,u);let m={};if(oe.keyMap)for(let h=2;h<s;h++)m[Le(oe.decodeKey(u[h-2]))]=re();else for(let h=2;h<s;h++)m[Le(u[h-2])]=re();return m}if(t==ei){let s=dt(),l=re();for(let u=2;u<s;u++)cn(l++,re());return re()}if(t==hr)return function pi(){let t=dt(),e=T+re();for(let n=2;n<t;n++){let i=dt();T+=i}let r=T;return T=e,ve=[Bt(dt()),Bt(dt())],ve.position0=0,ve.position1=0,ve.postBundlePosition=T,T=r,re()}();if(oe.getShared&&(ln(),i=ge[8191&t],i))return i.read||(i.read=on(i)),i.read()}}let n=_e[t];if(n)return n(n.handlesRead?re:re());{let i=re();for(let s=0;s<rn.length;s++){let l=rn[s](t,i);if(void 0!==l)return l}return new nt(i,t)}case 7:switch(t){case 20:return!1;case 21:return!0;case 22:return null;case 23:return;default:let i=(Ie||rt())[t];if(void 0!==i)return i;throw new Error("Unknown token "+t)}default:if(isNaN(t)){let i=new Error("Unexpected end of CBOR data");throw i.incomplete=!0,i}throw new Error("Unknown CBOR token "+t)}}const yr=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function on(t){return t.slowReads=0,function e(){let r=F[T++];if(r&=31,r>23)switch(r){case 24:r=F[T++];break;case 25:r=ke.getUint16(T),T+=2;break;case 26:r=ke.getUint32(T),T+=4;break;default:throw new Error("Expected array header, but got "+F[T-1])}let n=this.compiledReader;for(;n;){if(n.propertyCount===r)return n(re);n=n.next}if(this.slowReads++>=gr){let s=this.length==r?this:this.slice(0,r);return n=new Function("r",oe.keyMap?"return {"+s.map(l=>oe.decodeKey(l)).map(l=>yr.test(l)?Le(l)+":r()":"["+JSON.stringify(l)+"]:r()").join(",")+"}":"return {"+s.map(l=>yr.test(l)?Le(l)+":r()":"["+JSON.stringify(l)+"]:r()").join(",")+"}"),this.compiledReader&&(n.next=this.compiledReader),n.propertyCount=r,this.compiledReader=n,n(re)}let i={};if(oe.keyMap)for(let s=0;s<r;s++)i[Le(oe.decodeKey(this[s]))]=re();else for(let s=0;s<r;s++)i[Le(this[s])]=re();return i}}function Le(t){return"__proto__"===t?"__proto_":t}let Lt=Bt;function Bt(t){let e;if(t<16&&(e=sn(t)))return e;if(t>64&&tn)return tn.decode(F.subarray(T,T+=t));const r=T+t,n=[];for(e="";T<r;){const i=F[T++];if(128&i)if(192==(224&i)){const s=63&F[T++];n.push((31&i)<<6|s)}else if(224==(240&i)){const s=63&F[T++],l=63&F[T++];n.push((31&i)<<12|s<<6|l)}else if(240==(248&i)){let m=(7&i)<<18|(63&F[T++])<<12|(63&F[T++])<<6|63&F[T++];m>65535&&(m-=65536,n.push(m>>>10&1023|55296),m=56320|1023&m),n.push(m)}else n.push(i);else n.push(i);n.length>=4096&&(e+=Se.apply(String,n),n.length=0)}return n.length>0&&(e+=Se.apply(String,n)),e}let Se=String.fromCharCode;function sn(t){if(t<4){if(t<2){if(0===t)return"";{let e=F[T++];return(128&e)>1?void(T-=1):Se(e)}}{let e=F[T++],r=F[T++];if((128&e)>0||(128&r)>0)return void(T-=2);if(t<3)return Se(e,r);let n=F[T++];return(128&n)>0?void(T-=3):Se(e,r,n)}}{let e=F[T++],r=F[T++],n=F[T++],i=F[T++];if((128&e)>0||(128&r)>0||(128&n)>0||(128&i)>0)return void(T-=4);if(t<6){if(4===t)return Se(e,r,n,i);{let s=F[T++];return(128&s)>0?void(T-=5):Se(e,r,n,i,s)}}if(t<8){let s=F[T++],l=F[T++];if((128&s)>0||(128&l)>0)return void(T-=6);if(t<7)return Se(e,r,n,i,s,l);let u=F[T++];return(128&u)>0?void(T-=7):Se(e,r,n,i,s,l,u)}{let s=F[T++],l=F[T++],u=F[T++],m=F[T++];if((128&s)>0||(128&l)>0||(128&u)>0||(128&m)>0)return void(T-=8);if(t<10){if(8===t)return Se(e,r,n,i,s,l,u,m);{let h=F[T++];return(128&h)>0?void(T-=9):Se(e,r,n,i,s,l,u,m,h)}}if(t<12){let h=F[T++],v=F[T++];if((128&h)>0||(128&v)>0)return void(T-=10);if(t<11)return Se(e,r,n,i,s,l,u,m,h,v);let P=F[T++];return(128&P)>0?void(T-=11):Se(e,r,n,i,s,l,u,m,h,v,P)}{let h=F[T++],v=F[T++],P=F[T++],B=F[T++];if((128&h)>0||(128&v)>0||(128&P)>0||(128&B)>0)return void(T-=12);if(t<14){if(12===t)return Se(e,r,n,i,s,l,u,m,h,v,P,B);{let K=F[T++];return(128&K)>0?void(T-=13):Se(e,r,n,i,s,l,u,m,h,v,P,B,K)}}{let K=F[T++],le=F[T++];if((128&K)>0||(128&le)>0)return void(T-=14);if(t<15)return Se(e,r,n,i,s,l,u,m,h,v,P,B,K,le);let he=F[T++];return(128&he)>0?void(T-=15):Se(e,r,n,i,s,l,u,m,h,v,P,B,K,le,he)}}}}}let an=new Float32Array(1),ft=new Uint8Array(an.buffer,0,4);new Array(4096);class nt{constructor(e,r){this.value=e,this.tag=r}}_e[0]=t=>new Date(t),_e[1]=t=>new Date(Math.round(1e3*t)),_e[2]=t=>{let e=BigInt(0);for(let r=0,n=t.byteLength;r<n;r++)e=BigInt(t[r])+e<<BigInt(8);return e},_e[3]=t=>BigInt(-1)-_e[2](t),_e[4]=t=>+(t[1]+"e"+t[0]),_e[5]=t=>t[1]*Math.exp(t[0]*Math.log(2));const cn=(t,e)=>{let r=ge[t-=57344];r&&r.isShared&&((ge.restoreStructures||(ge.restoreStructures=[]))[t]=r),ge[t]=e,e.read=on(e)};_e[105]=t=>{let e=t.length,r=t[1];cn(t[0],r);let n={};for(let i=2;i<e;i++)n[Le(r[i-2])]=t[i];return n},_e[14]=t=>ve?ve[0].slice(ve.position0,ve.position0+=t):new nt(t,14),_e[15]=t=>ve?ve[1].slice(ve.position1,ve.position1+=t):new nt(t,15);let ci={Error,RegExp};_e[27]=t=>(ci[t[0]]||Error)(t[1],t[2]);const Cr=t=>{if(132!=F[T++])throw new Error("Packed values structure must be followed by a 4 element array");let e=t();return Ie=Ie?e.concat(Ie.slice(e.length)):e,Ie.prefixes=t(),Ie.suffixes=t(),t()};function ut(t,e){return"string"==typeof t?t+e:t instanceof Array?t.concat(e):Object.assign({},t,e)}function rt(){if(!Ie){if(!oe.getShared)throw new Error("No packed values available");ln()}return Ie}Cr.handlesRead=!0,_e[51]=Cr,_e[6]=t=>{if(!Ie){if(!oe.getShared)return new nt(t,6);ln()}if("number"==typeof t)return Ie[16+(t>=0?2*t:-2*t-1)];throw new Error("No support for non-integer packed references yet")},_e[28]=t=>{Be||(Be=new Map,Be.id=0);let n,e=Be.id++;n=F[T]>>5==4?[]:{};let i={target:n};Be.set(e,i);let s=t();return i.used?Object.assign(n,s):(i.target=s,s)},_e[28].handlesRead=!0,_e[29]=t=>{let e=Be.get(t);return e.used=!0,e.target},_e[258]=t=>new Set(t),(_e[259]=t=>(oe.mapsAsObjects&&(oe.mapsAsObjects=!1,gt=!0),t())).handlesRead=!0,rn.push((t,e)=>t>=225&&t<=255?ut(rt().prefixes[t-224],e):t>=28704&&t<=32767?ut(rt().prefixes[t-28672],e):t>=1879052288&&t<=2147483647?ut(rt().prefixes[t-1879048192],e):t>=216&&t<=223?ut(e,rt().suffixes[t-216]):t>=27647&&t<=28671?ut(e,rt().suffixes[t-27639]):t>=1811940352&&t<=1879048191?ut(e,rt().suffixes[t-1811939328]):1399353956==t?{packedValues:Ie,structures:ge.slice(0),version:e}:55799==t?e:void 0);const fi=1==new Uint8Array(new Uint16Array([1]).buffer)[0],xr=[Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,typeof BigUint64Array>"u"?{name:"BigUint64Array"}:BigUint64Array,Int8Array,Int16Array,Int32Array,typeof BigInt64Array>"u"?{name:"BigInt64Array"}:BigInt64Array,Float32Array,Float64Array],ui=[64,68,69,70,71,72,77,78,79,85,86];for(let t=0;t<xr.length;t++)di(xr[t],ui[t]);function di(t,e){let n,r="get"+t.name.slice(0,-5);"function"==typeof t?n=t.BYTES_PER_ELEMENT:t=null;for(let i=0;i<2;i++){if(!i&&1==n)continue;let s=2==n?1:4==n?2:3;_e[i?e:e-4]=1==n||i==fi?l=>{if(!t)throw new Error("Could not find typed array for code "+e);return new t(Uint8Array.prototype.slice.call(l,0).buffer)}:l=>{if(!t)throw new Error("Could not find typed array for code "+e);let u=new DataView(l.buffer,l.byteOffset,l.byteLength),m=l.length>>s,h=new t(m),v=u[r];for(let P=0;P<m;P++)h[P]=v.call(u,P<<s,i);return h}}}function dt(){let t=31&F[T++];if(t>23)switch(t){case 24:t=F[T++];break;case 25:t=ke.getUint16(T),T+=2;break;case 26:t=ke.getUint32(T),T+=4}return t}function ln(){if(oe.getShared){let t=kr(()=>(F=null,oe.getShared()))||{},e=t.structures||[];oe.sharedVersion=t.version,Ie=oe.sharedValues=t.packedValues,!0===ge?oe.structures=ge=e:ge.splice.apply(ge,[0,e.length].concat(e))}}function kr(t){let e=Ze,r=T,n=_t,i=tt,s=ze,l=lt,u=et,m=Be,h=ve,v=new Uint8Array(F.slice(0,Ze)),P=ge,B=oe,K=yt,le=t();return Ze=e,T=r,_t=n,tt=i,ze=s,lt=l,et=u,Be=m,ve=h,F=v,yt=K,ge=P,oe=B,ke=new DataView(F.buffer,F.byteOffset,F.byteLength),le}function fn(){F=null,Be=null,ge=null}const Ut=new Array(147);for(let t=0;t<256;t++)Ut[t]=+("1e"+Math.floor(45.15-.30103*t));let Ft,jt,dn,un=new bt({useRecords:!1});try{Ft=new TextEncoder}catch{}const Nt="object"==typeof globalThis&&globalThis.Buffer,vt=typeof Nt<"u",pn=vt?Nt.allocUnsafeSlow:Uint8Array,Sr=vt?Nt:Uint8Array,Ar=vt?4294967296:2144337920;let hn,C,pe,qe,_=0,Ce=null;const _i=/[\u0080-\uFFFF]/,$e=Symbol("record-id");function Pr(t,e){t<24?C[_++]=e|t:t<256?(C[_++]=24|e,C[_++]=t):t<65536?(C[_++]=25|e,C[_++]=t>>8,C[_++]=255&t):(C[_++]=26|e,pe.setUint32(_,t),_+=4)}class Mr{constructor(e,r,n){this.structures=e,this.packedValues=r,this.version=n}}function Ne(t){t<24?C[_++]=128|t:t<256?(C[_++]=152,C[_++]=t):t<65536?(C[_++]=153,C[_++]=t>>8,C[_++]=255&t):(C[_++]=154,pe.setUint32(_,t),_+=4)}const yi=typeof Blob>"u"?function(){}:Blob;function mn(t){if(t instanceof yi)return!0;let e=t[Symbol.toStringTag];return"Blob"===e||"File"===e}function Ht(t,e){switch(typeof t){case"string":if(t.length>3){if(e.objectMap[t]>-1||e.values.length>=e.maxValues)return;let n=e.get(t);if(n)2==++n.count&&e.values.push(t);else if(e.set(t,{count:1}),e.samplingPackedValues){let i=e.samplingPackedValues.get(t);i?i.count++:e.samplingPackedValues.set(t,{count:1})}}break;case"object":if(t)if(t instanceof Array)for(let n=0,i=t.length;n<i;n++)Ht(t[n],e);else{let n=!e.encoder.useRecords;for(var r in t)t.hasOwnProperty(r)&&(n&&Ht(r,e),Ht(t[r],e))}break;case"function":console.log(t)}}const bi=1==new Uint8Array(new Uint16Array([1]).buffer)[0];function He(t,e){return!bi&&e>1&&(t-=4),{tag:t,encode:function(n,i){let s=n.byteLength,l=n.byteOffset||0,u=n.buffer||n;i(vt?Nt.from(u,l,s):new Uint8Array(u,l,s))}}}function wr(t,e){let r=t.byteLength;r<24?C[_++]=64+r:r<256?(C[_++]=88,C[_++]=r):r<65536?(C[_++]=89,C[_++]=r>>8,C[_++]=255&r):(C[_++]=90,pe.setUint32(_,r),_+=4),_+r>=C.length&&e(_+r),C.set(t.buffer?t:new Uint8Array(t),_),_+=r}function Rr(t,e){pe.setUint32(Ce.position+t,_-Ce.position-t+1);let r=Ce;Ce=null,e(r[0]),e(r[1])}dn=[Date,Set,Error,RegExp,nt,ArrayBuffer,Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,typeof BigUint64Array>"u"?function(){}:BigUint64Array,Int8Array,Int16Array,Int32Array,typeof BigInt64Array>"u"?function(){}:BigInt64Array,Float32Array,Float64Array,Mr],jt=[{tag:1,encode(t,e){let r=t.getTime()/1e3;(this.useTimestamp32||0===t.getMilliseconds())&&r>=0&&r<4294967296?(C[_++]=26,pe.setUint32(_,r),_+=4):(C[_++]=251,pe.setFloat64(_,r),_+=8)}},{tag:258,encode(t,e){e(Array.from(t))}},{tag:27,encode(t,e){e([t.name,t.message])}},{tag:27,encode(t,e){e(["RegExp",t.source,t.flags])}},{getTag:t=>t.tag,encode(t,e){e(t.value)}},{encode(t,e,r){wr(t,r)}},{getTag(t){if(t.constructor===Uint8Array&&(this.tagUint8Array||vt&&!1!==this.tagUint8Array))return 64},encode(t,e,r){wr(t,r)}},He(68,1),He(69,2),He(70,4),He(71,8),He(72,1),He(77,2),He(78,4),He(79,8),He(85,4),He(86,8),{encode(t,e){let r=t.packedValues||[],n=t.structures||[];if(r.values.length>0){C[_++]=216,C[_++]=51,Ne(4);let i=r.values;e(i),Ne(0),Ne(0),packedObjectMap=Object.create(sharedPackedObjectMap||null);for(let s=0,l=i.length;s<l;s++)packedObjectMap[i[s]]=s}if(n){pe.setUint32(_,3655335424),_+=3;let i=n.slice(0);i.unshift(57344),i.push(new nt(t.version,1399353956)),e(i)}else e(new nt(t.version,1399353956))}}],new class gi extends bt{constructor(e){let n,i,s,l,u;super(e),this.offset=0;let m=Sr.prototype.utf8Write?function(k,N,I){return C.utf8Write(k,N,I)}:!(!Ft||!Ft.encodeInto)&&function(k,N){return Ft.encodeInto(k,C.subarray(N)).written},h=this,P=(e=e||{}).maxSharedStructures;if(null==P&&(P=e.structures||e.saveStructures?128:0),P>8190)throw new Error("Maximum maxSharedStructure is 8190");let B=e.sequential;B&&(P=0),this.structures||(this.structures=[]),this.saveStructures&&(this.saveShared=this.saveStructures);let K,le,Ue,he=e.sharedValues;if(he){Ue=Object.create(null);for(let k=0,N=he.length;k<N;k++)Ue[he[k]]=k}let Ke=[],Tn=0,Jt=0;this.mapEncode=function(k,N){return this._keyMap&&!this._mapped&&"Array"===k.constructor.name&&(k=k.map(I=>this.encodeKeys(I))),this.encode(k,N)},this.encode=function(k,N){if(C||(C=new pn(8192),pe=new DataView(C.buffer,0,8192),_=0),qe=C.length-10,qe-_<2048?(C=new pn(C.length),pe=new DataView(C.buffer,0,C.length),qe=C.length-10,_=0):N===Or&&(_=_+7&2147483640),n=_,h.useSelfDescribedHeader&&(pe.setUint32(_,3654940416),_+=3),u=h.structuredClone?new Map:null,h.bundleStrings&&"string"!=typeof k?(Ce=[],Ce.size=1/0):Ce=null,i=h.structures,i){if(i.uninitialized){let E=h.getShared()||{};h.structures=i=E.structures||[],h.sharedVersion=E.version;let O=h.sharedValues=E.packedValues;if(O){Ue={};for(let z=0,X=O.length;z<X;z++)Ue[O[z]]=z}}let I=i.length;if(I>P&&!B&&(I=P),!i.transitions){i.transitions=Object.create(null);for(let E=0;E<I;E++){let O=i[E];if(!O)continue;let z,X=i.transitions;for(let q=0,te=O.length;q<te;q++){void 0===X[$e]&&(X[$e]=E);let ee=O[q];z=X[ee],z||(z=X[ee]=Object.create(null)),X=z}X[$e]=1048576|E}}B||(i.nextId=I)}if(s&&(s=!1),l=i||[],le=Ue,e.pack){let I=new Map;if(I.values=[],I.encoder=h,I.maxValues=e.maxPrivatePackedValues||(Ue?16:1/0),I.objectMap=Ue||!1,I.samplingPackedValues=K,Ht(k,I),I.values.length>0){C[_++]=216,C[_++]=51,Ne(4);let E=I.values;ae(E),Ne(0),Ne(0),le=Object.create(Ue||null);for(let O=0,z=E.length;O<z;O++)le[E[O]]=O}}hn=N&gn;try{if(hn)return;if(ae(k),Ce&&Rr(n,ae),h.offset=_,u&&u.idsToInsert){_+=2*u.idsToInsert.length,_>qe&&St(_),h.offset=_;let I=function vi(t,e){let r,n=2*e.length,i=t.length-n;e.sort((s,l)=>s.offset>l.offset?1:-1);for(let s=0;s<e.length;s++){let l=e[s];l.id=s;for(let u of l.references)t[u++]=s>>8,t[u]=255&s}for(;r=e.pop();){let s=r.offset;t.copyWithin(s+n,s,i),n-=2;let l=s+n;t[l++]=216,t[l++]=28,i=s}return t}(C.subarray(n,_),u.idsToInsert);return u=null,I}return N&Or?(C.start=n,C.end=_,C):C.subarray(n,_)}finally{if(i)if(Jt<10&&Jt++,i.length>P&&(i.length=P),Tn>1e4)i.transitions=null,Jt=0,Tn=0,Ke.length>0&&(Ke=[]);else if(Ke.length>0&&!B){for(let I=0,E=Ke.length;I<E;I++)Ke[I][$e]=void 0;Ke=[]}if(s&&h.saveShared){h.structures.length>P&&(h.structures=h.structures.slice(0,P));let I=C.subarray(n,_);return!1===h.updateSharedData()?h.encode(k):I}N&Ci&&(_=n)}},this.findCommonStringsToPack=()=>(K=new Map,Ue||(Ue=Object.create(null)),k=>{let N=k&&k.threshold||4,I=this.pack?k.maxPrivatePackedValues||16:0;he||(he=this.sharedValues=[]);for(let[E,O]of K)O.count>N&&(Ue[E]=I++,he.push(E),s=!0);for(;this.saveShared&&!1===this.updateSharedData(););K=null});const ae=k=>{_>qe&&(C=St(_));var I,N=typeof k;if("string"===N){if(le){let X=le[k];if(X>=0)return void(X<16?C[_++]=X+224:(C[_++]=198,ae(1&X?15-X>>1:X-16>>1)));if(K&&!e.pack){let q=K.get(k);q?q.count++:K.set(k,{count:1})}}let O,E=k.length;if(Ce&&E>=4&&E<1024){if((Ce.size+=E)>61440){let q,te=(Ce[0]?3*Ce[0].length+Ce[1].length:0)+10;_+te>qe&&(C=St(_+te)),C[_++]=217,C[_++]=223,C[_++]=249,C[_++]=Ce.position?132:130,C[_++]=26,q=_-n,_+=4,Ce.position&&Rr(n,ae),Ce=["",""],Ce.size=0,Ce.position=q}let X=_i.test(k);return Ce[X?0:1]+=k,C[_++]=X?206:207,void ae(E)}O=E<32?1:E<256?2:E<65536?3:5;let z=3*E;if(_+z>qe&&(C=St(_+z)),E<64||!m){let X,q,te,ee=_+O;for(X=0;X<E;X++)q=k.charCodeAt(X),q<128?C[ee++]=q:q<2048?(C[ee++]=q>>6|192,C[ee++]=63&q|128):55296==(64512&q)&&56320==(64512&(te=k.charCodeAt(X+1)))?(q=65536+((1023&q)<<10)+(1023&te),X++,C[ee++]=q>>18|240,C[ee++]=q>>12&63|128,C[ee++]=q>>6&63|128,C[ee++]=63&q|128):(C[ee++]=q>>12|224,C[ee++]=q>>6&63|128,C[ee++]=63&q|128);I=ee-_-O}else I=m(k,_+O,z);I<24?C[_++]=96|I:I<256?(O<2&&C.copyWithin(_+2,_+1,_+1+I),C[_++]=120,C[_++]=I):I<65536?(O<3&&C.copyWithin(_+3,_+2,_+2+I),C[_++]=121,C[_++]=I>>8,C[_++]=255&I):(O<5&&C.copyWithin(_+5,_+3,_+3+I),C[_++]=122,pe.setUint32(_,I),_+=4),_+=I}else if("number"===N)if(this.alwaysUseFloat||k>>>0!==k)if(this.alwaysUseFloat||k>>0!==k){let E;if((E=this.useFloat32)>0&&k<4294967296&&k>=-2147483648){let O;if(C[_++]=250,pe.setFloat32(_,k),E<4||(O=k*Ut[(127&C[_])<<1|C[_+1]>>7])>>0===O)return void(_+=4);_--}C[_++]=251,pe.setFloat64(_,k),_+=8}else k>=-24?C[_++]=31-k:k>=-256?(C[_++]=56,C[_++]=~k):k>=-65536?(C[_++]=57,pe.setUint16(_,~k),_+=2):(C[_++]=58,pe.setUint32(_,~k),_+=4);else k<24?C[_++]=k:k<256?(C[_++]=24,C[_++]=k):k<65536?(C[_++]=25,C[_++]=k>>8,C[_++]=255&k):(C[_++]=26,pe.setUint32(_,k),_+=4);else if("object"===N)if(k){if(u){let O=u.get(k);if(O){if(C[_++]=216,C[_++]=29,C[_++]=25,!O.references){let z=u.idsToInsert||(u.idsToInsert=[]);O.references=[],z.push(O)}return O.references.push(_-n),void(_+=2)}u.set(k,{offset:_-n})}let E=k.constructor;if(E===Object)An(k,!0);else if(E===Array){(I=k.length)<24?C[_++]=128|I:Ne(I);for(let O=0;O<I;O++)ae(k[O])}else if(E===Map)if((this.mapsAsObjects?!1!==this.useTag259ForMaps:this.useTag259ForMaps)&&(C[_++]=217,C[_++]=1,C[_++]=3),(I=k.size)<24?C[_++]=160|I:I<256?(C[_++]=184,C[_++]=I):I<65536?(C[_++]=185,C[_++]=I>>8,C[_++]=255&I):(C[_++]=186,pe.setUint32(_,I),_+=4),h.keyMap)for(let[O,z]of k)ae(h.encodeKey(O)),ae(z);else for(let[O,z]of k)ae(O),ae(z);else{for(let O=0,z=jt.length;O<z;O++)if(k instanceof dn[O]){let q=jt[O],te=q.tag;return null==te&&(te=q.getTag&&q.getTag.call(this,k)),te<24?C[_++]=192|te:te<256?(C[_++]=216,C[_++]=te):te<65536?(C[_++]=217,C[_++]=te>>8,C[_++]=255&te):te>-1&&(C[_++]=218,pe.setUint32(_,te),_+=4),void q.encode.call(this,k,ae,St)}if(k[Symbol.iterator]){if(hn){let O=new Error("Iterable should be serialized as iterator");throw O.iteratorNotHandled=!0,O}C[_++]=159;for(let O of k)ae(O);return void(C[_++]=255)}if(k[Symbol.asyncIterator]||mn(k)){let O=new Error("Iterable/blob should be serialized as iterator");throw O.iteratorNotHandled=!0,O}if(this.useToJSON&&k.toJSON){const O=k.toJSON();if(O!==k)return ae(O)}An(k,!k.hasOwnProperty)}}else C[_++]=246;else if("boolean"===N)C[_++]=k?245:244;else if("bigint"===N){if(k<BigInt(1)<<BigInt(64)&&k>=0)C[_++]=27,pe.setBigUint64(_,k);else if(k>-(BigInt(1)<<BigInt(64))&&k<0)C[_++]=59,pe.setBigUint64(_,-k-BigInt(1));else{if(!this.largeBigIntToFloat)throw new RangeError(k+" was too large to fit in CBOR 64-bit integer format, set largeBigIntToFloat to convert to float-64");C[_++]=251,pe.setFloat64(_,Number(k))}_+=8}else{if("undefined"!==N)throw new Error("Unknown type: "+N);C[_++]=247}},An=!1===this.useRecords?this.variableMapSize?k=>{let N=Object.keys(k),I=Object.values(k),E=N.length;if(E<24?C[_++]=160|E:E<256?(C[_++]=184,C[_++]=E):E<65536?(C[_++]=185,C[_++]=E>>8,C[_++]=255&E):(C[_++]=186,pe.setUint32(_,E),_+=4),h.keyMap)for(let z=0;z<E;z++)ae(h.encodeKey(N[z])),ae(I[z]);else for(let z=0;z<E;z++)ae(N[z]),ae(I[z])}:(k,N)=>{C[_++]=185;let I=_-n;_+=2;let E=0;if(h.keyMap)for(let O in k)(N||k.hasOwnProperty(O))&&(ae(h.encodeKey(O)),ae(k[O]),E++);else for(let O in k)(N||k.hasOwnProperty(O))&&(ae(O),ae(k[O]),E++);C[I+++n]=E>>8,C[I+n]=255&E}:(k,N)=>{let I,X,q,E=l.transitions||(l.transitions=Object.create(null)),O=0,z=0;if(this.keyMap){q=Object.keys(k).map(ee=>this.encodeKey(ee)),z=q.length;for(let ee=0;ee<z;ee++){let At=q[ee];I=E[At],I||(I=E[At]=Object.create(null),O++),E=I}}else for(let ee in k)(N||k.hasOwnProperty(ee))&&(I=E[ee],I||(1048576&E[$e]&&(X=65535&E[$e]),I=E[ee]=Object.create(null),O++),E=I,z++);let te=E[$e];if(void 0!==te)te&=65535,C[_++]=217,C[_++]=te>>8|224,C[_++]=255&te;else{if(q||(q=E.__keys__||(E.__keys__=Object.keys(k))),void 0===X?(te=l.nextId++,te||(te=0,l.nextId=1),te>=256&&(l.nextId=(te=P)+1)):te=X,l[te]=q,!(te<P)){if(E[$e]=te,pe.setUint32(_,3655335680),_+=3,O&&(Tn+=Jt*O),Ke.length>=256-P&&(Ke.shift()[$e]=void 0),Ke.push(E),Ne(z+2),ae(57344+te),ae(q),null===N)return;for(let ee in k)(N||k.hasOwnProperty(ee))&&ae(k[ee]);return}C[_++]=217,C[_++]=te>>8|224,C[_++]=255&te,E=l.transitions;for(let ee=0;ee<z;ee++)(void 0===E[$e]||1048576&E[$e])&&(E[$e]=te),E=E[q[ee]];E[$e]=1048576|te,s=!0}if(z<24?C[_++]=128|z:Ne(z),null!==N)for(let ee in k)(N||k.hasOwnProperty(ee))&&ae(k[ee])},St=k=>{let N;if(k>16777216){if(k-n>Ar)throw new Error("Encoded buffer would be larger than maximum buffer size");N=Math.min(Ar,4096*Math.round(Math.max((k-n)*(k>67108864?1.25:2),4194304)/4096))}else N=1+(Math.max(k-n<<2,C.length-1)>>12)<<12;let I=new pn(N);return pe=new DataView(I.buffer,0,N),C.copy?C.copy(I,0,n,k):I.set(C.slice(n,k)),_-=n,n=0,qe=I.length-10,C=I};let st=100,Nr=1e3;function*ht(k,N,I){let E=k.constructor;if(E===Object){let O=!1!==h.useRecords;O?An(k,null):Pr(Object.keys(k).length,160);for(let z in k){let X=k[z];O||ae(z),X&&"object"==typeof X?N[z]?yield*ht(X,N[z]):yield*Pn(X,N,z):ae(X)}}else if(E===Array){let O=k.length;Ne(O);for(let z=0;z<O;z++){let X=k[z];X&&("object"==typeof X||_-n>st)?N.element?yield*ht(X,N.element):yield*Pn(X,N,"element"):ae(X)}}else if(k[Symbol.iterator]){C[_++]=159;for(let O of k)O&&("object"==typeof O||_-n>st)?N.element?yield*ht(O,N.element):yield*Pn(O,N,"element"):ae(O);C[_++]=255}else mn(k)?(Pr(k.size,64),yield C.subarray(n,_),yield k,Tt()):k[Symbol.asyncIterator]?(C[_++]=159,yield C.subarray(n,_),yield k,Tt(),C[_++]=255):ae(k);I&&_>n?yield C.subarray(n,_):_-n>st&&(yield C.subarray(n,_),Tt())}function*Pn(k,N,I){let E=_-n;try{ae(k),_-n>st&&(yield C.subarray(n,_),Tt())}catch(O){if(!O.iteratorNotHandled)throw O;N[I]={},_=n+E,yield*ht.call(this,k,N[I])}}function Tt(){st=Nr,h.encode(null,gn)}function Hr(k,N,I){return st=N&&N.chunkThreshold?Nr=N.chunkThreshold:100,k&&"object"==typeof k?(h.encode(null,gn),I(k,h.iterateProperties||(h.iterateProperties={}),!0)):[h.encode(k)]}function Vr(k,N){return Mn.apply(this,arguments)}function Mn(){return Mn=function Me(t){return function(){return new De(t.apply(this,arguments))}}(function*(k,N){for(let q of ht(k,N,!0)){let te=q.constructor;if(te===Sr||te===Uint8Array)yield q;else if(mn(q)){let At,ee=q.stream().getReader();for(;!(At=yield Et(ee.read())).done;)yield At.value}else if(q[Symbol.asyncIterator]){var O,I=!1,E=!1;try{for(var X,z=pr(q);I=!(X=yield Et(z.next())).done;I=!1){let ee=X.value;Tt(),ee?yield*Xr(pr(Vr(ee,N.async||(N.async={})))):yield h.encode(ee)}}catch(ee){E=!0,O=ee}finally{try{I&&null!=z.return&&(yield Et(z.return()))}finally{if(E)throw O}}}else yield q}}),Mn.apply(this,arguments)}this.encodeAsIterable=function(k,N){return Hr(k,N,ht)},this.encodeAsAsyncIterable=function(k,N){return Hr(k,N,Vr)}}useBuffer(e){C=e,pe=new DataView(C.buffer,C.byteOffset,C.byteLength),_=0}clearSharedData(){this.structures&&(this.structures=[]),this.sharedValues&&(this.sharedValues=void 0)}updateSharedData(){let e=this.sharedVersion||0;this.sharedVersion=e+1;let r=this.structures.slice(0),n=new Mr(r,this.sharedValues,this.sharedVersion),i=this.saveShared(n,s=>(s&&s.version||0)==e);return!1===i?(n=this.getShared()||{},this.structures=n.structures||[],this.sharedValues=n.packedValues,this.sharedVersion=n.version,this.structures.nextId=this.structures.length):r.forEach((s,l)=>this.structures[l]=s),i}}({useRecords:!1});const Or=512,Ci=1024,gn=2048;function it(t,e,r,n){Object.defineProperty(t,e,{get:r,set:n,enumerable:!0,configurable:!0})}class Ir{constructor(){this.chunkedMTU=16300,this._dataCount=1,this.chunk=e=>{const r=[],n=e.byteLength,i=Math.ceil(n/this.chunkedMTU);let s=0,l=0;for(;l<n;){const u=Math.min(n,l+this.chunkedMTU),m=e.slice(l,u);r.push({__peerData:this._dataCount,n:s,data:m,total:i}),l=u,s++}return this._dataCount++,r}}}const bn=dr.default||dr,Ct=new class{isWebRTCSupported(){return typeof RTCPeerConnection<"u"}isBrowserSupported(){const t=this.getBrowser(),e=this.getVersion();return!!this.supportedBrowsers.includes(t)&&("chrome"===t?e>=this.minChromeVersion:"firefox"===t?e>=this.minFirefoxVersion:"safari"===t&&!this.isIOS&&e>=this.minSafariVersion)}getBrowser(){return bn.browserDetails.browser}getVersion(){return bn.browserDetails.version||0}isUnifiedPlanSupported(){const t=this.getBrowser(),e=bn.browserDetails.version||0;if("chrome"===t&&e<this.minChromeVersion)return!1;if("firefox"===t&&e>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let r,n=!1;try{r=new RTCPeerConnection,r.addTransceiver("audio"),n=!0}catch{}finally{r&&r.close()}return n}toString(){return`Supports:\n    browser:${this.getBrowser()}\n    version:${this.getVersion()}\n    isIOS:${this.isIOS}\n    isWebRTCSupported:${this.isWebRTCSupported()}\n    isBrowserSupported:${this.isBrowserSupported()}\n    isUnifiedPlanSupported:${this.isUnifiedPlanSupported()}`}constructor(){this.isIOS=["iPad","iPhone","iPod"].includes(navigator.platform),this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}},Ti=t=>!t||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(t),Er=()=>Math.random().toString(36).slice(2),Dr={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"},Ee=new class Ai extends Ir{noop(){}blobToArrayBuffer(e,r){const n=new FileReader;return n.onload=function(i){i.target&&r(i.target.result)},n.readAsArrayBuffer(e),n}binaryStringToArrayBuffer(e){const r=new Uint8Array(e.length);for(let n=0;n<e.length;n++)r[n]=255&e.charCodeAt(n);return r.buffer}isSecure(){return"https:"===location.protocol}constructor(...e){super(...e),this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.defaultConfig=Dr,this.browser=Ct.getBrowser(),this.browserVersion=Ct.getVersion(),this.pack=wn,this.unpack=Xe,this.supports=function(){const r={browser:Ct.isBrowserSupported(),webRTC:Ct.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!r.webRTC)return r;let n;try{let i;n=new RTCPeerConnection(Dr),r.audioVideo=!0;try{i=n.createDataChannel("_PEERJSTEST",{ordered:!0}),r.data=!0,r.reliable=!!i.ordered;try{i.binaryType="blob",r.binaryBlob=!Ct.isIOS}catch{}}catch{}finally{i&&i.close()}}catch{}finally{n&&n.close()}return r}(),this.validateId=Ti,this.randomToken=Er}};var vn,G=new class wi{get logLevel(){return this._logLevel}set logLevel(e){this._logLevel=e}log(...e){this._logLevel>=3&&this._print(3,...e)}warn(...e){this._logLevel>=2&&this._print(2,...e)}error(...e){this._logLevel>=1&&this._print(1,...e)}setLogFunction(e){this._print=e}_print(e,...r){const n=["PeerJS: ",...r];for(const i in n)n[i]instanceof Error&&(n[i]="("+n[i].name+") "+n[i].message);e>=3?console.log(...n):e>=2?console.warn("WARNING",...n):e>=1&&console.error("ERROR",...n)}constructor(){this._logLevel=0}},Ri=Object.prototype.hasOwnProperty,Re="~";function xt(){}function Oi(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function $r(t,e,r,n,i){if("function"!=typeof r)throw new TypeError("The listener must be a function");var s=new Oi(r,n||t,i),l=Re?Re+e:e;return t._events[l]?t._events[l].fn?t._events[l]=[t._events[l],s]:t._events[l].push(s):(t._events[l]=s,t._eventsCount++),t}function Vt(t,e){0==--t._eventsCount?t._events=new xt:delete t._events[e]}function we(){this._events=new xt,this._eventsCount=0}Object.create&&(xt.prototype=Object.create(null),(new xt).__proto__||(Re=!1)),we.prototype.eventNames=function(){var r,n,e=[];if(0===this._eventsCount)return e;for(n in r=this._events)Ri.call(r,n)&&e.push(Re?n.slice(1):n);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(r)):e},we.prototype.listeners=function(e){var n=this._events[Re?Re+e:e];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,s=n.length,l=new Array(s);i<s;i++)l[i]=n[i].fn;return l},we.prototype.listenerCount=function(e){var n=this._events[Re?Re+e:e];return n?n.fn?1:n.length:0},we.prototype.emit=function(e,r,n,i,s,l){var u=Re?Re+e:e;if(!this._events[u])return!1;var v,P,m=this._events[u],h=arguments.length;if(m.fn){switch(m.once&&this.removeListener(e,m.fn,void 0,!0),h){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,r),!0;case 3:return m.fn.call(m.context,r,n),!0;case 4:return m.fn.call(m.context,r,n,i),!0;case 5:return m.fn.call(m.context,r,n,i,s),!0;case 6:return m.fn.call(m.context,r,n,i,s,l),!0}for(P=1,v=new Array(h-1);P<h;P++)v[P-1]=arguments[P];m.fn.apply(m.context,v)}else{var K,B=m.length;for(P=0;P<B;P++)switch(m[P].once&&this.removeListener(e,m[P].fn,void 0,!0),h){case 1:m[P].fn.call(m[P].context);break;case 2:m[P].fn.call(m[P].context,r);break;case 3:m[P].fn.call(m[P].context,r,n);break;case 4:m[P].fn.call(m[P].context,r,n,i);break;default:if(!v)for(K=1,v=new Array(h-1);K<h;K++)v[K-1]=arguments[K];m[P].fn.apply(m[P].context,v)}}return!0},we.prototype.on=function(e,r,n){return $r(this,e,r,n,!1)},we.prototype.once=function(e,r,n){return $r(this,e,r,n,!0)},we.prototype.removeListener=function(e,r,n,i){var s=Re?Re+e:e;if(!this._events[s])return this;if(!r)return Vt(this,s),this;var l=this._events[s];if(l.fn)l.fn===r&&(!i||l.once)&&(!n||l.context===n)&&Vt(this,s);else{for(var u=0,m=[],h=l.length;u<h;u++)(l[u].fn!==r||i&&!l[u].once||n&&l[u].context!==n)&&m.push(l[u]);m.length?this._events[s]=1===m.length?m[0]:m:Vt(this,s)}return this},we.prototype.removeAllListeners=function(e){var r;return e?this._events[r=Re?Re+e:e]&&Vt(this,r):(this._events=new xt,this._eventsCount=0),this},we.prototype.off=we.prototype.removeListener,we.prototype.addListener=we.prototype.on,we.prefixed=Re,we.EventEmitter=we,vn=we;var ot={};it(ot,"ConnectionType",()=>Je),it(ot,"PeerErrorType",()=>ye),it(ot,"BaseConnectionErrorType",()=>Gt),it(ot,"DataConnectionErrorType",()=>Zt),it(ot,"SerializationType",()=>kt),it(ot,"SocketEventType",()=>Ye),it(ot,"ServerMessageType",()=>Te);var Cn,Je=function(t){return t.Data="data",t.Media="media",t}(Je||{}),ye=function(t){return t.BrowserIncompatible="browser-incompatible",t.Disconnected="disconnected",t.InvalidID="invalid-id",t.InvalidKey="invalid-key",t.Network="network",t.PeerUnavailable="peer-unavailable",t.SslUnavailable="ssl-unavailable",t.ServerError="server-error",t.SocketError="socket-error",t.SocketClosed="socket-closed",t.UnavailableID="unavailable-id",t.WebRTC="webrtc",t}(ye||{}),Gt=function(t){return t.NegotiationFailed="negotiation-failed",t.ConnectionClosed="connection-closed",t}(Gt||{}),Zt=function(t){return t.NotOpenYet="not-open-yet",t.MessageToBig="message-too-big",t}(Zt||{}),kt=function(t){return t.Binary="binary",t.BinaryUTF8="binary-utf8",t.JSON="json",t.None="raw",t}(kt||{}),Ye=function(t){return t.Message="message",t.Disconnected="disconnected",t.Error="error",t.Close="close",t}(Ye||{}),Te=function(t){return t.Heartbeat="HEARTBEAT",t.Candidate="CANDIDATE",t.Offer="OFFER",t.Answer="ANSWER",t.Open="OPEN",t.Error="ERROR",t.IdTaken="ID-TAKEN",t.InvalidKey="INVALID-KEY",t.Leave="LEAVE",t.Expire="EXPIRE",t}(Te||{});Cn=JSON.parse('{"name":"peerjs","version":"1.5.2","keywords":["peerjs","webrtc","p2p","rtc"],"description":"PeerJS client","homepage":"https://peerjs.com","bugs":{"url":"https://github.com/peers/peerjs/issues"},"repository":{"type":"git","url":"https://github.com/peers/peerjs"},"license":"MIT","contributors":["Michelle Bu <michelle@michellebu.com>","afrokick <devbyru@gmail.com>","ericz <really.ez@gmail.com>","Jairo <kidandcat@gmail.com>","Jonas Gloning <34194370+jonasgloning@users.noreply.github.com>","Jairo Caro-Accino Viciana <jairo@galax.be>","Carlos Caballero <carlos.caballero.gonzalez@gmail.com>","hc <hheennrryy@gmail.com>","Muhammad Asif <capripio@gmail.com>","PrashoonB <prashoonbhattacharjee@gmail.com>","Harsh Bardhan Mishra <47351025+HarshCasper@users.noreply.github.com>","akotynski <aleksanderkotbury@gmail.com>","lmb <i@lmb.io>","Jairooo <jairocaro@msn.com>","Moritz St\xfcckler <moritz.stueckler@gmail.com>","Simon <crydotsnakegithub@gmail.com>","Denis Lukov <denismassters@gmail.com>","Philipp Hancke <fippo@andyet.net>","Hans Oksendahl <hansoksendahl@gmail.com>","Jess <jessachandler@gmail.com>","khankuan <khankuan@gmail.com>","DUODVK <kurmanov.work@gmail.com>","XiZhao <kwang1imsa@gmail.com>","Matthias Lohr <matthias@lohr.me>","=frank tree <=frnktrb@googlemail.com>","Andre Eckardt <aeckardt@outlook.com>","Chris Cowan <agentme49@gmail.com>","Alex Chuev <alex@chuev.com>","alxnull <alxnull@e.mail.de>","Yemel Jardi <angel.jardi@gmail.com>","Ben Parnell <benjaminparnell.94@gmail.com>","Benny Lichtner <bennlich@gmail.com>","fresheneesz <bitetrudpublic@gmail.com>","bob.barstead@exaptive.com <bob.barstead@exaptive.com>","chandika <chandika@gmail.com>","emersion <contact@emersion.fr>","Christopher Van <cvan@users.noreply.github.com>","eddieherm <edhermoso@gmail.com>","Eduardo Pinho <enet4mikeenet@gmail.com>","Evandro Zanatta <ezanatta@tray.net.br>","Gardner Bickford <gardner@users.noreply.github.com>","Gian Luca <gianluca.cecchi@cynny.com>","PatrickJS <github@gdi2290.com>","jonnyf <github@jonathanfoss.co.uk>","Hizkia Felix <hizkifw@gmail.com>","Hristo Oskov <hristo.oskov@gmail.com>","Isaac Madwed <i.madwed@gmail.com>","Ilya Konanykhin <ilya.konanykhin@gmail.com>","jasonbarry <jasbarry@me.com>","Jonathan Burke <jonathan.burke.1311@googlemail.com>","Josh Hamit <josh.hamit@gmail.com>","Jordan Austin <jrax86@gmail.com>","Joel Wetzell <jwetzell@yahoo.com>","xizhao <kevin.wang@cloudera.com>","Alberto Torres <kungfoobar@gmail.com>","Jonathan Mayol <mayoljonathan@gmail.com>","Jefferson Felix <me@jsfelix.dev>","Rolf Erik Lekang <me@rolflekang.com>","Kevin Mai-Husan Chia <mhchia@users.noreply.github.com>","Pepijn de Vos <pepijndevos@gmail.com>","JooYoung <qkdlql@naver.com>","Tobias Speicher <rootcommander@gmail.com>","Steve Blaurock <sblaurock@gmail.com>","Kyrylo Shegeda <shegeda@ualberta.ca>","Diwank Singh Tomer <singh@diwank.name>","So\u0308ren Balko <Soeren.Balko@gmail.com>","Arpit Solanki <solankiarpit1997@gmail.com>","Yuki Ito <yuki@gnnk.net>","Artur Zayats <zag2art@gmail.com>"],"funding":{"type":"opencollective","url":"https://opencollective.com/peer"},"collective":{"type":"opencollective","url":"https://opencollective.com/peer"},"files":["dist/*"],"sideEffects":["lib/global.ts","lib/supports.ts"],"main":"dist/bundler.cjs","module":"dist/bundler.mjs","browser-minified":"dist/peerjs.min.js","browser-unminified":"dist/peerjs.js","browser-minified-cbor":"dist/serializer.cbor.mjs","browser-minified-msgpack":"dist/serializer.msgpack.mjs","types":"dist/types.d.ts","engines":{"node":">= 14"},"targets":{"types":{"source":"lib/exports.ts"},"main":{"source":"lib/exports.ts","sourceMap":{"inlineSources":true}},"module":{"source":"lib/exports.ts","includeNodeModules":["eventemitter3"],"sourceMap":{"inlineSources":true}},"browser-minified":{"context":"browser","outputFormat":"global","optimize":true,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 80, safari >= 15"},"source":"lib/global.ts"},"browser-unminified":{"context":"browser","outputFormat":"global","optimize":false,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 80, safari >= 15"},"source":"lib/global.ts"},"browser-minified-cbor":{"context":"browser","outputFormat":"esmodule","isLibrary":true,"optimize":true,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 102, safari >= 15"},"source":"lib/dataconnection/StreamConnection/Cbor.ts"},"browser-minified-msgpack":{"context":"browser","outputFormat":"esmodule","isLibrary":true,"optimize":true,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 102, safari >= 15"},"source":"lib/dataconnection/StreamConnection/MsgPack.ts"}},"scripts":{"contributors":"git-authors-cli --print=false && prettier --write package.json && git add package.json package-lock.json && git commit -m \\"chore(contributors): update and sort contributors list\\"","check":"tsc --noEmit && tsc -p e2e/tsconfig.json --noEmit","watch":"parcel watch","build":"rm -rf dist && parcel build","prepublishOnly":"npm run build","test":"jest","test:watch":"jest --watch","coverage":"jest --coverage --collectCoverageFrom=\\"./lib/**\\"","format":"prettier --write .","format:check":"prettier --check .","semantic-release":"semantic-release","e2e":"wdio run e2e/wdio.local.conf.ts","e2e:bstack":"wdio run e2e/wdio.bstack.conf.ts"},"devDependencies":{"@parcel/config-default":"^2.9.3","@parcel/packager-ts":"^2.9.3","@parcel/transformer-typescript-tsc":"^2.9.3","@parcel/transformer-typescript-types":"^2.9.3","@semantic-release/changelog":"^6.0.1","@semantic-release/git":"^10.0.1","@swc/core":"^1.3.27","@swc/jest":"^0.2.24","@types/jasmine":"^4.3.4","@wdio/browserstack-service":"^8.11.2","@wdio/cli":"^8.11.2","@wdio/globals":"^8.11.2","@wdio/jasmine-framework":"^8.11.2","@wdio/local-runner":"^8.11.2","@wdio/spec-reporter":"^8.11.2","@wdio/types":"^8.10.4","http-server":"^14.1.1","jest":"^29.3.1","jest-environment-jsdom":"^29.3.1","mock-socket":"^9.0.0","parcel":"^2.9.3","prettier":"^3.0.0","semantic-release":"^21.0.0","ts-node":"^10.9.1","typescript":"^5.0.0","wdio-geckodriver-service":"^5.0.1"},"dependencies":{"@msgpack/msgpack":"^2.8.0","cbor-x":"1.5.4","eventemitter3":"^4.0.7","peerjs-js-binarypack":"^2.1.0","webrtc-adapter":"^8.0.0"},"alias":{"process":false,"buffer":false}}');class Ii extends vn.EventEmitter{constructor(e,r,n,i,s,l=5e3){super(),this.pingInterval=l,this._disconnected=!0,this._messagesQueue=[],this._baseUrl=(e?"wss://":"ws://")+r+":"+n+i+"peerjs?key="+s}start(e,r){this._id=e,this._socket||!this._disconnected||(this._socket=new WebSocket(`${this._baseUrl}&id=${e}&token=${r}&version=`+Cn.version),this._disconnected=!1,this._socket.onmessage=i=>{let s;try{s=JSON.parse(i.data),G.log("Server message received:",s)}catch{return void G.log("Invalid server message",i.data)}this.emit(Ye.Message,s)},this._socket.onclose=i=>{this._disconnected||(G.log("Socket closed.",i),this._cleanup(),this._disconnected=!0,this.emit(Ye.Disconnected))},this._socket.onopen=()=>{this._disconnected||(this._sendQueuedMessages(),G.log("Socket open"),this._scheduleHeartbeat())})}_scheduleHeartbeat(){this._wsPingTimer=setTimeout(()=>{this._sendHeartbeat()},this.pingInterval)}_sendHeartbeat(){if(!this._wsOpen())return void G.log("Cannot send heartbeat, because socket closed");const e=JSON.stringify({type:Te.Heartbeat});this._socket.send(e),this._scheduleHeartbeat()}_wsOpen(){return!!this._socket&&1===this._socket.readyState}_sendQueuedMessages(){const e=[...this._messagesQueue];this._messagesQueue=[];for(const r of e)this.send(r)}send(e){if(this._disconnected)return;if(!this._id)return void this._messagesQueue.push(e);if(!e.type)return void this.emit(Ye.Error,"Invalid message");if(!this._wsOpen())return;const r=JSON.stringify(e);this._socket.send(r)}close(){this._disconnected||(this._cleanup(),this._disconnected=!0)}_cleanup(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)}}class Lr{constructor(e){this.connection=e}startConnection(e){const r=this._startPeerConnection();if(this.connection.peerConnection=r,this.connection.type===Je.Media&&e._stream&&this._addTracksToConnection(e._stream,r),e.originator){const n=this.connection,s=r.createDataChannel(n.label,{ordered:!!e.reliable});n._initializeDataChannel(s),this._makeOffer()}else this.handleSDP("OFFER",e.sdp)}_startPeerConnection(){G.log("Creating RTCPeerConnection.");const e=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(e),e}_setupListeners(e){const r=this.connection.peer,n=this.connection.connectionId,i=this.connection.type,s=this.connection.provider;G.log("Listening for ICE candidates."),e.onicecandidate=l=>{!l.candidate||!l.candidate.candidate||(G.log(`Received ICE candidates for ${r}:`,l.candidate),s.socket.send({type:Te.Candidate,payload:{candidate:l.candidate,type:i,connectionId:n},dst:r}))},e.oniceconnectionstatechange=()=>{switch(e.iceConnectionState){case"failed":G.log("iceConnectionState is failed, closing connections to "+r),this.connection.emitError(Gt.NegotiationFailed,"Negotiation of connection to "+r+" failed."),this.connection.close();break;case"closed":G.log("iceConnectionState is closed, closing connections to "+r),this.connection.emitError(Gt.ConnectionClosed,"Connection to "+r+" closed."),this.connection.close();break;case"disconnected":G.log("iceConnectionState changed to disconnected on the connection with "+r);break;case"completed":e.onicecandidate=()=>{}}this.connection.emit("iceStateChanged",e.iceConnectionState)},G.log("Listening for data channel"),e.ondatachannel=l=>{G.log("Received data channel");const u=l.channel;s.getConnection(r,n)._initializeDataChannel(u)},G.log("Listening for remote stream"),e.ontrack=l=>{G.log("Received remote stream");const u=l.streams[0],m=s.getConnection(r,n);m.type===Je.Media&&this._addStreamToMediaConnection(u,m)}}cleanup(){G.log("Cleaning up PeerConnection to "+this.connection.peer);const e=this.connection.peerConnection;if(!e)return;this.connection.peerConnection=null,e.onicecandidate=e.oniceconnectionstatechange=e.ondatachannel=e.ontrack=()=>{};let n=!1;const i=this.connection.dataChannel;i&&(n=!!i.readyState&&"closed"!==i.readyState),("closed"!==e.signalingState||n)&&e.close()}_makeOffer(){var e=this;return Pe(function*(){const r=e.connection.peerConnection,n=e.connection.provider;try{const i=yield r.createOffer(e.connection.options.constraints);G.log("Created offer."),e.connection.options.sdpTransform&&"function"==typeof e.connection.options.sdpTransform&&(i.sdp=e.connection.options.sdpTransform(i.sdp)||i.sdp);try{yield r.setLocalDescription(i),G.log("Set localDescription:",i,`for:${e.connection.peer}`);let s={sdp:i,type:e.connection.type,connectionId:e.connection.connectionId,metadata:e.connection.metadata};if(e.connection.type===Je.Data){const l=e.connection;s={...s,label:l.label,reliable:l.reliable,serialization:l.serialization}}n.socket.send({type:Te.Offer,payload:s,dst:e.connection.peer})}catch(s){"OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"!=s&&(n.emitError(ye.WebRTC,s),G.log("Failed to setLocalDescription, ",s))}}catch(i){n.emitError(ye.WebRTC,i),G.log("Failed to createOffer, ",i)}})()}_makeAnswer(){var e=this;return Pe(function*(){const r=e.connection.peerConnection,n=e.connection.provider;try{const i=yield r.createAnswer();G.log("Created answer."),e.connection.options.sdpTransform&&"function"==typeof e.connection.options.sdpTransform&&(i.sdp=e.connection.options.sdpTransform(i.sdp)||i.sdp);try{yield r.setLocalDescription(i),G.log("Set localDescription:",i,`for:${e.connection.peer}`),n.socket.send({type:Te.Answer,payload:{sdp:i,type:e.connection.type,connectionId:e.connection.connectionId},dst:e.connection.peer})}catch(s){n.emitError(ye.WebRTC,s),G.log("Failed to setLocalDescription, ",s)}}catch(i){n.emitError(ye.WebRTC,i),G.log("Failed to create answer, ",i)}})()}handleSDP(e,r){var n=this;return Pe(function*(){r=new RTCSessionDescription(r);const i=n.connection.peerConnection,s=n.connection.provider;G.log("Setting remote description",r);const l=n;try{yield i.setRemoteDescription(r),G.log(`Set remoteDescription:${e} for:${n.connection.peer}`),"OFFER"===e&&(yield l._makeAnswer())}catch(u){s.emitError(ye.WebRTC,u),G.log("Failed to setRemoteDescription, ",u)}})()}handleCandidate(e){var r=this;return Pe(function*(){G.log("handleCandidate:",e);try{yield r.connection.peerConnection.addIceCandidate(e),G.log(`Added ICE candidate for:${r.connection.peer}`)}catch(n){r.connection.provider.emitError(ye.WebRTC,n),G.log("Failed to handleCandidate, ",n)}})()}_addTracksToConnection(e,r){if(G.log(`add tracks from stream ${e.id} to peer connection`),!r.addTrack)return G.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");e.getTracks().forEach(n=>{r.addTrack(n,e)})}_addStreamToMediaConnection(e,r){G.log(`add stream ${e.id} to media connection ${r.connectionId}`),r.addStream(e)}}class Br extends vn.EventEmitter{emitError(e,r){G.error("Error:",r),this.emit("error",new Ei(`${e}`,r))}}class Ei extends Error{constructor(e,r){"string"==typeof r?super(r):(super(),Object.assign(this,r)),this.type=e}}class Ur extends Br{get open(){return this._open}constructor(e,r,n){super(),this.peer=e,this.provider=r,this.options=n,this._open=!1,this.metadata=n.metadata}}class zt extends Ur{static#e=this.ID_PREFIX="mc_";get type(){return Je.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}constructor(e,r,n){super(e,r,n),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||zt.ID_PREFIX+Ee.randomToken(),this._negotiator=new Lr(this),this._localStream&&this._negotiator.startConnection({_stream:this._localStream,originator:!0})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{G.log(`DC#${this.connectionId} dc connection success`),this.emit("willCloseOnRemote")},this.dataChannel.onclose=()=>{G.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}addStream(e){G.log("Receiving stream",e),this._remoteStream=e,super.emit("stream",e)}handleMessage(e){const r=e.type,n=e.payload;switch(e.type){case Te.Answer:this._negotiator.handleSDP(r,n.sdp),this._open=!0;break;case Te.Candidate:this._negotiator.handleCandidate(n.candidate);break;default:G.warn(`Unrecognized message type:${r} from peer:${this.peer}`)}}answer(e,r={}){if(this._localStream)return void G.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");this._localStream=e,r&&r.sdpTransform&&(this.options.sdpTransform=r.sdpTransform),this._negotiator.startConnection({...this.options._payload,_stream:e});const n=this.provider._getMessages(this.connectionId);for(const i of n)this.handleMessage(i);this._open=!0}close(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}}class Di{constructor(e){this._options=e}_buildRequest(e){const r=this._options.secure?"https":"http",{host:n,port:i,path:s,key:l}=this._options,u=new URL(`${r}://${n}:${i}${s}${l}/${e}`);return u.searchParams.set("ts",`${Date.now()}${Math.random()}`),u.searchParams.set("version",Cn.version),fetch(u.href,{referrerPolicy:this._options.referrerPolicy})}retrieveId(){var e=this;return Pe(function*(){try{const r=yield e._buildRequest("id");if(200!==r.status)throw new Error(`Error. Status:${r.status}`);return r.text()}catch(r){G.error("Error retrieving ID",r);let n="";throw"/"===e._options.path&&e._options.host!==Ee.CLOUD_HOST&&(n=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+n)}})()}listAllPeers(){var e=this;return Pe(function*(){try{const r=yield e._buildRequest("peers");if(200!==r.status){if(401===r.status){let n="";throw n=e._options.host===Ee.CLOUD_HOST?"It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":"You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+n)}throw new Error(`Error. Status:${r.status}`)}return r.json()}catch(r){throw G.error("Error retrieving list peers",r),new Error("Could not get list peers from the server."+r)}})()}}class pt extends Ur{static#e=this.ID_PREFIX="dc_";static#t=this.MAX_BUFFERED_AMOUNT=8388608;get type(){return Je.Data}constructor(e,r,n){super(e,r,n),this.connectionId=this.options.connectionId||pt.ID_PREFIX+Er(),this.label=this.options.label||this.connectionId,this.reliable=!!this.options.reliable,this._negotiator=new Lr(this),this._negotiator.startConnection(this.options._payload||{originator:!0,reliable:this.reliable})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{G.log(`DC#${this.connectionId} dc connection success`),this._open=!0,this.emit("open")},this.dataChannel.onmessage=r=>{G.log(`DC#${this.connectionId} dc onmessage:`,r.data)},this.dataChannel.onclose=()=>{G.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}close(e){e?.flush?this.send({__peerData:{type:"close"}}):(this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this.dataChannel=null),this.open&&(this._open=!1,super.emit("close")))}send(e,r=!1){if(this.open)return this._send(e,r);this.emitError(Zt.NotOpenYet,"Connection is not open. You should listen for the `open` event before sending messages.")}handleMessage(e){var r=this;return Pe(function*(){const n=e.payload;switch(e.type){case Te.Answer:yield r._negotiator.handleSDP(e.type,n.sdp);break;case Te.Candidate:yield r._negotiator.handleCandidate(n.candidate);break;default:G.warn("Unrecognized message type:",e.type,"from peer:",r.peer)}})()}}class xn extends pt{get bufferSize(){return this._bufferSize}_initializeDataChannel(e){super._initializeDataChannel(e),this.dataChannel.binaryType="arraybuffer",this.dataChannel.addEventListener("message",r=>this._handleDataMessage(r))}_bufferedSend(e){(this._buffering||!this._trySend(e))&&(this._buffer.push(e),this._bufferSize=this._buffer.length)}_trySend(e){if(!this.open)return!1;if(this.dataChannel.bufferedAmount>pt.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(()=>{this._buffering=!1,this._tryBuffer()},50),!1;try{this.dataChannel.send(e)}catch(r){return G.error(`DC#:${this.connectionId} Error when sending:`,r),this._buffering=!0,this.close(),!1}return!0}_tryBuffer(){this.open&&0!==this._buffer.length&&this._trySend(this._buffer[0])&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}close(e){e?.flush?this.send({__peerData:{type:"close"}}):(this._buffer=[],this._bufferSize=0,super.close())}constructor(...e){super(...e),this._buffer=[],this._bufferSize=0,this._buffering=!1}}class kn extends xn{close(e){super.close(e),this._chunkedData={}}constructor(e,r,n){super(e,r,n),this.chunker=new Ir,this.serialization=kt.Binary,this._chunkedData={}}_handleDataMessage({data:e}){const r=Xe(e),n=r.__peerData;if(n)return"close"===n.type?void this.close():void this._handleChunk(r);this.emit("data",r)}_handleChunk(e){const r=e.__peerData,n=this._chunkedData[r]||{data:[],count:0,total:e.total};if(n.data[e.n]=new Uint8Array(e.data),n.count++,this._chunkedData[r]=n,n.total===n.count){delete this._chunkedData[r];const i=function Si(t){let e=0;for(const i of t)e+=i.byteLength;const r=new Uint8Array(e);let n=0;for(const i of t)r.set(i,n),n+=i.byteLength;return r}(n.data);this._handleDataMessage({data:i})}}_send(e,r){const n=wn(e);if(n instanceof Promise)return this._send_blob(n);!r&&n.byteLength>this.chunker.chunkedMTU?this._sendChunks(n):this._bufferedSend(n)}_send_blob(e){var r=this;return Pe(function*(){const n=yield e;n.byteLength>r.chunker.chunkedMTU?r._sendChunks(n):r._bufferedSend(n)})()}_sendChunks(e){const r=this.chunker.chunk(e);G.log(`DC#${this.connectionId} Try to send ${r.length} chunks...`);for(const n of r)this.send(n,!0)}}class $i extends xn{_handleDataMessage({data:e}){super.emit("data",e)}_send(e,r){this._bufferedSend(e)}constructor(...e){super(...e),this.serialization=kt.None}}class Li extends xn{_handleDataMessage({data:e}){const r=this.parse(this.decoder.decode(e)),n=r.__peerData;n&&"close"===n.type?this.close():this.emit("data",r)}_send(e,r){const n=this.encoder.encode(this.stringify(e));n.byteLength>=Ee.chunkedMTU?this.emitError(Zt.MessageToBig,"Message too big for JSON channel"):this._bufferedSend(n)}constructor(...e){super(...e),this.serialization=kt.JSON,this.encoder=new TextEncoder,this.decoder=new TextDecoder,this.stringify=JSON.stringify,this.parse=JSON.parse}}class Sn extends Br{static#e=this.DEFAULT_KEY="peerjs";get id(){return this._id}get options(){return this._options}get open(){return this._open}get socket(){return this._socket}get connections(){const e=Object.create(null);for(const[r,n]of this._connections)e[r]=n;return e}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}constructor(e,r){let n;super(),this._serializers={raw:$i,json:Li,binary:kn,"binary-utf8":kn,default:kn},this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map,e&&e.constructor==Object?r=e:e&&(n=e.toString()),r={debug:0,host:Ee.CLOUD_HOST,port:Ee.CLOUD_PORT,path:"/",key:Sn.DEFAULT_KEY,token:Ee.randomToken(),config:Ee.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",serializers:{},...r},this._options=r,this._serializers={...this._serializers,...this.options.serializers},"/"===this._options.host&&(this._options.host=window.location.hostname),this._options.path&&("/"!==this._options.path[0]&&(this._options.path="/"+this._options.path),"/"!==this._options.path[this._options.path.length-1]&&(this._options.path+="/")),void 0===this._options.secure&&this._options.host!==Ee.CLOUD_HOST?this._options.secure=Ee.isSecure():this._options.host==Ee.CLOUD_HOST&&(this._options.secure=!0),this._options.logFunction&&G.setLogFunction(this._options.logFunction),G.logLevel=this._options.debug||0,this._api=new Di(r),this._socket=this._createServerConnection(),Ee.supports.audioVideo||Ee.supports.data?!n||Ee.validateId(n)?n?this._initialize(n):this._api.retrieveId().then(i=>this._initialize(i)).catch(i=>this._abort(ye.ServerError,i)):this._delayedAbort(ye.InvalidID,`ID "${n}" is invalid`):this._delayedAbort(ye.BrowserIncompatible,"The current browser does not support WebRTC")}_createServerConnection(){const e=new Ii(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return e.on(Ye.Message,r=>{this._handleMessage(r)}),e.on(Ye.Error,r=>{this._abort(ye.SocketError,r)}),e.on(Ye.Disconnected,()=>{this.disconnected||(this.emitError(ye.Network,"Lost connection to server."),this.disconnect())}),e.on(Ye.Close,()=>{this.disconnected||this._abort(ye.SocketClosed,"Underlying socket is already closed.")}),e}_initialize(e){this._id=e,this.socket.start(e,this._options.token)}_handleMessage(e){const r=e.type,n=e.payload,i=e.src;switch(r){case Te.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case Te.Error:this._abort(ye.ServerError,n.msg);break;case Te.IdTaken:this._abort(ye.UnavailableID,`ID "${this.id}" is taken`);break;case Te.InvalidKey:this._abort(ye.InvalidKey,`API KEY "${this._options.key}" is invalid`);break;case Te.Leave:G.log(`Received leave message from ${i}`),this._cleanupPeer(i),this._connections.delete(i);break;case Te.Expire:this.emitError(ye.PeerUnavailable,`Could not connect to peer ${i}`);break;case Te.Offer:{const s=n.connectionId;let l=this.getConnection(i,s);if(l&&(l.close(),G.warn(`Offer received for existing Connection ID:${s}`)),n.type===Je.Media){const m=new zt(i,this,{connectionId:s,_payload:n,metadata:n.metadata});l=m,this._addConnection(i,l),this.emit("call",m)}else{if(n.type!==Je.Data)return void G.warn(`Received malformed connection type:${n.type}`);{const m=new this._serializers[n.serialization](i,this,{connectionId:s,_payload:n,metadata:n.metadata,label:n.label,serialization:n.serialization,reliable:n.reliable});l=m,this._addConnection(i,l),this.emit("connection",m)}}const u=this._getMessages(s);for(const m of u)l.handleMessage(m);break}default:{if(!n)return void G.warn(`You received a malformed message from ${i} of type ${r}`);const s=n.connectionId,l=this.getConnection(i,s);l&&l.peerConnection?l.handleMessage(e):s?this._storeMessage(s,e):G.warn("You received an unrecognized message:",e);break}}}_storeMessage(e,r){this._lostMessages.has(e)||this._lostMessages.set(e,[]),this._lostMessages.get(e).push(r)}_getMessages(e){const r=this._lostMessages.get(e);return r?(this._lostMessages.delete(e),r):[]}connect(e,r={}){if(r={serialization:"default",...r},this.disconnected)return G.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),void this.emitError(ye.Disconnected,"Cannot connect to new Peer after disconnecting from server.");const n=new this._serializers[r.serialization](e,this,r);return this._addConnection(e,n),n}call(e,r,n={}){if(this.disconnected)return G.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),void this.emitError(ye.Disconnected,"Cannot connect to new Peer after disconnecting from server.");if(!r)return void G.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");const i=new zt(e,this,{...n,_stream:r});return this._addConnection(e,i),i}_addConnection(e,r){G.log(`add connection ${r.type}:${r.connectionId} to peerId:${e}`),this._connections.has(e)||this._connections.set(e,[]),this._connections.get(e).push(r)}_removeConnection(e){const r=this._connections.get(e.peer);if(r){const n=r.indexOf(e);-1!==n&&r.splice(n,1)}this._lostMessages.delete(e.connectionId)}getConnection(e,r){const n=this._connections.get(e);if(!n)return null;for(const i of n)if(i.connectionId===r)return i;return null}_delayedAbort(e,r){setTimeout(()=>{this._abort(e,r)},0)}_abort(e,r){G.error("Aborting!"),this.emitError(e,r),this._lastServerId?this.disconnect():this.destroy()}destroy(){this.destroyed||(G.log(`Destroy peer with ID:${this.id}`),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(const e of this._connections.keys())this._cleanupPeer(e),this._connections.delete(e);this.socket.removeAllListeners()}_cleanupPeer(e){const r=this._connections.get(e);if(r)for(const n of r)n.close()}disconnect(){if(this.disconnected)return;const e=this.id;G.log(`Disconnect peer with ID:${e}`),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=e,this._id=null,this.emit("disconnected",e)}reconnect(){if(this.disconnected&&!this.destroyed)G.log(`Attempting reconnection to server with ID ${this._lastServerId}`),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(this.disconnected||this.open)throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`);G.error("In a hurry? We're still trying to make the initial connection!")}}listAllPeers(e=(r=>{})){this._api.listAllPeers().then(r=>e(r)).catch(r=>this._abort(ye.ServerError,r))}}Symbol.for(null);var ji=Sn;const Ni=[{path:"",component:xe,children:[{path:"home",component:$},{path:"my-score",component:Oe},{path:"shared-window",component:(()=>{class t{constructor(){this.peer=new ji}onClickPantalla(){this.peer.on("open",r=>{console.log("My peer ID is: "+r)}),this.peer.on("connection",r=>{this.conn=r}),navigator.mediaDevices.getDisplayMedia({video:!0}).then(r=>{this.peer.call("tv-peer-id",r).on("stream",i=>{console.log(i)})}).catch(r=>{console.error("Error accessing media devices: ",r)})}onClickVideo(){this.peer.on("open",r=>{console.log("My peer ID is: "+r)}),this.peer.on("call",r=>{navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then(n=>{r.answer(n),r.on("stream",i=>{console.log(i)})}).catch(n=>{console.error("Error accessing media devices: ",n)})})}static#e=this.\u0275fac=function(n){return new(n||t)};static#t=this.\u0275cmp=a.Xpm({type:t,selectors:[["app-shared-window"]],decls:4,vars:0,consts:[[3,"click"]],template:function(n,i){1&n&&(a.TgZ(0,"button",0),a.NdJ("click",function(){return i.onClickPantalla()}),a._uU(1,"Pantalla"),a.qZA(),a.TgZ(2,"button",0),a.NdJ("click",function(){return i.onClickVideo()}),a._uU(3,"Video"),a.qZA())}})}return t})()},{path:"**",redirectTo:"home"}]}];let Hi=(()=>{class t{static#e=this.\u0275fac=function(n){return new(n||t)};static#t=this.\u0275mod=a.oAB({type:t});static#n=this.\u0275inj=a.cJS({imports:[U.Bz.forChild(Ni),U.Bz]})}return t})();var Vi=p(6208),Gi=p(919);let Zi=(()=>{class t{static#e=this.\u0275fac=function(n){return new(n||t)};static#t=this.\u0275mod=a.oAB({type:t});static#n=this.\u0275inj=a.cJS({imports:[Hi,x.ez,D.UX,Vi.m,Gi.q,D.u5]})}return t})()},3304:function(at){at.exports=function(){"use strict";var p=6e4,g=36e5,A="millisecond",f="second",b="minute",x="hour",D="day",U="week",J="month",V="quarter",a="year",se="date",o="Invalid Date",c=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,d=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,y={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(Y){var j=["th","st","nd","rd"],$=Y%100;return"["+Y+(j[($-20)%10]||j[$]||j[0])+"]"}},M=function(Y,j,$){var Z=String(Y);return!Z||Z.length>=j?Y:""+Array(j+1-Z.length).join($)+Y},w={s:M,z:function(Y){var j=-Y.utcOffset(),$=Math.abs(j),Z=Math.floor($/60),L=$%60;return(j<=0?"+":"-")+M(Z,2,"0")+":"+M(L,2,"0")},m:function Y(j,$){if(j.date()<$.date())return-Y($,j);var Z=12*($.year()-j.year())+($.month()-j.month()),L=j.clone().add(Z,J),W=$-L<0,Q=j.clone().add(Z+(W?-1:1),J);return+(-(Z+($-L)/(W?L-Q:Q-L))||0)},a:function(Y){return Y<0?Math.ceil(Y)||0:Math.floor(Y)},p:function(Y){return{M:J,y:a,w:U,d:D,D:se,h:x,m:b,s:f,ms:A,Q:V}[Y]||String(Y||"").toLowerCase().replace(/s$/,"")},u:function(Y){return void 0===Y}},S="en",H={};H[S]=y;var ne="$isDayjsObject",de=function(Y){return Y instanceof Fe||!(!Y||!Y[ne])},Ae=function Y(j,$,Z){var L;if(!j)return S;if("string"==typeof j){var W=j.toLowerCase();H[W]&&(L=W),$&&(H[W]=$,L=W);var Q=j.split("-");if(!L&&Q.length>1)return Y(Q[0])}else{var fe=j.name;H[fe]=j,L=fe}return!Z&&L&&(S=L),L||!Z&&S},ue=function(Y,j){if(de(Y))return Y.clone();var $="object"==typeof j?j:{};return $.date=Y,$.args=arguments,new Fe($)},ie=w;ie.l=Ae,ie.i=de,ie.w=function(Y,j){return ue(Y,{locale:j.$L,utc:j.$u,x:j.$x,$offset:j.$offset})};var Fe=function(){function Y($){this.$L=Ae($.locale,null,!0),this.parse($),this.$x=this.$x||$.x||{},this[ne]=!0}var j=Y.prototype;return j.parse=function($){this.$d=function(Z){var L=Z.date,W=Z.utc;if(null===L)return new Date(NaN);if(ie.u(L))return new Date;if(L instanceof Date)return new Date(L);if("string"==typeof L&&!/Z$/i.test(L)){var Q=L.match(c);if(Q){var fe=Q[2]-1||0,me=(Q[7]||"0").substring(0,3);return W?new Date(Date.UTC(Q[1],fe,Q[3]||1,Q[4]||0,Q[5]||0,Q[6]||0,me)):new Date(Q[1],fe,Q[3]||1,Q[4]||0,Q[5]||0,Q[6]||0,me)}}return new Date(L)}($),this.init()},j.init=function(){var $=this.$d;this.$y=$.getFullYear(),this.$M=$.getMonth(),this.$D=$.getDate(),this.$W=$.getDay(),this.$H=$.getHours(),this.$m=$.getMinutes(),this.$s=$.getSeconds(),this.$ms=$.getMilliseconds()},j.$utils=function(){return ie},j.isValid=function(){return this.$d.toString()!==o},j.isSame=function($,Z){var L=ue($);return this.startOf(Z)<=L&&L<=this.endOf(Z)},j.isAfter=function($,Z){return ue($)<this.startOf(Z)},j.isBefore=function($,Z){return this.endOf(Z)<ue($)},j.$g=function($,Z,L){return ie.u($)?this[Z]:this.set(L,$)},j.unix=function(){return Math.floor(this.valueOf()/1e3)},j.valueOf=function(){return this.$d.getTime()},j.startOf=function($,Z){var L=this,W=!!ie.u(Z)||Z,Q=ie.p($),fe=function(De,Me){var je=ie.w(L.$u?Date.UTC(L.$y,Me,De):new Date(L.$y,Me,De),L);return W?je:je.endOf(D)},me=function(De,Me){return ie.w(L.toDate()[De].apply(L.toDate("s"),(W?[0,0,0,0]:[23,59,59,999]).slice(Me)),L)},be=this.$W,xe=this.$M,Oe=this.$D,Ve="set"+(this.$u?"UTC":"");switch(Q){case a:return W?fe(1,0):fe(31,11);case J:return W?fe(1,xe):fe(0,xe+1);case U:var Pe=this.$locale().weekStart||0,Ge=(be<Pe?be+7:be)-Pe;return fe(W?Oe-Ge:Oe+(6-Ge),xe);case D:case se:return me(Ve+"Hours",0);case x:return me(Ve+"Minutes",1);case b:return me(Ve+"Seconds",2);case f:return me(Ve+"Milliseconds",3);default:return this.clone()}},j.endOf=function($){return this.startOf($,!1)},j.$set=function($,Z){var L,W=ie.p($),Q="set"+(this.$u?"UTC":""),fe=(L={},L[D]=Q+"Date",L[se]=Q+"Date",L[J]=Q+"Month",L[a]=Q+"FullYear",L[x]=Q+"Hours",L[b]=Q+"Minutes",L[f]=Q+"Seconds",L[A]=Q+"Milliseconds",L)[W],me=W===D?this.$D+(Z-this.$W):Z;if(W===J||W===a){var be=this.clone().set(se,1);be.$d[fe](me),be.init(),this.$d=be.set(se,Math.min(this.$D,be.daysInMonth())).$d}else fe&&this.$d[fe](me);return this.init(),this},j.set=function($,Z){return this.clone().$set($,Z)},j.get=function($){return this[ie.p($)]()},j.add=function($,Z){var L,W=this;$=Number($);var Q=ie.p(Z),fe=function(xe){var Oe=ue(W);return ie.w(Oe.date(Oe.date()+Math.round(xe*$)),W)};if(Q===J)return this.set(J,this.$M+$);if(Q===a)return this.set(a,this.$y+$);if(Q===D)return fe(1);if(Q===U)return fe(7);var me=(L={},L[b]=p,L[x]=g,L[f]=1e3,L)[Q]||1,be=this.$d.getTime()+$*me;return ie.w(be,this)},j.subtract=function($,Z){return this.add(-1*$,Z)},j.format=function($){var Z=this,L=this.$locale();if(!this.isValid())return L.invalidDate||o;var W=$||"YYYY-MM-DDTHH:mm:ssZ",Q=ie.z(this),fe=this.$H,me=this.$m,be=this.$M,xe=L.weekdays,Oe=L.months,Pe=function(Me,je,We,Xe){return Me&&(Me[je]||Me(Z,W))||We[je].slice(0,Xe)},Ge=function(Me){return ie.s(fe%12||12,Me,"0")},De=L.meridiem||function(Me,je,We){var Xe=Me<12?"AM":"PM";return We?Xe.toLowerCase():Xe};return W.replace(d,function(Me,je){return je||function(We){switch(We){case"YY":return String(Z.$y).slice(-2);case"YYYY":return ie.s(Z.$y,4,"0");case"M":return be+1;case"MM":return ie.s(be+1,2,"0");case"MMM":return Pe(L.monthsShort,be,Oe,3);case"MMMM":return Pe(Oe,be);case"D":return Z.$D;case"DD":return ie.s(Z.$D,2,"0");case"d":return String(Z.$W);case"dd":return Pe(L.weekdaysMin,Z.$W,xe,2);case"ddd":return Pe(L.weekdaysShort,Z.$W,xe,3);case"dddd":return xe[Z.$W];case"H":return String(fe);case"HH":return ie.s(fe,2,"0");case"h":return Ge(1);case"hh":return Ge(2);case"a":return De(fe,me,!0);case"A":return De(fe,me,!1);case"m":return String(me);case"mm":return ie.s(me,2,"0");case"s":return String(Z.$s);case"ss":return ie.s(Z.$s,2,"0");case"SSS":return ie.s(Z.$ms,3,"0");case"Z":return Q}return null}(Me)||Q.replace(":","")})},j.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},j.diff=function($,Z,L){var W,Q=this,fe=ie.p(Z),me=ue($),be=(me.utcOffset()-this.utcOffset())*p,xe=this-me,Oe=function(){return ie.m(Q,me)};switch(fe){case a:W=Oe()/12;break;case J:W=Oe();break;case V:W=Oe()/3;break;case U:W=(xe-be)/6048e5;break;case D:W=(xe-be)/864e5;break;case x:W=xe/g;break;case b:W=xe/p;break;case f:W=xe/1e3;break;default:W=xe}return L?W:ie.a(W)},j.daysInMonth=function(){return this.endOf(J).$D},j.$locale=function(){return H[this.$L]},j.locale=function($,Z){if(!$)return this.$L;var L=this.clone(),W=Ae($,Z,!0);return W&&(L.$L=W),L},j.clone=function(){return ie.w(this.$d,this)},j.toDate=function(){return new Date(this.valueOf())},j.toJSON=function(){return this.isValid()?this.toISOString():null},j.toISOString=function(){return this.$d.toISOString()},j.toString=function(){return this.$d.toUTCString()},Y}(),ce=Fe.prototype;return ue.prototype=ce,[["$ms",A],["$s",f],["$m",b],["$H",x],["$W",D],["$M",J],["$y",a],["$D",se]].forEach(function(Y){ce[Y[1]]=function(j){return this.$g(j,Y[0],Y[1])}}),ue.extend=function(Y,j){return Y.$i||(Y(j,Fe,ue),Y.$i=!0),ue},ue.locale=Ae,ue.isDayjs=de,ue.unix=function(Y){return ue(1e3*Y)},ue.en=H[S],ue.Ls=H,ue.p={},ue}()},8755:(at,R)=>{var g;!function(){"use strict";var A=function(){this.init()};A.prototype={init:function(){var o=this||f;return o._counter=1e3,o._html5AudioPool=[],o.html5PoolSize=10,o._codecs={},o._howls=[],o._muted=!1,o._volume=1,o._canPlayEvent="canplaythrough",o._navigator=typeof window<"u"&&window.navigator?window.navigator:null,o.masterGain=null,o.noAudio=!1,o.usingWebAudio=!0,o.autoSuspend=!0,o.ctx=null,o.autoUnlock=!0,o._setup(),o},volume:function(o){var c=this||f;if(o=parseFloat(o),c.ctx||se(),typeof o<"u"&&o>=0&&o<=1){if(c._volume=o,c._muted)return c;c.usingWebAudio&&c.masterGain.gain.setValueAtTime(o,f.ctx.currentTime);for(var d=0;d<c._howls.length;d++)if(!c._howls[d]._webAudio)for(var y=c._howls[d]._getSoundIds(),M=0;M<y.length;M++){var w=c._howls[d]._soundById(y[M]);w&&w._node&&(w._node.volume=w._volume*o)}return c}return c._volume},mute:function(o){var c=this||f;c.ctx||se(),c._muted=o,c.usingWebAudio&&c.masterGain.gain.setValueAtTime(o?0:c._volume,f.ctx.currentTime);for(var d=0;d<c._howls.length;d++)if(!c._howls[d]._webAudio)for(var y=c._howls[d]._getSoundIds(),M=0;M<y.length;M++){var w=c._howls[d]._soundById(y[M]);w&&w._node&&(w._node.muted=!!o||w._muted)}return c},stop:function(){for(var o=this||f,c=0;c<o._howls.length;c++)o._howls[c].stop();return o},unload:function(){for(var o=this||f,c=o._howls.length-1;c>=0;c--)o._howls[c].unload();return o.usingWebAudio&&o.ctx&&typeof o.ctx.close<"u"&&(o.ctx.close(),o.ctx=null,se()),o},codecs:function(o){return(this||f)._codecs[o.replace(/^x-/,"")]},_setup:function(){var o=this||f;if(o.state=o.ctx&&o.ctx.state||"suspended",o._autoSuspend(),!o.usingWebAudio)if(typeof Audio<"u")try{typeof(new Audio).oncanplaythrough>"u"&&(o._canPlayEvent="canplay")}catch{o.noAudio=!0}else o.noAudio=!0;try{(new Audio).muted&&(o.noAudio=!0)}catch{}return o.noAudio||o._setupCodecs(),o},_setupCodecs:function(){var o=this||f,c=null;try{c=typeof Audio<"u"?new Audio:null}catch{return o}if(!c||"function"!=typeof c.canPlayType)return o;var d=c.canPlayType("audio/mpeg;").replace(/^no$/,""),y=o._navigator?o._navigator.userAgent:"",M=y.match(/OPR\/(\d+)/g),w=M&&parseInt(M[0].split("/")[1],10)<33,S=-1!==y.indexOf("Safari")&&-1===y.indexOf("Chrome"),H=y.match(/Version\/(.*?) /),ne=S&&H&&parseInt(H[1],10)<15;return o._codecs={mp3:!(w||!d&&!c.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!d,opus:!!c.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!c.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!c.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(c.canPlayType('audio/wav; codecs="1"')||c.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!c.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!c.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(c.canPlayType("audio/x-m4a;")||c.canPlayType("audio/m4a;")||c.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(c.canPlayType("audio/x-m4b;")||c.canPlayType("audio/m4b;")||c.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(c.canPlayType("audio/x-mp4;")||c.canPlayType("audio/mp4;")||c.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!(ne||!c.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!(ne||!c.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!c.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(c.canPlayType("audio/x-flac;")||c.canPlayType("audio/flac;")).replace(/^no$/,"")},o},_unlockAudio:function(){var o=this||f;if(!o._audioUnlocked&&o.ctx){o._audioUnlocked=!1,o.autoUnlock=!1,!o._mobileUnloaded&&44100!==o.ctx.sampleRate&&(o._mobileUnloaded=!0,o.unload()),o._scratchBuffer=o.ctx.createBuffer(1,1,22050);var c=function(d){for(;o._html5AudioPool.length<o.html5PoolSize;)try{var y=new Audio;y._unlocked=!0,o._releaseHtml5Audio(y)}catch{o.noAudio=!0;break}for(var M=0;M<o._howls.length;M++)if(!o._howls[M]._webAudio)for(var w=o._howls[M]._getSoundIds(),S=0;S<w.length;S++){var H=o._howls[M]._soundById(w[S]);H&&H._node&&!H._node._unlocked&&(H._node._unlocked=!0,H._node.load())}o._autoResume();var ne=o.ctx.createBufferSource();ne.buffer=o._scratchBuffer,ne.connect(o.ctx.destination),typeof ne.start>"u"?ne.noteOn(0):ne.start(0),"function"==typeof o.ctx.resume&&o.ctx.resume(),ne.onended=function(){ne.disconnect(0),o._audioUnlocked=!0,document.removeEventListener("touchstart",c,!0),document.removeEventListener("touchend",c,!0),document.removeEventListener("click",c,!0),document.removeEventListener("keydown",c,!0);for(var de=0;de<o._howls.length;de++)o._howls[de]._emit("unlock")}};return document.addEventListener("touchstart",c,!0),document.addEventListener("touchend",c,!0),document.addEventListener("click",c,!0),document.addEventListener("keydown",c,!0),o}},_obtainHtml5Audio:function(){var o=this||f;if(o._html5AudioPool.length)return o._html5AudioPool.pop();var c=(new Audio).play();return c&&typeof Promise<"u"&&(c instanceof Promise||"function"==typeof c.then)&&c.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(o){var c=this||f;return o._unlocked&&c._html5AudioPool.push(o),c},_autoSuspend:function(){var o=this;if(o.autoSuspend&&o.ctx&&!(typeof o.ctx.suspend>"u")&&f.usingWebAudio){for(var c=0;c<o._howls.length;c++)if(o._howls[c]._webAudio)for(var d=0;d<o._howls[c]._sounds.length;d++)if(!o._howls[c]._sounds[d]._paused)return o;return o._suspendTimer&&clearTimeout(o._suspendTimer),o._suspendTimer=setTimeout(function(){if(o.autoSuspend){o._suspendTimer=null,o.state="suspending";var y=function(){o.state="suspended",o._resumeAfterSuspend&&(delete o._resumeAfterSuspend,o._autoResume())};o.ctx.suspend().then(y,y)}},3e4),o}},_autoResume:function(){var o=this;if(o.ctx&&!(typeof o.ctx.resume>"u")&&f.usingWebAudio)return"running"===o.state&&"interrupted"!==o.ctx.state&&o._suspendTimer?(clearTimeout(o._suspendTimer),o._suspendTimer=null):"suspended"===o.state||"running"===o.state&&"interrupted"===o.ctx.state?(o.ctx.resume().then(function(){o.state="running";for(var c=0;c<o._howls.length;c++)o._howls[c]._emit("resume")}),o._suspendTimer&&(clearTimeout(o._suspendTimer),o._suspendTimer=null)):"suspending"===o.state&&(o._resumeAfterSuspend=!0),o}};var f=new A,b=function(o){o.src&&0!==o.src.length?this.init(o):console.error("An array of source files must be passed with any new Howl.")};b.prototype={init:function(o){var c=this;return f.ctx||se(),c._autoplay=o.autoplay||!1,c._format="string"!=typeof o.format?o.format:[o.format],c._html5=o.html5||!1,c._muted=o.mute||!1,c._loop=o.loop||!1,c._pool=o.pool||5,c._preload="boolean"!=typeof o.preload&&"metadata"!==o.preload||o.preload,c._rate=o.rate||1,c._sprite=o.sprite||{},c._src="string"!=typeof o.src?o.src:[o.src],c._volume=void 0!==o.volume?o.volume:1,c._xhr={method:o.xhr&&o.xhr.method?o.xhr.method:"GET",headers:o.xhr&&o.xhr.headers?o.xhr.headers:null,withCredentials:!(!o.xhr||!o.xhr.withCredentials)&&o.xhr.withCredentials},c._duration=0,c._state="unloaded",c._sounds=[],c._endTimers={},c._queue=[],c._playLock=!1,c._onend=o.onend?[{fn:o.onend}]:[],c._onfade=o.onfade?[{fn:o.onfade}]:[],c._onload=o.onload?[{fn:o.onload}]:[],c._onloaderror=o.onloaderror?[{fn:o.onloaderror}]:[],c._onplayerror=o.onplayerror?[{fn:o.onplayerror}]:[],c._onpause=o.onpause?[{fn:o.onpause}]:[],c._onplay=o.onplay?[{fn:o.onplay}]:[],c._onstop=o.onstop?[{fn:o.onstop}]:[],c._onmute=o.onmute?[{fn:o.onmute}]:[],c._onvolume=o.onvolume?[{fn:o.onvolume}]:[],c._onrate=o.onrate?[{fn:o.onrate}]:[],c._onseek=o.onseek?[{fn:o.onseek}]:[],c._onunlock=o.onunlock?[{fn:o.onunlock}]:[],c._onresume=[],c._webAudio=f.usingWebAudio&&!c._html5,typeof f.ctx<"u"&&f.ctx&&f.autoUnlock&&f._unlockAudio(),f._howls.push(c),c._autoplay&&c._queue.push({event:"play",action:function(){c.play()}}),c._preload&&"none"!==c._preload&&c.load(),c},load:function(){var o=this,c=null;if(f.noAudio)o._emit("loaderror",null,"No audio support.");else{"string"==typeof o._src&&(o._src=[o._src]);for(var d=0;d<o._src.length;d++){var y,M;if(o._format&&o._format[d])y=o._format[d];else{if("string"!=typeof(M=o._src[d])){o._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(y=/^data:audio\/([^;,]+);/i.exec(M))||(y=/\.([^.]+)$/.exec(M.split("?",1)[0])),y&&(y=y[1].toLowerCase())}if(y||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),y&&f.codecs(y)){c=o._src[d];break}}if(c)return o._src=c,o._state="loading","https:"===window.location.protocol&&"http:"===c.slice(0,5)&&(o._html5=!0,o._webAudio=!1),new x(o),o._webAudio&&U(o),o;o._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(o,c){var d=this,y=null;if("number"==typeof o)y=o,o=null;else{if("string"==typeof o&&"loaded"===d._state&&!d._sprite[o])return null;if(typeof o>"u"&&(o="__default",!d._playLock)){for(var M=0,w=0;w<d._sounds.length;w++)d._sounds[w]._paused&&!d._sounds[w]._ended&&(M++,y=d._sounds[w]._id);1===M?o=null:y=null}}var S=y?d._soundById(y):d._inactiveSound();if(!S)return null;if(y&&!o&&(o=S._sprite||"__default"),"loaded"!==d._state){S._sprite=o,S._ended=!1;var H=S._id;return d._queue.push({event:"play",action:function(){d.play(H)}}),H}if(y&&!S._paused)return c||d._loadQueue("play"),S._id;d._webAudio&&f._autoResume();var ne=Math.max(0,S._seek>0?S._seek:d._sprite[o][0]/1e3),de=Math.max(0,(d._sprite[o][0]+d._sprite[o][1])/1e3-ne),Ae=1e3*de/Math.abs(S._rate),ue=d._sprite[o][0]/1e3,ie=(d._sprite[o][0]+d._sprite[o][1])/1e3;S._sprite=o,S._ended=!1;var Fe=function(){S._paused=!1,S._seek=ne,S._start=ue,S._stop=ie,S._loop=!(!S._loop&&!d._sprite[o][2])};if(!(ne>=ie)){var ce=S._node;if(d._webAudio){var Y=function(){d._playLock=!1,Fe(),d._refreshBuffer(S),ce.gain.setValueAtTime(S._muted||d._muted?0:S._volume,f.ctx.currentTime),S._playStart=f.ctx.currentTime,typeof ce.bufferSource.start>"u"?ce.bufferSource.noteGrainOn(0,ne,S._loop?86400:de):ce.bufferSource.start(0,ne,S._loop?86400:de),Ae!==1/0&&(d._endTimers[S._id]=setTimeout(d._ended.bind(d,S),Ae)),c||setTimeout(function(){d._emit("play",S._id),d._loadQueue()},0)};"running"===f.state&&"interrupted"!==f.ctx.state?Y():(d._playLock=!0,d.once("resume",Y),d._clearTimer(S._id))}else{var j=function(){ce.currentTime=ne,ce.muted=S._muted||d._muted||f._muted||ce.muted,ce.volume=S._volume*f.volume(),ce.playbackRate=S._rate;try{var L=ce.play();if(L&&typeof Promise<"u"&&(L instanceof Promise||"function"==typeof L.then)?(d._playLock=!0,Fe(),L.then(function(){d._playLock=!1,ce._unlocked=!0,c?d._loadQueue():d._emit("play",S._id)}).catch(function(){d._playLock=!1,d._emit("playerror",S._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),S._ended=!0,S._paused=!0})):c||(d._playLock=!1,Fe(),d._emit("play",S._id)),ce.playbackRate=S._rate,ce.paused)return void d._emit("playerror",S._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==o||S._loop?d._endTimers[S._id]=setTimeout(d._ended.bind(d,S),Ae):(d._endTimers[S._id]=function(){d._ended(S),ce.removeEventListener("ended",d._endTimers[S._id],!1)},ce.addEventListener("ended",d._endTimers[S._id],!1))}catch(W){d._emit("playerror",S._id,W)}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===ce.src&&(ce.src=d._src,ce.load());var $=window&&window.ejecta||!ce.readyState&&f._navigator.isCocoonJS;if(ce.readyState>=3||$)j();else{d._playLock=!0,d._state="loading";var Z=function(){d._state="loaded",j(),ce.removeEventListener(f._canPlayEvent,Z,!1)};ce.addEventListener(f._canPlayEvent,Z,!1),d._clearTimer(S._id)}}return S._id}d._ended(S)},pause:function(o){var c=this;if("loaded"!==c._state||c._playLock)return c._queue.push({event:"pause",action:function(){c.pause(o)}}),c;for(var d=c._getSoundIds(o),y=0;y<d.length;y++){c._clearTimer(d[y]);var M=c._soundById(d[y]);if(M&&!M._paused&&(M._seek=c.seek(d[y]),M._rateSeek=0,M._paused=!0,c._stopFade(d[y]),M._node))if(c._webAudio){if(!M._node.bufferSource)continue;typeof M._node.bufferSource.stop>"u"?M._node.bufferSource.noteOff(0):M._node.bufferSource.stop(0),c._cleanBuffer(M._node)}else(!isNaN(M._node.duration)||M._node.duration===1/0)&&M._node.pause();arguments[1]||c._emit("pause",M?M._id:null)}return c},stop:function(o,c){var d=this;if("loaded"!==d._state||d._playLock)return d._queue.push({event:"stop",action:function(){d.stop(o)}}),d;for(var y=d._getSoundIds(o),M=0;M<y.length;M++){d._clearTimer(y[M]);var w=d._soundById(y[M]);w&&(w._seek=w._start||0,w._rateSeek=0,w._paused=!0,w._ended=!0,d._stopFade(y[M]),w._node&&(d._webAudio?w._node.bufferSource&&(typeof w._node.bufferSource.stop>"u"?w._node.bufferSource.noteOff(0):w._node.bufferSource.stop(0),d._cleanBuffer(w._node)):(!isNaN(w._node.duration)||w._node.duration===1/0)&&(w._node.currentTime=w._start||0,w._node.pause(),w._node.duration===1/0&&d._clearSound(w._node))),c||d._emit("stop",w._id))}return d},mute:function(o,c){var d=this;if("loaded"!==d._state||d._playLock)return d._queue.push({event:"mute",action:function(){d.mute(o,c)}}),d;if(typeof c>"u"){if("boolean"!=typeof o)return d._muted;d._muted=o}for(var y=d._getSoundIds(c),M=0;M<y.length;M++){var w=d._soundById(y[M]);w&&(w._muted=o,w._interval&&d._stopFade(w._id),d._webAudio&&w._node?w._node.gain.setValueAtTime(o?0:w._volume,f.ctx.currentTime):w._node&&(w._node.muted=!!f._muted||o),d._emit("mute",w._id))}return d},volume:function(){var d,y,S,o=this,c=arguments;if(0===c.length)return o._volume;if(1===c.length||2===c.length&&typeof c[1]>"u"?o._getSoundIds().indexOf(c[0])>=0?y=parseInt(c[0],10):d=parseFloat(c[0]):c.length>=2&&(d=parseFloat(c[0]),y=parseInt(c[1],10)),!(typeof d<"u"&&d>=0&&d<=1))return(S=y?o._soundById(y):o._sounds[0])?S._volume:0;if("loaded"!==o._state||o._playLock)return o._queue.push({event:"volume",action:function(){o.volume.apply(o,c)}}),o;typeof y>"u"&&(o._volume=d),y=o._getSoundIds(y);for(var H=0;H<y.length;H++)(S=o._soundById(y[H]))&&(S._volume=d,c[2]||o._stopFade(y[H]),o._webAudio&&S._node&&!S._muted?S._node.gain.setValueAtTime(d,f.ctx.currentTime):S._node&&!S._muted&&(S._node.volume=d*f.volume()),o._emit("volume",S._id));return o},fade:function(o,c,d,y){var M=this;if("loaded"!==M._state||M._playLock)return M._queue.push({event:"fade",action:function(){M.fade(o,c,d,y)}}),M;o=Math.min(Math.max(0,parseFloat(o)),1),c=Math.min(Math.max(0,parseFloat(c)),1),d=parseFloat(d),M.volume(o,y);for(var w=M._getSoundIds(y),S=0;S<w.length;S++){var H=M._soundById(w[S]);if(H){if(y||M._stopFade(w[S]),M._webAudio&&!H._muted){var ne=f.ctx.currentTime,de=ne+d/1e3;H._volume=o,H._node.gain.setValueAtTime(o,ne),H._node.gain.linearRampToValueAtTime(c,de)}M._startFadeInterval(H,o,c,d,w[S],typeof y>"u")}}return M},_startFadeInterval:function(o,c,d,y,M,w){var S=this,H=c,ne=d-c,de=Math.abs(ne/.01),Ae=Math.max(4,de>0?y/de:y),ue=Date.now();o._fadeTo=d,o._interval=setInterval(function(){var ie=(Date.now()-ue)/y;ue=Date.now(),H+=ne*ie,H=Math.round(100*H)/100,H=ne<0?Math.max(d,H):Math.min(d,H),S._webAudio?o._volume=H:S.volume(H,o._id,!0),w&&(S._volume=H),(d<c&&H<=d||d>c&&H>=d)&&(clearInterval(o._interval),o._interval=null,o._fadeTo=null,S.volume(d,o._id),S._emit("fade",o._id))},Ae)},_stopFade:function(o){var c=this,d=c._soundById(o);return d&&d._interval&&(c._webAudio&&d._node.gain.cancelScheduledValues(f.ctx.currentTime),clearInterval(d._interval),d._interval=null,c.volume(d._fadeTo,o),d._fadeTo=null,c._emit("fade",o)),c},loop:function(){var d,y,M,o=this,c=arguments;if(0===c.length)return o._loop;if(1===c.length){if("boolean"!=typeof c[0])return!!(M=o._soundById(parseInt(c[0],10)))&&M._loop;o._loop=d=c[0]}else 2===c.length&&(d=c[0],y=parseInt(c[1],10));for(var w=o._getSoundIds(y),S=0;S<w.length;S++)(M=o._soundById(w[S]))&&(M._loop=d,o._webAudio&&M._node&&M._node.bufferSource&&(M._node.bufferSource.loop=d,d&&(M._node.bufferSource.loopStart=M._start||0,M._node.bufferSource.loopEnd=M._stop,o.playing(w[S])&&(o.pause(w[S],!0),o.play(w[S],!0)))));return o},rate:function(){var d,y,S,o=this,c=arguments;if(0===c.length?y=o._sounds[0]._id:1===c.length?o._getSoundIds().indexOf(c[0])>=0?y=parseInt(c[0],10):d=parseFloat(c[0]):2===c.length&&(d=parseFloat(c[0]),y=parseInt(c[1],10)),"number"!=typeof d)return(S=o._soundById(y))?S._rate:o._rate;if("loaded"!==o._state||o._playLock)return o._queue.push({event:"rate",action:function(){o.rate.apply(o,c)}}),o;typeof y>"u"&&(o._rate=d),y=o._getSoundIds(y);for(var H=0;H<y.length;H++)if(S=o._soundById(y[H])){o.playing(y[H])&&(S._rateSeek=o.seek(y[H]),S._playStart=o._webAudio?f.ctx.currentTime:S._playStart),S._rate=d,o._webAudio&&S._node&&S._node.bufferSource?S._node.bufferSource.playbackRate.setValueAtTime(d,f.ctx.currentTime):S._node&&(S._node.playbackRate=d);var ne=o.seek(y[H]),Ae=1e3*((o._sprite[S._sprite][0]+o._sprite[S._sprite][1])/1e3-ne)/Math.abs(S._rate);(o._endTimers[y[H]]||!S._paused)&&(o._clearTimer(y[H]),o._endTimers[y[H]]=setTimeout(o._ended.bind(o,S),Ae)),o._emit("rate",S._id)}return o},seek:function(){var d,y,o=this,c=arguments;if(0===c.length?o._sounds.length&&(y=o._sounds[0]._id):1===c.length?o._getSoundIds().indexOf(c[0])>=0?y=parseInt(c[0],10):o._sounds.length&&(y=o._sounds[0]._id,d=parseFloat(c[0])):2===c.length&&(d=parseFloat(c[0]),y=parseInt(c[1],10)),typeof y>"u")return 0;if("number"==typeof d&&("loaded"!==o._state||o._playLock))return o._queue.push({event:"seek",action:function(){o.seek.apply(o,c)}}),o;var S=o._soundById(y);if(S){if(!("number"==typeof d&&d>=0)){if(o._webAudio){var Ae=o.playing(y)?f.ctx.currentTime-S._playStart:0;return S._seek+((S._rateSeek?S._rateSeek-S._seek:0)+Ae*Math.abs(S._rate))}return S._node.currentTime}var H=o.playing(y);H&&o.pause(y,!0),S._seek=d,S._ended=!1,o._clearTimer(y),!o._webAudio&&S._node&&!isNaN(S._node.duration)&&(S._node.currentTime=d);var ne=function(){H&&o.play(y,!0),o._emit("seek",y)};if(H&&!o._webAudio){var de=function(){o._playLock?setTimeout(de,0):ne()};setTimeout(de,0)}else ne()}return o},playing:function(o){var c=this;if("number"==typeof o){var d=c._soundById(o);return!!d&&!d._paused}for(var y=0;y<c._sounds.length;y++)if(!c._sounds[y]._paused)return!0;return!1},duration:function(o){var c=this,d=c._duration,y=c._soundById(o);return y&&(d=c._sprite[y._sprite][1]/1e3),d},state:function(){return this._state},unload:function(){for(var o=this,c=o._sounds,d=0;d<c.length;d++)c[d]._paused||o.stop(c[d]._id),o._webAudio||(o._clearSound(c[d]._node),c[d]._node.removeEventListener("error",c[d]._errorFn,!1),c[d]._node.removeEventListener(f._canPlayEvent,c[d]._loadFn,!1),c[d]._node.removeEventListener("ended",c[d]._endFn,!1),f._releaseHtml5Audio(c[d]._node)),delete c[d]._node,o._clearTimer(c[d]._id);var y=f._howls.indexOf(o);y>=0&&f._howls.splice(y,1);var M=!0;for(d=0;d<f._howls.length;d++)if(f._howls[d]._src===o._src||o._src.indexOf(f._howls[d]._src)>=0){M=!1;break}return D&&M&&delete D[o._src],f.noAudio=!1,o._state="unloaded",o._sounds=[],o=null,null},on:function(o,c,d,y){return"function"==typeof c&&this["_on"+o].push(y?{id:d,fn:c,once:y}:{id:d,fn:c}),this},off:function(o,c,d){var y=this,M=y["_on"+o],w=0;if("number"==typeof c&&(d=c,c=null),c||d)for(w=0;w<M.length;w++){var S=d===M[w].id;if(c===M[w].fn&&S||!c&&S){M.splice(w,1);break}}else if(o)y["_on"+o]=[];else{var H=Object.keys(y);for(w=0;w<H.length;w++)0===H[w].indexOf("_on")&&Array.isArray(y[H[w]])&&(y[H[w]]=[])}return y},once:function(o,c,d){return this.on(o,c,d,1),this},_emit:function(o,c,d){for(var y=this,M=y["_on"+o],w=M.length-1;w>=0;w--)(!M[w].id||M[w].id===c||"load"===o)&&(setTimeout(function(S){S.call(this,c,d)}.bind(y,M[w].fn),0),M[w].once&&y.off(o,M[w].fn,M[w].id));return y._loadQueue(o),y},_loadQueue:function(o){var c=this;if(c._queue.length>0){var d=c._queue[0];d.event===o&&(c._queue.shift(),c._loadQueue()),o||d.action()}return c},_ended:function(o){var c=this,d=o._sprite;if(!c._webAudio&&o._node&&!o._node.paused&&!o._node.ended&&o._node.currentTime<o._stop)return setTimeout(c._ended.bind(c,o),100),c;var y=!(!o._loop&&!c._sprite[d][2]);if(c._emit("end",o._id),!c._webAudio&&y&&c.stop(o._id,!0).play(o._id),c._webAudio&&y){c._emit("play",o._id),o._seek=o._start||0,o._rateSeek=0,o._playStart=f.ctx.currentTime;var M=1e3*(o._stop-o._start)/Math.abs(o._rate);c._endTimers[o._id]=setTimeout(c._ended.bind(c,o),M)}return c._webAudio&&!y&&(o._paused=!0,o._ended=!0,o._seek=o._start||0,o._rateSeek=0,c._clearTimer(o._id),c._cleanBuffer(o._node),f._autoSuspend()),!c._webAudio&&!y&&c.stop(o._id,!0),c},_clearTimer:function(o){var c=this;if(c._endTimers[o]){if("function"!=typeof c._endTimers[o])clearTimeout(c._endTimers[o]);else{var d=c._soundById(o);d&&d._node&&d._node.removeEventListener("ended",c._endTimers[o],!1)}delete c._endTimers[o]}return c},_soundById:function(o){for(var c=this,d=0;d<c._sounds.length;d++)if(o===c._sounds[d]._id)return c._sounds[d];return null},_inactiveSound:function(){var o=this;o._drain();for(var c=0;c<o._sounds.length;c++)if(o._sounds[c]._ended)return o._sounds[c].reset();return new x(o)},_drain:function(){var o=this,c=o._pool,d=0,y=0;if(!(o._sounds.length<c)){for(y=0;y<o._sounds.length;y++)o._sounds[y]._ended&&d++;for(y=o._sounds.length-1;y>=0;y--){if(d<=c)return;o._sounds[y]._ended&&(o._webAudio&&o._sounds[y]._node&&o._sounds[y]._node.disconnect(0),o._sounds.splice(y,1),d--)}}},_getSoundIds:function(o){if(typeof o>"u"){for(var d=[],y=0;y<this._sounds.length;y++)d.push(this._sounds[y]._id);return d}return[o]},_refreshBuffer:function(o){return o._node.bufferSource=f.ctx.createBufferSource(),o._node.bufferSource.buffer=D[this._src],o._node.bufferSource.connect(o._panner?o._panner:o._node),o._node.bufferSource.loop=o._loop,o._loop&&(o._node.bufferSource.loopStart=o._start||0,o._node.bufferSource.loopEnd=o._stop||0),o._node.bufferSource.playbackRate.setValueAtTime(o._rate,f.ctx.currentTime),this},_cleanBuffer:function(o){var d=f._navigator&&f._navigator.vendor.indexOf("Apple")>=0;if(!o.bufferSource)return this;if(f._scratchBuffer&&o.bufferSource&&(o.bufferSource.onended=null,o.bufferSource.disconnect(0),d))try{o.bufferSource.buffer=f._scratchBuffer}catch{}return o.bufferSource=null,this},_clearSound:function(o){/MSIE |Trident\//.test(f._navigator&&f._navigator.userAgent)||(o.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var x=function(o){this._parent=o,this.init()};x.prototype={init:function(){var o=this,c=o._parent;return o._muted=c._muted,o._loop=c._loop,o._volume=c._volume,o._rate=c._rate,o._seek=0,o._paused=!0,o._ended=!0,o._sprite="__default",o._id=++f._counter,c._sounds.push(o),o.create(),o},create:function(){var o=this,c=o._parent,d=f._muted||o._muted||o._parent._muted?0:o._volume;return c._webAudio?(o._node=typeof f.ctx.createGain>"u"?f.ctx.createGainNode():f.ctx.createGain(),o._node.gain.setValueAtTime(d,f.ctx.currentTime),o._node.paused=!0,o._node.connect(f.masterGain)):f.noAudio||(o._node=f._obtainHtml5Audio(),o._errorFn=o._errorListener.bind(o),o._node.addEventListener("error",o._errorFn,!1),o._loadFn=o._loadListener.bind(o),o._node.addEventListener(f._canPlayEvent,o._loadFn,!1),o._endFn=o._endListener.bind(o),o._node.addEventListener("ended",o._endFn,!1),o._node.src=c._src,o._node.preload=!0===c._preload?"auto":c._preload,o._node.volume=d*f.volume(),o._node.load()),o},reset:function(){var o=this,c=o._parent;return o._muted=c._muted,o._loop=c._loop,o._volume=c._volume,o._rate=c._rate,o._seek=0,o._rateSeek=0,o._paused=!0,o._ended=!0,o._sprite="__default",o._id=++f._counter,o},_errorListener:function(){var o=this;o._parent._emit("loaderror",o._id,o._node.error?o._node.error.code:0),o._node.removeEventListener("error",o._errorFn,!1)},_loadListener:function(){var o=this,c=o._parent;c._duration=Math.ceil(10*o._node.duration)/10,0===Object.keys(c._sprite).length&&(c._sprite={__default:[0,1e3*c._duration]}),"loaded"!==c._state&&(c._state="loaded",c._emit("load"),c._loadQueue()),o._node.removeEventListener(f._canPlayEvent,o._loadFn,!1)},_endListener:function(){var o=this,c=o._parent;c._duration===1/0&&(c._duration=Math.ceil(10*o._node.duration)/10,c._sprite.__default[1]===1/0&&(c._sprite.__default[1]=1e3*c._duration),c._ended(o)),o._node.removeEventListener("ended",o._endFn,!1)}};var D={},U=function(o){var c=o._src;if(D[c])return o._duration=D[c].duration,void a(o);if(/^data:[^;]+;base64,/.test(c)){for(var d=atob(c.split(",")[1]),y=new Uint8Array(d.length),M=0;M<d.length;++M)y[M]=d.charCodeAt(M);V(y.buffer,o)}else{var w=new XMLHttpRequest;w.open(o._xhr.method,c,!0),w.withCredentials=o._xhr.withCredentials,w.responseType="arraybuffer",o._xhr.headers&&Object.keys(o._xhr.headers).forEach(function(S){w.setRequestHeader(S,o._xhr.headers[S])}),w.onload=function(){var S=(w.status+"")[0];"0"===S||"2"===S||"3"===S?V(w.response,o):o._emit("loaderror",null,"Failed loading audio file with status: "+w.status+".")},w.onerror=function(){o._webAudio&&(o._html5=!0,o._webAudio=!1,o._sounds=[],delete D[c],o.load())},J(w)}},J=function(o){try{o.send()}catch{o.onerror()}},V=function(o,c){var d=function(){c._emit("loaderror",null,"Decoding audio data failed.")},y=function(M){M&&c._sounds.length>0?(D[c._src]=M,a(c,M)):d()};typeof Promise<"u"&&1===f.ctx.decodeAudioData.length?f.ctx.decodeAudioData(o).then(y).catch(d):f.ctx.decodeAudioData(o,y,d)},a=function(o,c){c&&!o._duration&&(o._duration=c.duration),0===Object.keys(o._sprite).length&&(o._sprite={__default:[0,1e3*o._duration]}),"loaded"!==o._state&&(o._state="loaded",o._emit("load"),o._loadQueue())},se=function(){if(f.usingWebAudio){try{typeof AudioContext<"u"?f.ctx=new AudioContext:typeof webkitAudioContext<"u"?f.ctx=new webkitAudioContext:f.usingWebAudio=!1}catch{f.usingWebAudio=!1}f.ctx||(f.usingWebAudio=!1);var o=/iP(hone|od|ad)/.test(f._navigator&&f._navigator.platform),c=f._navigator&&f._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),d=c?parseInt(c[1],10):null;if(o&&d&&d<9){var y=/safari/.test(f._navigator&&f._navigator.userAgent.toLowerCase());f._navigator&&!y&&(f.usingWebAudio=!1)}f.usingWebAudio&&(f.masterGain=typeof f.ctx.createGain>"u"?f.ctx.createGainNode():f.ctx.createGain(),f.masterGain.gain.setValueAtTime(f._muted?0:f._volume,f.ctx.currentTime),f.masterGain.connect(f.ctx.destination)),f._setup()}};void 0!==(g=function(){return{Howler:f,Howl:b}}.apply(R,[]))&&(at.exports=g),R.Howler=f,R.Howl=b,typeof global<"u"?(global.HowlerGlobal=A,global.Howler=f,global.Howl=b,global.Sound=x):typeof window<"u"&&(window.HowlerGlobal=A,window.Howler=f,window.Howl=b,window.Sound=x)}(),function(){"use strict";var f;HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(f){var b=this;if(!b.ctx||!b.ctx.listener)return b;for(var x=b._howls.length-1;x>=0;x--)b._howls[x].stereo(f);return b},HowlerGlobal.prototype.pos=function(f,b,x){var D=this;return D.ctx&&D.ctx.listener?"number"!=typeof f?D._pos:(D._pos=[f,b="number"!=typeof b?D._pos[1]:b,x="number"!=typeof x?D._pos[2]:x],typeof D.ctx.listener.positionX<"u"?(D.ctx.listener.positionX.setTargetAtTime(D._pos[0],Howler.ctx.currentTime,.1),D.ctx.listener.positionY.setTargetAtTime(D._pos[1],Howler.ctx.currentTime,.1),D.ctx.listener.positionZ.setTargetAtTime(D._pos[2],Howler.ctx.currentTime,.1)):D.ctx.listener.setPosition(D._pos[0],D._pos[1],D._pos[2]),D):D},HowlerGlobal.prototype.orientation=function(f,b,x,D,U,J){var V=this;if(!V.ctx||!V.ctx.listener)return V;var a=V._orientation;return"number"!=typeof f?a:(V._orientation=[f,b="number"!=typeof b?a[1]:b,x="number"!=typeof x?a[2]:x,D="number"!=typeof D?a[3]:D,U="number"!=typeof U?a[4]:U,J="number"!=typeof J?a[5]:J],typeof V.ctx.listener.forwardX<"u"?(V.ctx.listener.forwardX.setTargetAtTime(f,Howler.ctx.currentTime,.1),V.ctx.listener.forwardY.setTargetAtTime(b,Howler.ctx.currentTime,.1),V.ctx.listener.forwardZ.setTargetAtTime(x,Howler.ctx.currentTime,.1),V.ctx.listener.upX.setTargetAtTime(D,Howler.ctx.currentTime,.1),V.ctx.listener.upY.setTargetAtTime(U,Howler.ctx.currentTime,.1),V.ctx.listener.upZ.setTargetAtTime(J,Howler.ctx.currentTime,.1)):V.ctx.listener.setOrientation(f,b,x,D,U,J),V)},Howl.prototype.init=(f=Howl.prototype.init,function(b){var x=this;return x._orientation=b.orientation||[1,0,0],x._stereo=b.stereo||null,x._pos=b.pos||null,x._pannerAttr={coneInnerAngle:typeof b.coneInnerAngle<"u"?b.coneInnerAngle:360,coneOuterAngle:typeof b.coneOuterAngle<"u"?b.coneOuterAngle:360,coneOuterGain:typeof b.coneOuterGain<"u"?b.coneOuterGain:0,distanceModel:typeof b.distanceModel<"u"?b.distanceModel:"inverse",maxDistance:typeof b.maxDistance<"u"?b.maxDistance:1e4,panningModel:typeof b.panningModel<"u"?b.panningModel:"HRTF",refDistance:typeof b.refDistance<"u"?b.refDistance:1,rolloffFactor:typeof b.rolloffFactor<"u"?b.rolloffFactor:1},x._onstereo=b.onstereo?[{fn:b.onstereo}]:[],x._onpos=b.onpos?[{fn:b.onpos}]:[],x._onorientation=b.onorientation?[{fn:b.onorientation}]:[],f.call(this,b)}),Howl.prototype.stereo=function(f,b){var x=this;if(!x._webAudio)return x;if("loaded"!==x._state)return x._queue.push({event:"stereo",action:function(){x.stereo(f,b)}}),x;var D=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof b>"u"){if("number"!=typeof f)return x._stereo;x._stereo=f,x._pos=[f,0,0]}for(var U=x._getSoundIds(b),J=0;J<U.length;J++){var V=x._soundById(U[J]);if(V){if("number"!=typeof f)return V._stereo;V._stereo=f,V._pos=[f,0,0],V._node&&(V._pannerAttr.panningModel="equalpower",(!V._panner||!V._panner.pan)&&A(V,D),"spatial"===D?typeof V._panner.positionX<"u"?(V._panner.positionX.setValueAtTime(f,Howler.ctx.currentTime),V._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),V._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):V._panner.setPosition(f,0,0):V._panner.pan.setValueAtTime(f,Howler.ctx.currentTime)),x._emit("stereo",V._id)}}return x},Howl.prototype.pos=function(f,b,x,D){var U=this;if(!U._webAudio)return U;if("loaded"!==U._state)return U._queue.push({event:"pos",action:function(){U.pos(f,b,x,D)}}),U;if(b="number"!=typeof b?0:b,x="number"!=typeof x?-.5:x,typeof D>"u"){if("number"!=typeof f)return U._pos;U._pos=[f,b,x]}for(var J=U._getSoundIds(D),V=0;V<J.length;V++){var a=U._soundById(J[V]);if(a){if("number"!=typeof f)return a._pos;a._pos=[f,b,x],a._node&&((!a._panner||a._panner.pan)&&A(a,"spatial"),typeof a._panner.positionX<"u"?(a._panner.positionX.setValueAtTime(f,Howler.ctx.currentTime),a._panner.positionY.setValueAtTime(b,Howler.ctx.currentTime),a._panner.positionZ.setValueAtTime(x,Howler.ctx.currentTime)):a._panner.setPosition(f,b,x)),U._emit("pos",a._id)}}return U},Howl.prototype.orientation=function(f,b,x,D){var U=this;if(!U._webAudio)return U;if("loaded"!==U._state)return U._queue.push({event:"orientation",action:function(){U.orientation(f,b,x,D)}}),U;if(b="number"!=typeof b?U._orientation[1]:b,x="number"!=typeof x?U._orientation[2]:x,typeof D>"u"){if("number"!=typeof f)return U._orientation;U._orientation=[f,b,x]}for(var J=U._getSoundIds(D),V=0;V<J.length;V++){var a=U._soundById(J[V]);if(a){if("number"!=typeof f)return a._orientation;a._orientation=[f,b,x],a._node&&(a._panner||(a._pos||(a._pos=U._pos||[0,0,-.5]),A(a,"spatial")),typeof a._panner.orientationX<"u"?(a._panner.orientationX.setValueAtTime(f,Howler.ctx.currentTime),a._panner.orientationY.setValueAtTime(b,Howler.ctx.currentTime),a._panner.orientationZ.setValueAtTime(x,Howler.ctx.currentTime)):a._panner.setOrientation(f,b,x)),U._emit("orientation",a._id)}}return U},Howl.prototype.pannerAttr=function(){var x,D,U,f=this,b=arguments;if(!f._webAudio)return f;if(0===b.length)return f._pannerAttr;if(1===b.length){if("object"!=typeof b[0])return(U=f._soundById(parseInt(b[0],10)))?U._pannerAttr:f._pannerAttr;x=b[0],typeof D>"u"&&(x.pannerAttr||(x.pannerAttr={coneInnerAngle:x.coneInnerAngle,coneOuterAngle:x.coneOuterAngle,coneOuterGain:x.coneOuterGain,distanceModel:x.distanceModel,maxDistance:x.maxDistance,refDistance:x.refDistance,rolloffFactor:x.rolloffFactor,panningModel:x.panningModel}),f._pannerAttr={coneInnerAngle:typeof x.pannerAttr.coneInnerAngle<"u"?x.pannerAttr.coneInnerAngle:f._coneInnerAngle,coneOuterAngle:typeof x.pannerAttr.coneOuterAngle<"u"?x.pannerAttr.coneOuterAngle:f._coneOuterAngle,coneOuterGain:typeof x.pannerAttr.coneOuterGain<"u"?x.pannerAttr.coneOuterGain:f._coneOuterGain,distanceModel:typeof x.pannerAttr.distanceModel<"u"?x.pannerAttr.distanceModel:f._distanceModel,maxDistance:typeof x.pannerAttr.maxDistance<"u"?x.pannerAttr.maxDistance:f._maxDistance,refDistance:typeof x.pannerAttr.refDistance<"u"?x.pannerAttr.refDistance:f._refDistance,rolloffFactor:typeof x.pannerAttr.rolloffFactor<"u"?x.pannerAttr.rolloffFactor:f._rolloffFactor,panningModel:typeof x.pannerAttr.panningModel<"u"?x.pannerAttr.panningModel:f._panningModel})}else 2===b.length&&(x=b[0],D=parseInt(b[1],10));for(var J=f._getSoundIds(D),V=0;V<J.length;V++)if(U=f._soundById(J[V])){var a=U._pannerAttr;a={coneInnerAngle:typeof x.coneInnerAngle<"u"?x.coneInnerAngle:a.coneInnerAngle,coneOuterAngle:typeof x.coneOuterAngle<"u"?x.coneOuterAngle:a.coneOuterAngle,coneOuterGain:typeof x.coneOuterGain<"u"?x.coneOuterGain:a.coneOuterGain,distanceModel:typeof x.distanceModel<"u"?x.distanceModel:a.distanceModel,maxDistance:typeof x.maxDistance<"u"?x.maxDistance:a.maxDistance,refDistance:typeof x.refDistance<"u"?x.refDistance:a.refDistance,rolloffFactor:typeof x.rolloffFactor<"u"?x.rolloffFactor:a.rolloffFactor,panningModel:typeof x.panningModel<"u"?x.panningModel:a.panningModel};var se=U._panner;se||(U._pos||(U._pos=f._pos||[0,0,-.5]),A(U,"spatial"),se=U._panner),se.coneInnerAngle=a.coneInnerAngle,se.coneOuterAngle=a.coneOuterAngle,se.coneOuterGain=a.coneOuterGain,se.distanceModel=a.distanceModel,se.maxDistance=a.maxDistance,se.refDistance=a.refDistance,se.rolloffFactor=a.rolloffFactor,se.panningModel=a.panningModel}return f},Sound.prototype.init=function(f){return function(){var b=this,x=b._parent;b._orientation=x._orientation,b._stereo=x._stereo,b._pos=x._pos,b._pannerAttr=x._pannerAttr,f.call(this),b._stereo?x.stereo(b._stereo):b._pos&&x.pos(b._pos[0],b._pos[1],b._pos[2],b._id)}}(Sound.prototype.init),Sound.prototype.reset=function(f){return function(){var b=this,x=b._parent;return b._orientation=x._orientation,b._stereo=x._stereo,b._pos=x._pos,b._pannerAttr=x._pannerAttr,b._stereo?x.stereo(b._stereo):b._pos?x.pos(b._pos[0],b._pos[1],b._pos[2],b._id):b._panner&&(b._panner.disconnect(0),b._panner=void 0,x._refreshBuffer(b)),f.call(this)}}(Sound.prototype.reset);var A=function(f,b){"spatial"===(b=b||"spatial")?(f._panner=Howler.ctx.createPanner(),f._panner.coneInnerAngle=f._pannerAttr.coneInnerAngle,f._panner.coneOuterAngle=f._pannerAttr.coneOuterAngle,f._panner.coneOuterGain=f._pannerAttr.coneOuterGain,f._panner.distanceModel=f._pannerAttr.distanceModel,f._panner.maxDistance=f._pannerAttr.maxDistance,f._panner.refDistance=f._pannerAttr.refDistance,f._panner.rolloffFactor=f._pannerAttr.rolloffFactor,f._panner.panningModel=f._pannerAttr.panningModel,typeof f._panner.positionX<"u"?(f._panner.positionX.setValueAtTime(f._pos[0],Howler.ctx.currentTime),f._panner.positionY.setValueAtTime(f._pos[1],Howler.ctx.currentTime),f._panner.positionZ.setValueAtTime(f._pos[2],Howler.ctx.currentTime)):f._panner.setPosition(f._pos[0],f._pos[1],f._pos[2]),typeof f._panner.orientationX<"u"?(f._panner.orientationX.setValueAtTime(f._orientation[0],Howler.ctx.currentTime),f._panner.orientationY.setValueAtTime(f._orientation[1],Howler.ctx.currentTime),f._panner.orientationZ.setValueAtTime(f._orientation[2],Howler.ctx.currentTime)):f._panner.setOrientation(f._orientation[0],f._orientation[1],f._orientation[2])):(f._panner=Howler.ctx.createStereoPanner(),f._panner.pan.setValueAtTime(f._stereo,Howler.ctx.currentTime)),f._panner.connect(f._node),f._paused||f._parent.pause(f._id,!0).play(f._id,!0)}}()},2917:at=>{"use strict";const R={generateIdentifier:function(){return Math.random().toString(36).substring(2,12)}};R.localCName=R.generateIdentifier(),R.splitLines=function(p){return p.trim().split("\n").map(g=>g.trim())},R.splitSections=function(p){return p.split("\nm=").map((A,f)=>(f>0?"m="+A:A).trim()+"\r\n")},R.getDescription=function(p){const g=R.splitSections(p);return g&&g[0]},R.getMediaSections=function(p){const g=R.splitSections(p);return g.shift(),g},R.matchPrefix=function(p,g){return R.splitLines(p).filter(A=>0===A.indexOf(g))},R.parseCandidate=function(p){let g;g=0===p.indexOf("a=candidate:")?p.substring(12).split(" "):p.substring(10).split(" ");const A={foundation:g[0],component:{1:"rtp",2:"rtcp"}[g[1]]||g[1],protocol:g[2].toLowerCase(),priority:parseInt(g[3],10),ip:g[4],address:g[4],port:parseInt(g[5],10),type:g[7]};for(let f=8;f<g.length;f+=2)switch(g[f]){case"raddr":A.relatedAddress=g[f+1];break;case"rport":A.relatedPort=parseInt(g[f+1],10);break;case"tcptype":A.tcpType=g[f+1];break;case"ufrag":A.ufrag=g[f+1],A.usernameFragment=g[f+1];break;default:void 0===A[g[f]]&&(A[g[f]]=g[f+1])}return A},R.writeCandidate=function(p){const g=[];g.push(p.foundation);const A=p.component;g.push("rtp"===A?1:"rtcp"===A?2:A),g.push(p.protocol.toUpperCase()),g.push(p.priority),g.push(p.address||p.ip),g.push(p.port);const f=p.type;return g.push("typ"),g.push(f),"host"!==f&&p.relatedAddress&&p.relatedPort&&(g.push("raddr"),g.push(p.relatedAddress),g.push("rport"),g.push(p.relatedPort)),p.tcpType&&"tcp"===p.protocol.toLowerCase()&&(g.push("tcptype"),g.push(p.tcpType)),(p.usernameFragment||p.ufrag)&&(g.push("ufrag"),g.push(p.usernameFragment||p.ufrag)),"candidate:"+g.join(" ")},R.parseIceOptions=function(p){return p.substring(14).split(" ")},R.parseRtpMap=function(p){let g=p.substring(9).split(" ");const A={payloadType:parseInt(g.shift(),10)};return g=g[0].split("/"),A.name=g[0],A.clockRate=parseInt(g[1],10),A.channels=3===g.length?parseInt(g[2],10):1,A.numChannels=A.channels,A},R.writeRtpMap=function(p){let g=p.payloadType;void 0!==p.preferredPayloadType&&(g=p.preferredPayloadType);const A=p.channels||p.numChannels||1;return"a=rtpmap:"+g+" "+p.name+"/"+p.clockRate+(1!==A?"/"+A:"")+"\r\n"},R.parseExtmap=function(p){const g=p.substring(9).split(" ");return{id:parseInt(g[0],10),direction:g[0].indexOf("/")>0?g[0].split("/")[1]:"sendrecv",uri:g[1],attributes:g.slice(2).join(" ")}},R.writeExtmap=function(p){return"a=extmap:"+(p.id||p.preferredId)+(p.direction&&"sendrecv"!==p.direction?"/"+p.direction:"")+" "+p.uri+(p.attributes?" "+p.attributes:"")+"\r\n"},R.parseFmtp=function(p){const g={};let A;const f=p.substring(p.indexOf(" ")+1).split(";");for(let b=0;b<f.length;b++)A=f[b].trim().split("="),g[A[0].trim()]=A[1];return g},R.writeFmtp=function(p){let g="",A=p.payloadType;if(void 0!==p.preferredPayloadType&&(A=p.preferredPayloadType),p.parameters&&Object.keys(p.parameters).length){const f=[];Object.keys(p.parameters).forEach(b=>{f.push(void 0!==p.parameters[b]?b+"="+p.parameters[b]:b)}),g+="a=fmtp:"+A+" "+f.join(";")+"\r\n"}return g},R.parseRtcpFb=function(p){const g=p.substring(p.indexOf(" ")+1).split(" ");return{type:g.shift(),parameter:g.join(" ")}},R.writeRtcpFb=function(p){let g="",A=p.payloadType;return void 0!==p.preferredPayloadType&&(A=p.preferredPayloadType),p.rtcpFeedback&&p.rtcpFeedback.length&&p.rtcpFeedback.forEach(f=>{g+="a=rtcp-fb:"+A+" "+f.type+(f.parameter&&f.parameter.length?" "+f.parameter:"")+"\r\n"}),g},R.parseSsrcMedia=function(p){const g=p.indexOf(" "),A={ssrc:parseInt(p.substring(7,g),10)},f=p.indexOf(":",g);return f>-1?(A.attribute=p.substring(g+1,f),A.value=p.substring(f+1)):A.attribute=p.substring(g+1),A},R.parseSsrcGroup=function(p){const g=p.substring(13).split(" ");return{semantics:g.shift(),ssrcs:g.map(A=>parseInt(A,10))}},R.getMid=function(p){const g=R.matchPrefix(p,"a=mid:")[0];if(g)return g.substring(6)},R.parseFingerprint=function(p){const g=p.substring(14).split(" ");return{algorithm:g[0].toLowerCase(),value:g[1].toUpperCase()}},R.getDtlsParameters=function(p,g){return{role:"auto",fingerprints:R.matchPrefix(p+g,"a=fingerprint:").map(R.parseFingerprint)}},R.writeDtlsParameters=function(p,g){let A="a=setup:"+g+"\r\n";return p.fingerprints.forEach(f=>{A+="a=fingerprint:"+f.algorithm+" "+f.value+"\r\n"}),A},R.parseCryptoLine=function(p){const g=p.substring(9).split(" ");return{tag:parseInt(g[0],10),cryptoSuite:g[1],keyParams:g[2],sessionParams:g.slice(3)}},R.writeCryptoLine=function(p){return"a=crypto:"+p.tag+" "+p.cryptoSuite+" "+("object"==typeof p.keyParams?R.writeCryptoKeyParams(p.keyParams):p.keyParams)+(p.sessionParams?" "+p.sessionParams.join(" "):"")+"\r\n"},R.parseCryptoKeyParams=function(p){if(0!==p.indexOf("inline:"))return null;const g=p.substring(7).split("|");return{keyMethod:"inline",keySalt:g[0],lifeTime:g[1],mkiValue:g[2]?g[2].split(":")[0]:void 0,mkiLength:g[2]?g[2].split(":")[1]:void 0}},R.writeCryptoKeyParams=function(p){return p.keyMethod+":"+p.keySalt+(p.lifeTime?"|"+p.lifeTime:"")+(p.mkiValue&&p.mkiLength?"|"+p.mkiValue+":"+p.mkiLength:"")},R.getCryptoParameters=function(p,g){return R.matchPrefix(p+g,"a=crypto:").map(R.parseCryptoLine)},R.getIceParameters=function(p,g){const A=R.matchPrefix(p+g,"a=ice-ufrag:")[0],f=R.matchPrefix(p+g,"a=ice-pwd:")[0];return A&&f?{usernameFragment:A.substring(12),password:f.substring(10)}:null},R.writeIceParameters=function(p){let g="a=ice-ufrag:"+p.usernameFragment+"\r\na=ice-pwd:"+p.password+"\r\n";return p.iceLite&&(g+="a=ice-lite\r\n"),g},R.parseRtpParameters=function(p){const g={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},f=R.splitLines(p)[0].split(" ");g.profile=f[2];for(let x=3;x<f.length;x++){const D=f[x],U=R.matchPrefix(p,"a=rtpmap:"+D+" ")[0];if(U){const J=R.parseRtpMap(U),V=R.matchPrefix(p,"a=fmtp:"+D+" ");switch(J.parameters=V.length?R.parseFmtp(V[0]):{},J.rtcpFeedback=R.matchPrefix(p,"a=rtcp-fb:"+D+" ").map(R.parseRtcpFb),g.codecs.push(J),J.name.toUpperCase()){case"RED":case"ULPFEC":g.fecMechanisms.push(J.name.toUpperCase())}}}R.matchPrefix(p,"a=extmap:").forEach(x=>{g.headerExtensions.push(R.parseExtmap(x))});const b=R.matchPrefix(p,"a=rtcp-fb:* ").map(R.parseRtcpFb);return g.codecs.forEach(x=>{b.forEach(D=>{x.rtcpFeedback.find(J=>J.type===D.type&&J.parameter===D.parameter)||x.rtcpFeedback.push(D)})}),g},R.writeRtpDescription=function(p,g){let A="";A+="m="+p+" ",A+=g.codecs.length>0?"9":"0",A+=" "+(g.profile||"UDP/TLS/RTP/SAVPF")+" ",A+=g.codecs.map(b=>void 0!==b.preferredPayloadType?b.preferredPayloadType:b.payloadType).join(" ")+"\r\n",A+="c=IN IP4 0.0.0.0\r\n",A+="a=rtcp:9 IN IP4 0.0.0.0\r\n",g.codecs.forEach(b=>{A+=R.writeRtpMap(b),A+=R.writeFmtp(b),A+=R.writeRtcpFb(b)});let f=0;return g.codecs.forEach(b=>{b.maxptime>f&&(f=b.maxptime)}),f>0&&(A+="a=maxptime:"+f+"\r\n"),g.headerExtensions&&g.headerExtensions.forEach(b=>{A+=R.writeExtmap(b)}),A},R.parseRtpEncodingParameters=function(p){const g=[],A=R.parseRtpParameters(p),f=-1!==A.fecMechanisms.indexOf("RED"),b=-1!==A.fecMechanisms.indexOf("ULPFEC"),x=R.matchPrefix(p,"a=ssrc:").map(a=>R.parseSsrcMedia(a)).filter(a=>"cname"===a.attribute),D=x.length>0&&x[0].ssrc;let U;const J=R.matchPrefix(p,"a=ssrc-group:FID").map(a=>a.substring(17).split(" ").map(o=>parseInt(o,10)));J.length>0&&J[0].length>1&&J[0][0]===D&&(U=J[0][1]),A.codecs.forEach(a=>{if("RTX"===a.name.toUpperCase()&&a.parameters.apt){let se={ssrc:D,codecPayloadType:parseInt(a.parameters.apt,10)};D&&U&&(se.rtx={ssrc:U}),g.push(se),f&&(se=JSON.parse(JSON.stringify(se)),se.fec={ssrc:D,mechanism:b?"red+ulpfec":"red"},g.push(se))}}),0===g.length&&D&&g.push({ssrc:D});let V=R.matchPrefix(p,"b=");return V.length&&(V=0===V[0].indexOf("b=TIAS:")?parseInt(V[0].substring(7),10):0===V[0].indexOf("b=AS:")?1e3*parseInt(V[0].substring(5),10)*.95-16e3:void 0,g.forEach(a=>{a.maxBitrate=V})),g},R.parseRtcpParameters=function(p){const g={},A=R.matchPrefix(p,"a=ssrc:").map(x=>R.parseSsrcMedia(x)).filter(x=>"cname"===x.attribute)[0];A&&(g.cname=A.value,g.ssrc=A.ssrc);const f=R.matchPrefix(p,"a=rtcp-rsize");g.reducedSize=f.length>0,g.compound=0===f.length;const b=R.matchPrefix(p,"a=rtcp-mux");return g.mux=b.length>0,g},R.writeRtcpParameters=function(p){let g="";return p.reducedSize&&(g+="a=rtcp-rsize\r\n"),p.mux&&(g+="a=rtcp-mux\r\n"),void 0!==p.ssrc&&p.cname&&(g+="a=ssrc:"+p.ssrc+" cname:"+p.cname+"\r\n"),g},R.parseMsid=function(p){let g;const A=R.matchPrefix(p,"a=msid:");if(1===A.length)return g=A[0].substring(7).split(" "),{stream:g[0],track:g[1]};const f=R.matchPrefix(p,"a=ssrc:").map(b=>R.parseSsrcMedia(b)).filter(b=>"msid"===b.attribute);return f.length>0?(g=f[0].value.split(" "),{stream:g[0],track:g[1]}):void 0},R.parseSctpDescription=function(p){const g=R.parseMLine(p),A=R.matchPrefix(p,"a=max-message-size:");let f;A.length>0&&(f=parseInt(A[0].substring(19),10)),isNaN(f)&&(f=65536);const b=R.matchPrefix(p,"a=sctp-port:");if(b.length>0)return{port:parseInt(b[0].substring(12),10),protocol:g.fmt,maxMessageSize:f};const x=R.matchPrefix(p,"a=sctpmap:");if(x.length>0){const D=x[0].substring(10).split(" ");return{port:parseInt(D[0],10),protocol:D[1],maxMessageSize:f}}},R.writeSctpDescription=function(p,g){let A=[];return A="DTLS/SCTP"!==p.protocol?["m="+p.kind+" 9 "+p.protocol+" "+g.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+g.port+"\r\n"]:["m="+p.kind+" 9 "+p.protocol+" "+g.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+g.port+" "+g.protocol+" 65535\r\n"],void 0!==g.maxMessageSize&&A.push("a=max-message-size:"+g.maxMessageSize+"\r\n"),A.join("")},R.generateSessionId=function(){return Math.random().toString().substr(2,22)},R.writeSessionBoilerplate=function(p,g,A){let f;const b=void 0!==g?g:2;return f=p||R.generateSessionId(),"v=0\r\no="+(A||"thisisadapterortc")+" "+f+" "+b+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},R.getDirection=function(p,g){const A=R.splitLines(p);for(let f=0;f<A.length;f++)switch(A[f]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return A[f].substring(2)}return g?R.getDirection(g):"sendrecv"},R.getKind=function(p){return R.splitLines(p)[0].split(" ")[0].substring(2)},R.isRejected=function(p){return"0"===p.split(" ",2)[1]},R.parseMLine=function(p){const A=R.splitLines(p)[0].substring(2).split(" ");return{kind:A[0],port:parseInt(A[1],10),protocol:A[2],fmt:A.slice(3).join(" ")}},R.parseOLine=function(p){const A=R.matchPrefix(p,"o=")[0].substring(2).split(" ");return{username:A[0],sessionId:A[1],sessionVersion:parseInt(A[2],10),netType:A[3],addressType:A[4],address:A[5]}},R.isValidSDP=function(p){if("string"!=typeof p||0===p.length)return!1;const g=R.splitLines(p);for(let A=0;A<g.length;A++)if(g[A].length<2||"="!==g[A].charAt(1))return!1;return!0},at.exports=R}}]);